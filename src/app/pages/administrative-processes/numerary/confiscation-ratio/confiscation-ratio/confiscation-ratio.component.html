<app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <h5 class="title">Relación de decomiso</h5>
  </div>
  <div body>
    <div class="row mt-3 mb-3">
      <form class="form-material" [formGroup]="form">
        <div class="row mt-4">
          <div class="col-md-2">
            <form-field
              [control]="form.get('forfeitureKey')"
              label="Clave Decomiso">
              <input
                type="number"
                min="0"
                class="form-control"
                formControlName="forfeitureKey"
                oninput="if(this.value.length > 20) this.value = this.value.slice(0, 20);" />
            </form-field>
          </div>
          <div class="col-md-2">
            <form-radio label="M.N">
              <input type="radio" formControlName="check" value="PESOS" />
            </form-radio>
            <form-radio label="U.S.DLLS.">
              <input type="radio" formControlName="check" value="DOLARES" />
            </form-radio>
            <form-radio label="CONV_NUM">
              <input type="radio" formControlName="check" value="CONV_NUM" />
            </form-radio>
          </div>
          <div class="col-md-7">
            <div class="row">
              <div class="col-2">
                <button
                  type="button"
                  tooltip="Genera reporte de relación de decomiso."
                  class="btn btn-primary active btn-sm"
                  (click)="callReport()">
                  Imprimir<i class="bx bx-printer bx-sm float-icon"></i>
                </button>
              </div>
              <div class="col-2">
                <form-field [control]="form.get('import')" label="Importe">
                  <input
                    type="number"
                    class="form-control"
                    formControlName="import"
                    min="0"
                    oninput="if(this.value.length > 12) this.value = this.value.slice(0, 12);" />
                </form-field>
              </div>
              <div class="col-6">
                <form-field [control]="form.get('pgr')" label="PGR">
                  <input
                    type="number"
                    class="form-control"
                    formControlName="pgr"
                    oninput="if(this.value.length > 17) this.value = this.value.slice(0, 17);" />
                </form-field>
              </div>
              <div class="col-6 mt-4">
                <form-field [control]="form.get('ssa')" label="SSA">
                  <input
                    type="number"
                    class="form-control"
                    formControlName="ssa"
                    oninput="if(this.value.length > 17) this.value = this.value.slice(0, 17);" />
                </form-field>
              </div>
              <div class="col-6 mt-4">
                <form-field [control]="form.get('pjf')" label="PJF">
                  <input
                    type="number"
                    class="form-control"
                    formControlName="pjf"
                    oninput="if(this.value.length > 17) this.value = this.value.slice(0, 17);" />
                </form-field>
              </div>
            </div>
          </div>
        </div>
      </form>
      <form action="" class="form-material" [formGroup]="file">
        <div class="row mt-4">
          <!--<div class="col-md-2">
            <button class="btn btn-secondary btn-sm active">
              Abrir archivo de texto
            </button>
          </div>
          <div class="col-md-2">
            <input
              type="file"
              #FileInput
              class="form-control"
              formControlName="recordRead" />
          </div>-->
          <div class="col-md-4">
            <input
              id="uploadfile"
              style="display: none"
              type="file"
              (change)="onCsvSelected($event)" />
            <button
              _ngcontent-odc-c183=""
              type="submit"
              class="btn btn-primary active">
              Subir Archivo
              <i
                _ngcontent-odc-c183=""
                aria-hidden="true"
                class="fa fa-upload"
                (click)="openFile()"></i>
            </button>
          </div>
          <div class="col-md-2">
            <form-field
              [control]="file.get('recordRead')"
              label="Registros Leídos:">
              <input
                type="number"
                class="form-control"
                formControlName="recordRead"
                oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10);" />
            </form-field>
          </div>
          <div class="col-md-2">
            <form-field
              [control]="file.get('recordsProcessed')"
              label="Registros Procesados:">
              <input
                type="number"
                class="form-control"
                formControlName="recordsProcessed"
                oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10);" />
            </form-field>
          </div>
          <div class="col-md-2">
            <form-field [control]="file.get('processed')" label="Procesados:">
              <input
                type="number"
                class="form-control"
                formControlName="processed"
                oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10);" />
            </form-field>
          </div>
          <div class="col-md-2">
            <form-field [control]="file.get('wrong')" label="Erroneos:">
              <input
                type="number"
                class="form-control"
                formControlName="wrong"
                oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10);" />
            </form-field>
          </div>
        </div>
      </form>

      <div class="row pt-5" *ngFor="let d of data">
        <form action="" class="form-material" [formGroup]="d">
          <div class="row mt-4 pt-4">
            <div class="col-md-3">
              <form-field [control]="d.get('noGood')" label="No. Bien">
                <!-- <ngx-select (fetchItems)="getGood($event)" label="No. Bien" [data]="goods" [form]="d" value="goodId"
                  bindLabel="goodDescription" [control]="'noGood'" (change)="(null)" [searchOnInit]="true"
                  [showTooltip]="true">
                </ngx-select> -->
                <input
                  type="number"
                  class="form-control"
                  formControlName="noGood" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field [control]="d.get('criminalCase')" label="Causa Penal">
                <input
                  type="text"
                  class="form-control"
                  formControlName="criminalCase" />
              </form-field>
            </div>
            <div class="col-md-3">
              <form-field
                [control]="d.get('preliminaryInvestigation')"
                label="Averiguación Previa">
                <input
                  type="text"
                  class="form-control"
                  formControlName="preliminaryInvestigation" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field [control]="d.get('dateTesofe')" label="Fecha Tesofe">
                <input
                  type="date"
                  class="form-control"
                  formControlName="dateTesofe" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field
                [control]="d.get('jobTesofe')"
                label="Oficio a Tesofe">
                <input
                  type="text"
                  class="form-control"
                  formControlName="jobTesofe" />
              </form-field>
            </div>
          </div>
          <div class="row mt-4">
            <div class="col-md-2">
              <form-field [control]="d.get('authority')" label="Autoridad">
                <input
                  type="number"
                  class="form-control"
                  formControlName="authority" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field
                [control]="d.get('dateTreasury')"
                label="Fecha Tesorería">
                <input
                  type="date"
                  class="form-control"
                  formControlName="dateTreasury" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field
                [control]="d.get('dateJudgment')"
                label="Fecha Sentencia">
                <input
                  type="date"
                  class="form-control"
                  formControlName="dateJudgment" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field
                [control]="d.get('appraisalValue')"
                label="Valor Avalúo">
                <input
                  type="number"
                  class="form-control"
                  formControlName="appraisalValue" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field [control]="d.get('interests')" label="Intereses">
                <input
                  type="number"
                  class="form-control"
                  formControlName="interests" />
              </form-field>
            </div>
            <div class="col-md-2">
              <form-field [control]="d.get('results')" label="Resultado">
                <input
                  type="number"
                  class="form-control"
                  formControlName="results" />
              </form-field>
            </div>
          </div>
          <div class="row pt-5">
            <div class="col-md-8"></div>
            <div class="col-md-4">
              <form-field
                [control]="d.get('totalSeizures')"
                label="Total en Decomisos:">
                <input
                  type="number"
                  class="form-control"
                  formControlName="totalSeizures" />
              </form-field>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</app-card>
