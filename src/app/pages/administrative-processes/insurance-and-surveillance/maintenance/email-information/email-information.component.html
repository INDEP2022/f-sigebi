<div body>
  <form [formGroup]="form" (ngSubmit)="send()" class="form-material">
    <div class="row mt-4">
      <div class="col-md-8">
        <form-field
          [control]="form.get('reasonForChange')"
          label="Motivo de Cambio">
          <input
            type="text"
            class="form-control"
            formControlName="reasonForChange" />
        </form-field>
      </div>
      <div class="col-md-4">
        <form-field [control]="form.get('date')" label="Fecha de Solicitud">
          <input
            [min]="maxDate"
            type="text"
            formControlName="date"
            class="form-control"
            bsDatepicker />
        </form-field>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-6">
        <form-field
          label="EnvÃ­a"
          class="form-group"
          [control]="form.get('from')">
          <ng-custom-select
            [isLoadInOnInit]="false"
            [moreParams]="{ 'filter.status': '$eq:1' }"
            class="form-control"
            path="email/api/v1/vig-email-send"
            paramSearch="filter.nameSend"
            prefixSearch="$ilike"
            (valueChange)="onChangeFrom($event)">
            <ng-template let-item>
              {{ item.nameSend }} / {{ item.emailSend }}
            </ng-template>
          </ng-custom-select>
        </form-field>
      </div>
      <div class="col-md-6">
        <form-field [control]="form.get('to')" label="Para">
          <ng-custom-select
            [isLoadInOnInit]="false"
            [moreParams]="{
              'filter.bookType': '$eq:P',
              'filter.bookStatus': '$eq:1'
            }"
            class="form-control"
            path="email/api/v1/vig-mail-book"
            paramSearch="filter.bookName"
            prefixSearch="$ilike"
            (valueChange)="onChangeTo($event)">
            <ng-template let-item>
              {{ item.bookName }}/{{ item.bookEmail }}
            </ng-template>
          </ng-custom-select>
        </form-field>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-md-6">
        <form-field label="CC" [control]="form.get('cc')">
          <ng-custom-select
            [isLoadInOnInit]="true"
            [moreParams]="{
              'filter.bookType': '$eq:C',
              'filter.bookStatus': '$eq:1'
            }"
            class="form-control"
            path="email/api/v1/vig-mail-book"
            paramSearch="filter.bookName"
            prefixSearch="$ilike"
            (valueChange)="onChangeCc($event)">
            <ng-template let-item>
              {{ item.bookName }}/{{ item.bookEmail }}
            </ng-template>
          </ng-custom-select>
        </form-field>
      </div>
      <div class="col-md-6">
        <form-field [control]="form.get('type')" label="Tipo">
          <!-- <ng-select formControlName="administra" class="form-control">
            <ng-option *ngFor="let item of arrayDele" [value]="item.delegacion">{{ item.no_delegacion_2 }} -
              {{ item.delegacion }}</ng-option>
          </ng-select> -->
          <ng-custom-select
            (valueChange)="changeType($event)"
            [isLoadInOnInit]="true"
            [moreParams]="{ 'filter.status': '$eq:1' }"
            class="form-control"
            path="email/api/v1/vig-email-body"
            paramSearch="filter.bodyEmail"
            prefixSearch="$ilike">
            <ng-template let-item>
              {{ convertEmailBody(item.id) }}
            </ng-template>
          </ng-custom-select>
        </form-field>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-md-6">
        <form-field [control]="form.get('issue')" label="Asunto">
          <input
            readonly
            type="text"
            class="form-control px-3"
            formControlName="issue" />
        </form-field>
      </div>
      <div class="col-md-6">
        <form-field [control]="form.get('textBody')" label="Cuerpo">
          <input
            readonly
            type="text"
            class="form-control px-3"
            formControlName="textBody" />
        </form-field>
      </div>
    </div>

    <div class="row mt-4 float-right">
      <div>
        <button
          (click)="cleanForm()"
          type="button"
          class="btn btn-danger btn-sm active mr-2">
          Limpiar
          <i class="fa fa-eraser" aria-hidden="true"></i>
        </button>
      </div>
    </div>
    <!-- <div class="row mt-4 float-right">
      <div>
        <button type="submit" class="btn btn-primary btn-sm active mx-4">
          ENVIAR
        </button>
      </div>
    </div> -->
  </form>
</div>
