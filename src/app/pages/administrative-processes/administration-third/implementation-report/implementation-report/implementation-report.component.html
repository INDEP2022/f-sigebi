<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Reporte de implementacion</h5>
  </div>
  <div body>
    <h5 class="title">Ordenes de Servicio</h5>
    <form [formGroup]="serviceOrdersForm" class="form-material">
      <div class="row margin-input">
        <div class="col-md-4">
          <!-- <form-field [control]="serviceOrdersForm.get('serviceOrderKey')">
            <ngx-select (fetchItems)="getServiceOrderKey($event)" [data]="serviceOrderKey" [form]="serviceOrdersForm"
              value="serviceOrderKey" bindLabel="description" label="Clave de Orden de Servicio"
              control="serviceOrderKey">
            </ngx-select>
          </form-field> -->
          <form-field [control]="serviceOrdersForm.get('serviceOrderKey')">
            <ngx-select
              label="Proceso"
              [form]="serviceOrdersForm"
              [data]="serviceOrderKey"
              (fetchItems)="getServices()"
              bindLabel="proAndName"
              control="serviceOrderKey"
              [searchOnInit]="true"
              [showTooltip]="true"
              termMaxLength="50"
              value="no_servicio"
              [labelTemplate]="serLabel"
              [optionTemplate]="serOption"
              (change)="getTypes()">
            </ngx-select>
            <ng-template #serLabel let-item="item">
              {{ item.no_servicio + ' - ' + item.descripcion }}
            </ng-template>
            <ng-template #serOption let-item="item">
              <div [title]="item.no_servicio + '-' + item.descripcion">
                {{ item.no_servicio + ' - ' + item.descripcion }}
              </div>
            </ng-template>
          </form-field>
        </div>
        <div class="col-md-2">
          <form-field [control]="serviceOrdersForm.get('type')">
            <ngx-select
              label="Tipo"
              [form]="serviceOrdersForm"
              [data]="types"
              (fetchItems)="getTypes()"
              bindLabel="serAndName"
              control="type"
              [searchOnInit]="true"
              [showTooltip]="true"
              termMaxLength="50"
              value="no_tiposervicio"
              [labelTemplate]="typeLabel"
              [optionTemplate]="typeOption">
            </ngx-select>
            <ng-template #typeLabel let-item="item">
              {{ item.no_tiposervicio + ' - ' + item.descripcion }}
            </ng-template>
            <ng-template #typeOption let-item="item">
              <div [title]="item.no_tiposervicio + '-' + item.descripcion">
                {{ item.no_tiposervicio + ' - ' + item.descripcion }}
              </div>
            </ng-template>
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="serviceOrdersForm.get('process')">
            <ngx-select
              label="Proceso"
              [form]="serviceOrdersForm"
              [data]="process"
              (fetchItems)="getProcess($event)"
              bindLabel="proAndName"
              control="process"
              [searchOnInit]="true"
              [showTooltip]="true"
              termMaxLength="50"
              value="processNumber"
              [labelTemplate]="proLabel"
              [optionTemplate]="proOption"
              (change)="getServices()">
            </ngx-select>
            <ng-template #proLabel let-item="item">
              {{ item.processNumber + ' - ' + item.description }}
            </ng-template>
            <ng-template #proOption let-item="item">
              <div [title]="item.processNumber + '-' + item.description">
                {{ item.processNumber + ' - ' + item.description }}
              </div>
            </ng-template>
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="serviceOrdersForm.get('regionalCoordination')">
            <ngx-select
              (fetchItems)="getRegionalCoordination($event)"
              [data]="regionalCoordination"
              [form]="serviceOrdersForm"
              value="regionalCoordination"
              bindLabel="description"
              label="Cordinación Regional"
              control="regionalCoordination">
            </ngx-select>
          </form-field>
        </div>
      </div>
      <div class="row margin-input">
        <div class="col-md-4">
          <form-field [control]="serviceOrdersForm.get('reportKey')">
            <ngx-select
              (fetchItems)="getReportKey($event)"
              [data]="reportKey"
              [form]="serviceOrdersForm"
              value="reportKey"
              bindLabel="description"
              label="Clave de Reporte"
              control="reportKey">
            </ngx-select>
          </form-field>
        </div>
        <div class="col-md-2">
          <form-field [control]="serviceOrdersForm.get('status')">
            <ngx-select
              (fetchItems)="getStatus($event)"
              [data]="status"
              [form]="serviceOrdersForm"
              value="status"
              bindLabel="description"
              label="Estatus"
              control="status">
            </ngx-select>
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field
            [control]="serviceOrdersForm.get('authorizationDate')"
            label="Fecha de Autorización">
            <input
              type="text"
              formControlName="authorizationDate"
              placeholder="Fecha de Autorización"
              class="form-control"
              bsDatepicker />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field
            [control]="serviceOrdersForm.get('dateCapture')"
            label="Fecha de Captura">
            <input
              type="text"
              formControlName="dateCapture"
              placeholder="Fecha de Captura"
              class="form-control"
              bsDatepicker />
          </form-field>
        </div>
      </div>
      <div class="row margin-input">
        <div class="col-md-12">
          <form-field
            [control]="serviceOrdersForm.get('observations')"
            label="Observaciones">
            <textarea
              class="form-control"
              formControlName="observations"
              placeholder="Observaciones"></textarea>
          </form-field>
        </div>
      </div>
    </form>
    <div class="row margin-input">
      <div class="col-md-2">
        <button
          class="btn btn-primary btn-sm active"
          (click)="openHistoric('')">
          Genera
        </button>
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary btn-sm active">Bitacora</button>
      </div>
    </div>
    <div class="margin-input">
      <h5 class="title">Bienes del Reporte Implementación</h5>
      <div class="row pt-4">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered'"
              [settings]="settings"
              [source]="data1">
            </ng2-smart-table>
          </div>
        </div>
        <app-pagination
          [params]="params"
          [totalItems]="totalItems"></app-pagination>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2">
        <button class="btn btn-primary btn-sm active">Incorpora</button>
      </div>
      <div class="col-md-2">
        <button class="btn btn-danger btn-sm active">Elimina</button>
      </div>
    </div>
    <div class="margin-input">
      <h5 class="title">Reportes de Implementación</h5>
      <div class="row pt-4">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered'"
              [settings]="settings2"
              [source]="data1">
            </ng2-smart-table>
          </div>
        </div>
        <app-pagination
          [params]="params"
          [totalItems]="totalItems"></app-pagination>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2">
        <button class="btn btn-primary btn-sm active">Incorpora</button>
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary btn-sm active">Nuevos Costos</button>
      </div>
    </div>
  </div>
</app-card>
