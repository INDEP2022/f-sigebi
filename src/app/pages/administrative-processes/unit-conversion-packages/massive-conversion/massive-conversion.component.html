<app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <h5 class="title">CONVERSIÓN MASIVA PARCIALIZACIÓN INVERSA</h5>
  </div>
  <div body>
    <form class="form-material" [formGroup]="form">
      <div class="row mb-3">
        <div class="col-md-2 col-sm-12">
          <form-field [control]="form.get('noPackage')">
            <ngx-select
              (fetchItems)="searchNoPackage($event)"
              control="noPackage"
              label="No. Paquete"
              bindLabel="numberPackage"
              [data]="dataPackage"
              [form]="form"></ngx-select>
          </form-field>
        </div>
        <div class="col-md-5 col-sm-12">
          <form-field
            [control]="form.get('cvePackage')"
            label="Clave del paquete">
            <input
              [readOnly]="true"
              class="form-control"
              formControlName="cvePackage" />
          </form-field>
        </div>
        <div class="col-md-5 col-sm-12">
          <form-field
            [control]="form.get('descriptionPackage')"
            label="Descripcion">
            <input
              [readOnly]="true"
              class="form-control"
              formControlName="descriptionPackage" />
          </form-field>
        </div>
      </div>
      <div class="row mb-3 mt-3">
        <!--Package type-->
        <div class="col-md-6 col-sm-12">
          <form-field [control]="form.get('packageType')">
            <label class="text-center">Tipo</label>
            <div class="row justify-content-between">
              <div class="col-md-3">
                <form-radio label="Destrucción">
                  <input type="radio" formControlName="packageType" value="1" />
                </form-radio>
              </div>
              <div class="col-md-3">
                <form-radio label="Donación">
                  <input type="radio" formControlName="packageType" value="2" />
                </form-radio>
              </div>
              <div class="col-md-3">
                <form-radio label="Chatarra">
                  <input type="radio" formControlName="packageType" value="3" />
                </form-radio>
              </div>
              <div class="col">
                <form-radio>
                  <input type="radio" formControlName="packageType" value="4" />
                </form-radio>
              </div>
            </div>
          </form-field>
        </div>

        <div class="col-md-3 col-sm-12 mt-3">
          <form-field
            [control]="form.get('amountKg')"
            label="Cantidad en kilos">
            <input
              formControlName="amountKg"
              class="form-control"
              type="number"
              min="0"
              max="500"
              oninput="if(this.value.length > 16) this.value = this.value.slice(0, 16);" />
          </form-field>
        </div>
        <div class="col-md-3 col-sm-12 mt-3">
          <form-field [control]="form.get('status')">
            <ngx-select
              control="status"
              label="Estatus del Paquete"
              bindLabel="name"
              value="value"
              [searchable]="false"
              [data]="statusPackage"
              [form]="form"></ngx-select>
          </form-field>
        </div>
      </div>
      <div class="row mb-3 mt-3">
        <!--Actions-->
        <div class="col text-center">
          <button
            [disabled]="!validaButton.PB_VALIDA"
            class="btn btn-primary btn-sm active mr-3"
            (click)="showConfirmAlert()">
            Validado
          </button>
          <button
            [disabled]="!validaButton.PB_AUTORIZA"
            class="btn btn-primary btn-sm active mr-3"
            (click)="showAutorizateAlert()">
            Autorizado
          </button>
          <button
            [disabled]="!validaButton.PB_CERRAR"
            class="btn btn-primary btn-sm active mr-3"
            (click)="showCloseAlert()">
            Cierre
          </button>
          <button
            type="button"
            tooltip="Agregar"
            containerClass="tooltip-style"
            class="btn btn-info btn-sm active ml-2 mr-2"
            (click)="newPackage()">
            Nuevo <i class="bx bx-plus bx-sm float-icon"></i>
          </button>
        </div>
      </div>

      <!--Process Users-->
      <div class="row mt-5 mb-3">
        <table>
          <thead>
            <tr>
              <th></th>
              <th>Proyecto</th>
              <th>Validación</th>
              <th>Autorización</th>
              <th>Cierre/Modificación</th>
              <th>Cancelación</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="ml-3">
                <i class="bx bx-calendar me-1 text-primary"></i> Fecha
              </td>
              <td>
                <form-field [control]="form.get('fecElab')">
                  <span>{{ form.get('fecElab').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('fecValida')">
                  <span>{{ form.get('fecValida').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('fecAutoriza')">
                  <span>{{ form.get('fecAutoriza').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('fecCerrado')">
                  <span>{{ form.get('fecCerrado').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('fecCancelado')">
                  <span>{{ form.get('fecCancelado').value }}</span>
                </form-field>
              </td>
            </tr>
            <tr>
              <td class="ml-3">
                <i class="bx bx-user me-1 text-primary"></i> Usuario
              </td>
              <td>
                <form-field [control]="form.get('userElab')">
                  <span>{{ form.get('userElab').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('userValida')">
                  <span>{{ form.get('userValida').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('userAutoriza')">
                  <span>{{ form.get('userAutoriza').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('userCerrado')">
                  <span>{{ form.get('userCerrado').value }}</span>
                </form-field>
              </td>
              <td>
                <form-field [control]="form.get('userCancelado')">
                  <span>{{ form.get('userCancelado').value }}</span>
                </form-field>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>
</app-card>

<app-card [footer]="true">
  <div body>
    <form class="form-material" [formGroup]="form">
      <!--Options Menu-->
      <div class="row mt-3">
        <!--Delegation Component-->
        <div class="col-md-6 col-sm-12 col-xs-12 mb-3 mt-3">
          <app-delegation-shared
            [form]="form"
            (emitDelegation)="emitDelegation($event)"
            labelDelegation="Coordinación"
            [showSubdelegation]="false"></app-delegation-shared>
        </div>
        <!--Goods Classification Component-->
        <div class="col-md-6 col-sm-12 col-xs-12 mb-3 mt-3">
          <app-goods-classification-shared
            [form]="form"></app-goods-classification-shared>
        </div>
        <!--Target Tags Component-->
        <div class="col-md-6 col-sm-12 col-xs-12 mb-3 mt-3">
          <app-target-tags-shared [form]="form"></app-target-tags-shared>
        </div>
        <!--Goods Status Component-->
        <div class="col-md-6 col-sm-12 col-xs-12 mb-3 mt-3">
          <app-goods-status-shared [form]="form"></app-goods-status-shared>
        </div>
        <!--Measurement Units Component-->
        <div class="col-md-6 col-sm-12 col-xs-12 mb-3 mt-3">
          <app-measurement-units-shared
            [form]="form"></app-measurement-units-shared>
        </div>
        <!--Transference Component-->
        <div class="col-md-6 col-sm-12 col-xs-12 mb-3 mt-3">
          <app-transferente-shared [form]="form"></app-transferente-shared>
        </div>
        <!--warehouse Component-->
        <div class="col-md-12 col-sm-12 col-xs-12 mt-3">
          <app-warehouse-shared
            [form]="form"
            [showWarehouseType]="false"></app-warehouse-shared>
        </div>
      </div>
    </form>
  </div>
  <div footer class="row mb-3 mt-3">
    <div class="col text-center">
      <button
        *ngIf="validaButton.PB_PERMISOS"
        type="button"
        [disabled]="!validaButton.PB_PERMISOS"
        class="btn btn-primary btn-sm active mr-3"
        (click)="openPermissions('')">
        Permisos
      </button>
      <button
        (click)="cancelPackage()"
        [disabled]="!validaButton.PB_CANCELA"
        type="button"
        class="btn btn-danger btn-sm active">
        Cancelar
      </button>
    </div>
  </div>
</app-card>

<!--Add New Good-->
<app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <h5 class="title">Nuevo Bien</h5>
  </div>
  <div body>
    <form class="form-material" [formGroup]="form2">
      <div class="row mb-3 mt-3">
        <div class="col-lg-3 col-md-3 col-sm-3 col-12 mb-3 mt-3">
          <form-field [control]="form2.get('numberGood')" label="No. Bien">
            <input
              formControlName="numberGood"
              type="text"
              class="form-control"
              type="number"
              min="0"
              oninput="if(this.value.length > 11) this.value = this.value.slice(0, 11);" />
          </form-field>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-3 col-12 mb-3 mt-3">
          <form-field label="Expediente" [control]="form2.get('record')">
            <input
              formControlName="record"
              class="form-control"
              type="number"
              min="0"
              oninput="if(this.value.length > 11) this.value = this.value.slice(0, 11);" />
          </form-field>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-12 mb-3 mt-3">
          <form-field label="Descripción" [control]="form2.get('description')">
            <input
              formControlName="description"
              class="form-control"
              type="text"
              maxlength="1250" />
          </form-field>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-3 col-12 mb-3 mt-3">
          <form-field label="Cantidad" [control]="form2.get('amount')">
            <input
              formControlName="amount"
              class="form-control"
              type="number"
              min="0"
              oninput="if(this.value.length > 19) this.value = this.value.slice(0, 19);" />
          </form-field>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-3 col-12 mb-3 mt-3">
          <form-field label="Unidad" [control]="form2.get('unit')">
            <input
              formControlName="unit"
              type="text"
              class="form-control"
              maxlength="25" />
          </form-field>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-3 col-12 mb-3 mt-3">
          <form-field label="Estatus" [control]="form2.get('status')">
            <input
              formControlName="status"
              type="text"
              class="form-control"
              maxlength="25" />
          </form-field>
        </div>
      </div>
    </form>
  </div>
</app-card>

<app-card>
  <!--Actions-->
  <div body>
    <div class="row mb-3 mt-3">
      <div class="col text-center">
        <button
          (click)="selectGoods()"
          class="btn btn-primary btn-sm active mr-3">
          Seleccionar Bienes
        </button>
        <button
          (click)="verifyGoods()"
          class="btn btn-primary btn-sm active m-3">
          Verificar Bienes
        </button>
        <button
          (click)="viewModal('error')"
          class="btn btn-primary btn-sm active mr-3">
          Ver Error
        </button>
        <button
          (click)="exportToExcel()"
          class="btn btn-sm btn-success active mr-3">
          Exportar a Excel
          <i class="bx bx-download float-icon"></i>
        </button>
      </div>
      <div class="col-md-3 mt-3">
        <form-check label="Bienes Correctos" for="checkGood">
          <input
            id="checkGood"
            type="checkbox"
            formControlName="check"
            [readOnly]="true" />
        </form-check>
      </div>
    </div>
  </div>
</app-card>

<!--Data Previsualization-->
<app-paq-destion-det
  [packageType]="packageType"
  [noPackage]="noPackage"></app-paq-destion-det>

<!-- <app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <h5 class="title">Previsualización de Datos</h5>
    <div class="col-md-5 buttons">
      <app-columns-select
        (settingsChange)="settingsChange($event)"
        [settings]="settings"></app-columns-select>
    </div>
  </div>
  <div body>
    <div class="row pt-4">
      <div class="col-md-12">
        <div [class]="loading ? 'table-loading' : ''">
          <ng2-smart-table
            [attr.class]="'table-bordered'"
            [settings]="settings"
            [source]="data"
            (userSelectRow)="selectRow($event)"
            (edit)="edit($event.data)"
            (delete)="delete($event.data)">
          </ng2-smart-table>
        </div>
      </div>
    </div>
    <app-pagination [params]="params" [totalItems]="totalItems">
    </app-pagination>
  </div>
</app-card> -->

<!--Scan Folio-->

<app-card>
  <div body>
    <div class="row">
      <div class="col-md-2 col-sm-12 col-xs-12">
        <div class="d-flex justify-content-center">
          <div class="m-3">
            <button
              (click)="generateFoli()"
              tooltip="Generar Folio de Escaneo y Solicitud"
              containerclass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1">
              <i class="bx bxs-file-find"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-2 col-sm-12 col-xs-12">
        <div class="d-flex justify-content-center">
          <div class="m-3">
            <button
              tooltip="Escanear"
              containerclass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1">
              <i class="bx bxs-file"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-4 col-sm-12 col-xs-12 mt-1">
        <form [formGroup]="form" class="form-material">
          <div class="col-md-full col-sm-12 col-xs-12">
            <form-field
              label="Folio de escaneo"
              [control]="form.get('scanFolio')">
              <input
                type="text"
                class="form-control"
                formControlName="scanFolio" />
            </form-field>
          </div>
        </form>
      </div>
      <div class="col-md-2 col-sm-12 col-xs-12">
        <div class="d-flex justify-content-center">
          <div class="m-3">
            <button
              (click)="generate()"
              tooltip="Generar Folio de Escaneo y Solicitud"
              containerclass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1">
              <i class="bx bxs-file-find"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-2 col-sm-12 col-xs-12">
        <div class="d-flex justify-content-center">
          <div class="m-3">
            <button
              tooltip="Generar Folio de Escaneo y Solicitud"
              containerclass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1">
              <i class="bx bxs-file-find"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</app-card>

<!--<div class="ch-content" header>
      <h5 class="title">Escaneo</h5>
    </div>
    <div body>
      <form class="form-material" [formGroup]="form">
        <div class="row mb-3 mt-3">
          <div class="col-lg-3 col-md-6 col-sm-6 col-6 mb-3 mt-3">
            <form-field [control]="form.get('scanFolio')" label="Folio Escaneo">
              <input formControlName="scanFolio" type="number" class="form-control" />
            </form-field>
          </div>
          <div class="col-lg-3 col-md-6 col-sm-6 col-6 mb-3 mt-3 align-self-center">
            <button class="btn btn-primary btn-sm active w-100">Escanear</button>
          </div>
        </div>
      </form>
    </div>-->
<!--</app-card>-->

<!--Paragraphs-->
<app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <h5 class="title">Párrafos</h5>
    <div class="col-md-5 buttons">
      <button
        (click)="downloadReport()"
        type="button"
        class="btn btn-primary active btn-sm">
        Imprimir <i class="bx bx-printer bx-sm float-icon"></i>
      </button>
    </div>
  </div>
  <div body>
    <form class="form-material" [formGroup]="form">
      <div class="row mb-3 mt-3">
        <div class="col-12 mb-3 mt-3">
          <form-field [control]="form.get('paragraph1')" label="Párafo Inicial">
            <textarea
              rows="3"
              [max-length]="4000"
              class="form-control"
              formControlName="paragraph1"></textarea>
          </form-field>
        </div>
        <div class="col-12 mb-3 mt-3">
          <form-field
            [control]="form.get('paragraph2')"
            label="Párafo Intermedio">
            <textarea
              rows="3"
              [max-length]="4000"
              class="form-control"
              formControlName="paragraph2"></textarea>
          </form-field>
        </div>
        <div class="col-12 mb-3 mt-3">
          <form-field [control]="form.get('paragraph3')" label="Párafo Final">
            <textarea
              rows="3"
              [max-length]="4000"
              class="form-control"
              formControlName="paragraph3"></textarea>
          </form-field>
        </div>
      </div>
    </form>
  </div>
</app-card>
