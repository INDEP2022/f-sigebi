<app-card [header]="true">
  <div header>
    <div class="ch-content">
      <h5 class="title">Reporte exposici&oacute;n a venta</h5>
    </div>
  </div>
  <div body>
    <div class="row">
      <div class="ch-content">
        <h5 class="title">B&uacute;squeda por bien&#58;</h5>
      </div>
    </div>
    <form class="form-material" [formGroup]="form2">
      <div class="row">
        <div class="col-md-3 d-flex">
          <form-radio label="No. Bien">
            <input
              type="radio"
              (input)="onInputChange()"
              formControlName="filterGoods"
              value="1" />
          </form-radio>
          <form-radio label="Archivo txt">
            <input
              type="radio"
              (input)="onInputChange()"
              formControlName="filterGoods"
              value="0" />
          </form-radio>
        </div>
        <div class="col-md-4" *ngIf="txtSearch">
          <label
            for=""
            style="font-size: 10px; font-weight: 600; color: #74788d"
            >Archivo (txt)</label
          >
          <form-field [control]="form2.get('filterText')">
            <input
              type="file"
              accept=".txt"
              formControlName="filterText"
              (change)="chargeFile($event)" />
          </form-field>
        </div>
        <div class="col-md-2 mt-5" *ngIf="txtSearch">
          <div class="justify-content-center">
            <button
              type="button"
              (click)="reporGood()"
              class="btn btn-primary btn-sm active"
              [disabled]="validTxt">
              Buscar Bienes <i class="bx bx-search-alt bx-sm float-icon"></i>
            </button>
          </div>
        </div>
      </div>
    </form>

    <div class="row" *ngIf="goodSearch">
      <form class="form-material" [formGroup]="form3">
        <div class="ch-content">
          <h5 class="title">Filtros de B&uacute;squeda</h5>
        </div>

        <div class="row pt-5">
          <div class="col-md-4">
            <form-field [control]="form3.get('typeGood')">
              <ngx-select
                [form]="form3"
                control="typeGood"
                (fetchItems)="getTypeGood($event)"
                label="Tipo Bien"
                [data]="typeGood"
                bindLabel="numDesc"
                [searchOnInit]="true"
                value="typeNumber"
                (change)="changeTypeGood($event)">
              </ngx-select>
            </form-field>
          </div>
        </div>
      </form>

      <form class="form-material" [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="row pt-4">
          <div class="col-md-4">
            <form-field [control]="form.get('subtype')">
              <ngx-select
                [form]="form"
                control="subtype"
                (fetchItems)="getSubTypeGood($event)"
                label="Sub Tipo"
                [data]="subType"
                bindLabel="numSubDesc"
                value="subTypeNumber"
                (change)="changeSubTypeGood($event)">
              </ngx-select>
            </form-field>
          </div>
          <div class="col-md-4">
            <form-field [control]="form.get('delegation')">
              <ngx-select
                [form]="form"
                control="delegation"
                (fetchItems)="getDelegation($event)"
                label="Delegaci&oacute;n Regional"
                [data]="delegation"
                bindLabel="idDescription"
                [searchOnInit]="true"
                value="id"
                (change)="changeDelegation($event)">
              </ngx-select>
            </form-field>
          </div>
          <div class="col-md-4">
            <form-field [control]="form.get('status')">
              <ngx-select
                [form]="form"
                control="status"
                (fetchItems)="getStatusGood($event)"
                label="Estatus"
                [data]="state"
                bindLabel="statusDescription"
                [searchOnInit]="true"
                value="status"
                (change)="changeStatusGood($event)">
              </ngx-select>
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-12 d-flex justify-content-center">
            <div>
              <button
                type="button"
                class="btn btn-primary btn-sm active mr-3"
                [disabled]="!form3.valid"
                (click)="reportNoAttempt()">
                Reporte Ning&uacute;n Intento
              </button>
              <button
                type="button"
                class="btn btn-primary btn-sm active mr-3"
                (click)="reporTwoMonths()"
                [disabled]="!form3.valid">
                Reporte 2 Meses
              </button>
              <button
                class="btn btn-danger btn-sm active mr-3"
                [disabled]="!form3.valid">
                Limpiar <i class="fas fa-eraser"></i>
              </button>
              <button
                type="button"
                class="btn btn-primary btn-sm active"
                [disabled]="!form.valid"
                (click)="consult()">
                Consultar <i class="bx bx-search-alt bx-sm float-icon"></i>
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div *ngIf="showGood" class="pt-5">
      <div class="row">
        <div class="ch-content">
          <h5 class="title">
            Bienes que no han sido expuestos a evento comercial
          </h5>
        </div>
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <app-columns-select
            [(settings)]="settings7"
            [leftList]="true"></app-columns-select>
          <div>
            <button
              class="btn btn-sm btn-success active mr-3"
              [disabled]="!validate3"
              (click)="onExportExcelGood()">
              Exportar
              <i class="bx bx-download float-icon"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered table-responsive'"
              [settings]="settings7"
              [source]="data7"
              (userRowSelect)="rowsSelected($event)">
            </ng2-smart-table>
          </div>
        </div>
        <app-pagination
          [params]="params7"
          [totalItems]="totalItems7"></app-pagination>
      </div>
      <!--<div class="row pt-5">
        <div class="col-md-3">
          <label>Total de bienes encontrados</label>
        </div>
        <div class="col-md-2">
          <form
            class="form-material"
            [formGroup]="form"
            (ngSubmit)="onSubmit()">
            <form-field [control]="form.get('totalAssets')">
              <input
                type="text"
                class="form-control"
                formControlName="totalAssets" />
            </form-field>
          </form>
        </div>
      </div>-->
    </div>

    <div *ngIf="show" class="pt-5">
      <div class="row">
        <div class="ch-content">
          <h5 class="title">
            Bienes que no han sido expuestos a evento comercial
          </h5>
        </div>
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <app-columns-select
            [(settings)]="settings"
            [leftList]="true"></app-columns-select>
          <div>
            <button
              class="btn btn-sm btn-success active mr-3"
              [disabled]="!validate"
              (click)="onExportExcel()">
              Exportar
              <i class="bx bx-download float-icon"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered table-responsive'"
              [settings]="settings"
              [source]="data"
              (userRowSelect)="rowsSelected($event)">
            </ng2-smart-table>
          </div>
        </div>
        <app-pagination
          [params]="params"
          [totalItems]="totalItems"></app-pagination>
      </div>
      <!--<div class="row pt-5">
        <div class="col-md-3">
          <label>Total de bienes encontrados</label>
        </div>
        <div class="col-md-2">
          <form
            class="form-material"
            [formGroup]="form"
            (ngSubmit)="onSubmit()">
            <form-field [control]="form.get('totalAssets')">
              <input
                type="text"
                class="form-control"
                formControlName="totalAssets" />
            </form-field>
          </form>
        </div>
      </div>-->
    </div>

    <div *ngIf="showMonth" class="pt-5">
      <div class="row">
        <div class="ch-content">
          <h5 class="title">
            Bienes que no han sido expuestos a evento comercial
          </h5>
        </div>
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <app-columns-select
            [(settings)]="settings1"
            [leftList]="true"></app-columns-select>
          <div>
            <button
              class="btn btn-sm btn-success active mr-3"
              [disabled]="!validate1"
              (click)="onExportExcelMonth()">
              Exportar
              <i class="bx bx-download float-icon"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered table-responsive'"
              [settings]="settings1"
              [source]="data1"
              (userRowSelect)="rowsSelected1($event)">
            </ng2-smart-table>
          </div>
        </div>
        <app-pagination
          [params]="params1"
          [totalItems]="totalItems1"></app-pagination>
      </div>
      <!--<div class="row pt-5">
        <div class="col-md-3">
          <label>Total de bienes encontrados</label>
        </div>
        <div class="col-md-2">
          <form
            class="form-material"
            [formGroup]="form"
            (ngSubmit)="onSubmit()">
            <form-field [control]="form.get('totalAssets')">
              <input
                type="text"
                class="form-control"
                formControlName="totalAssets" />
            </form-field>
          </form>
        </div>
      </div>-->
    </div>

    <div *ngIf="showConsult" class="pt-5">
      <div class="row">
        <div class="ch-content">
          <h5 class="title">
            Bienes que no han sido expuestos a evento comercial
          </h5>
        </div>
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <app-columns-select
            [(settings)]="settings5"
            [leftList]="true"></app-columns-select>
          <div>
            <button
              class="btn btn-sm btn-success active mr-3"
              [disabled]="!validate2"
              (click)="onExportExcelConsult()">
              Exportar
              <i class="bx bx-download float-icon"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered table-responsive'"
              [settings]="settings5"
              [source]="data5"
              (userRowSelect)="rowsSelected1($event)">
            </ng2-smart-table>
          </div>
        </div>
        <app-pagination
          [params]="params5"
          [totalItems]="totalItems5"></app-pagination>
      </div>
      <!--<div class="row pt-5">
        <div class="col-md-3">
          <label>Total de bienes encontrados</label>
        </div>
        <div class="col-md-2">
          <form
            class="form-material"
            [formGroup]="form"
            (ngSubmit)="onSubmit()">
            <form-field [control]="form.get('totalAssets')">
              <input
                type="text"
                class="form-control"
                formControlName="totalAssets" />
            </form-field>
          </form>
        </div>
      </div>-->
    </div>
  </div>
</app-card>
