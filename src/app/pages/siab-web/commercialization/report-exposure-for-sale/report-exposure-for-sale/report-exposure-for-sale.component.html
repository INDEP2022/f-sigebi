<app-card [header]="true">
  <div header>
    <div class="ch-content">
      <h5 class="title">Reporte exposici&oacute;n a venta</h5>
    </div>
  </div>
  <div body>
    <form class="form-material" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="ch-content">
          <h5 class="title">B&uacute;squeda por bien&#58;</h5>
        </div>
        <div class="row">
          <div class="col-md-3 d-flex">
            <form-radio label="No. Bien">
              <input
                type="radio"
                (input)="onInputChange()"
                formControlName="filterGoods"
                value="1" />
            </form-radio>
            <form-radio label="Archivo txt">
              <input
                type="radio"
                (input)="onInputChange()"
                formControlName="filterGoods"
                value="0" />
            </form-radio>
          </div>
          <!--<div class="col-md-2">
            <form-check label="Por bien" for="label1">
              <input
                id="label1"
                type="checkbox"
                formControlName="filterGoods" />
            </form-check>
          </div>
          <div class="col-md-2">
            <form-check label="Con archivo de texto" for="label2">
              <input id="label2" type="checkbox" formControlName="filterText" />
            </form-check>
          </div>-->
          <div class="col-md-4" *ngIf="txtSearch">
            <label
              for=""
              style="font-size: 10px; font-weight: 600; color: #74788d"
              >Archivo (txt)</label
            >
            <form-field [control]="form.get('filterText')">
              <input
                type="file"
                accept="txt"
                formControlName="filterText"
                (change)="chargeFile($event)" />
            </form-field>
          </div>
          <div class="col-md-2 mt-5" *ngIf="txtSearch">
            <div class="justify-content-center">
              <button
                type="button"
                class="btn btn-primary btn-sm active"
                [disabled]="validTxt"
                (click)="show = !show">
                Buscar bienes
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="goodSearch">
        <div class="ch-content">
          <h5 class="title">Filtros de B&uacute;squeda</h5>
        </div>
        <div class="row pt-3">
          <div class="col-md-3">
            <form-field [control]="form.get('typeGood')">
              <ngx-select
                [form]="form"
                control="typeGood"
                (fetchItems)="getTypeGood($event)"
                label="Tipo Bien"
                [data]="typeGood"
                bindLabel="nameGoodType"
                [searchOnInit]="true"
                value="id"
                (change)="changeTypeGood($event)">
              </ngx-select>
            </form-field>
            <!--<form-field [control]="form.get('typeGood')" label="Tipo Bien">
              <ng-select
                formControlName="typeGood"
                [searchable]="false"
                class="form-control"
                [clearable]="false">
                <ng-option value="M">Bienes Muebles</ng-option>
                <ng-option value="I">Bienes Inmuebles</ng-option>
              </ng-select>
            </form-field>-->
          </div>
          <div class="col-md-3">
            <form-field [control]="form.get('subtype')">
              <ngx-select
                [form]="form"
                control="subtype"
                (fetchItems)="getSubTypeGood($event)"
                label="Sub Tipo"
                [data]="subType"
                bindLabel="nameSubtypeGood"
                value="id"
                (change)="changeSubTypeGood($event)">
              </ngx-select>
            </form-field>
            <!--<form-field [control]="form.get('subtype')" label="Sub Tipo">
              <input
                type="text"
                class="form-control"
                formControlName="subtype" />
            </form-field>-->
          </div>
          <div class="col-md-3">
            <form-field [control]="form.get('delegation')">
              <ngx-select
                [form]="form"
                control="delegation"
                (fetchItems)="getDelegation($event)"
                label="Delegaci&oacute;n Regional"
                [data]="delegation"
                bindLabel="description"
                [searchOnInit]="true"
                value="id"
                (change)="changeDelegation($event)">
              </ngx-select>
            </form-field>
            <!--<form-field
              [control]="form.get('delegation')"
              label="Delegaci&oacute;n Regional">
              <input
                type="text"
                class="form-control"
                formControlName="delegation" />
            </form-field>-->
          </div>
          <div class="col-md-3">
            <form-field [control]="form.get('status')">
              <ngx-select
                [form]="form"
                control="status"
                (fetchItems)="getStatusGood($event)"
                label="Estatus"
                [data]="state"
                bindLabel="description"
                [searchOnInit]="true"
                value="status"
                (change)="changeStatusGood($event)">
              </ngx-select>
            </form-field>
            <!--<form-field [control]="form.get('status')" label="Estatus">
              <input
                type="text"
                class="form-control"
                formControlName="status" />
            </form-field>-->
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-12 d-flex justify-content-center">
            <div>
              <button
                type="button"
                class="btn btn-primary btn-sm active mr-3"
                [disabled]="!form.valid"
                (click)="reportNoAttempt()">
                Reporte Ning&uacute;n Intento
              </button>

              <button
                type="button"
                class="btn btn-primary btn-sm active mr-3"
                (click)="reporTwoMonths()"
                [disabled]="!form.valid">
                Reporte 2 Meses
              </button>

              <button
                class="btn btn-danger btn-sm active mr-3"
                [disabled]="!form.valid">
                Limpiar <i class="fas fa-eraser"></i>
              </button>

              <button
                type="button"
                class="btn btn-primary btn-sm active"
                [disabled]="!form.valid"
                (click)="consult()">
                Consultar
              </button>
            </div>
          </div>
        </div>
      </div>
    </form>
    <div *ngIf="show" class="pt-5">
      <div class="row">
        <div class="ch-content">
          <h5 class="title">
            Bienes que no han sido expuestos a evento comercial
          </h5>
        </div>
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <app-columns-select
            [(settings)]="settings"
            [leftList]="true"></app-columns-select>
        </div>
      </div>
      <div class="table-responsive">
        <ng2-smart-table
          [settings]="settings"
          [source]="data"></ng2-smart-table>
      </div>
      <div class="row pt-5">
        <div class="col-md-3">
          <label>Total de bienes encontrados</label>
        </div>
        <div class="col-md-2">
          <form
            class="form-material"
            [formGroup]="form"
            (ngSubmit)="onSubmit()">
            <form-field [control]="form.get('totalAssets')">
              <input
                type="text"
                class="form-control"
                formControlName="totalAssets" />
            </form-field>
          </form>
        </div>
      </div>
    </div>
  </div>
</app-card>
