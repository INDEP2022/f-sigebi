<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Lista de bienes</h5>
  </div>
  <div body>
    <!-- <h5 class="title">
          <strong>Busqueda de Documentos de {{ title }}</strong>
        </h5> -->
    <p>
      <a
        class="text-color"
        (click)="showSearchForm = true"
        *ngIf="!showSearchForm">
        <i class="fa fa-angle-right" aria-hidden="true"></i>
        <strong> B&uacute;squeda de Bienes</strong></a
      >
    </p>

    <p>
      <a
        class="text-color"
        (click)="showSearchForm = false"
        *ngIf="showSearchForm">
        <i class="fa fa-angle-down" aria-hidden="true"></i>
        <strong> B&uacute;squeda de Bienes</strong></a
      >
    </p>

    <div *ngIf="showSearchForm">
      <form [formGroup]="form" class="form-material">
        <div class="row pt-5">
          <div class="col-md-4">
            <form-field [control]="form.get('goodId')" label="No. Bien">
              <input
                type="text"
                class="form-control"
                maxlength="100"
                formControlName="goodId" />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="form.get('inventoryNum')"
              label="No. Inventario">
              <input
                type="text"
                class="form-control"
                maxlength="50"
                formControlName="inventoryNum" />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="form.get('goodDescription')"
              label="Descripción del Bien">
              <input
                type="text"
                class="form-control"
                maxlength="100"
                formControlName="goodDescription" />
            </form-field>
          </div>
        </div>

        <div class="row pt-5">
          <div class="col-md-4">
            <form-field [control]="form.get('typeRelevantId')">
              <ngx-select
                [form]="form"
                control="typeRelevantId"
                [data]="typeRelevant"
                value="id"
                bindLabel="description"
                label="Tipo Relevante"
                (fetchItems)="getTypeRelevantSelect($event)"></ngx-select>
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="form.get('solicitudId')"
              label="No. Solicitud">
              <input
                type="text"
                class="form-control"
                maxlength="50"
                formControlName="solicitudId" />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field [control]="form.get('statusGood')" label="Estatus Bien">
              <input
                type="text"
                class="form-control"
                maxlength="100"
                formControlName="statusGood" />
            </form-field>
          </div>
        </div>

        <div class="row pt-5">
          <div class="col-md-4">
            <form-field [control]="form.get('uniqueKey')" label="Clave Única">
              <input
                type="text"
                class="form-control"
                maxlength="100"
                formControlName="uniqueKey" />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field [control]="form.get('fileNum')" label="No. Expediente">
              <input
                type="text"
                class="form-control"
                maxlength="50"
                formControlName="fileNum" />
            </form-field>
          </div>

          <div class="col-md-4">
            <!--
              <form-field
                [control]="form.get('unitMeasurement')"
                label="Unidad de Medida">
                <input
                  type="text"
                  class="form-control"
                  maxlength="100"
                  formControlName="unitMeasurement" />
              </form-field>
            -->

            <form-field [control]="form.get('unitMeasurement')">
              <ngx-select
                [form]="form"
                control="unitMeasurement"
                [showTooltip]="true"
                [data]="measureUnits"
                value="measureTlUnit"
                bindLabel="measureTlUnit"
                label="Unidad de Medida"
                (fetchItems)="getUnitMeasure($event)"></ngx-select>
            </form-field>
          </div>
        </div>

        <div class="row pt-5">
          <div class="col-md-4">
            <form-field [control]="form.get('physicalStatus')">
              <ngx-select
                [form]="form"
                control="physicalStatus"
                [showTooltip]="true"
                [data]="physicalStatusData"
                value="name"
                bindLabel="name"
                label="Estado Físico"></ngx-select>
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field [control]="form.get('conservationStatus')">
              <ngx-select
                [form]="form"
                control="conservationStatus"
                [showTooltip]="true"
                [data]="conservationStatus"
                value="name"
                bindLabel="name"
                label="Estado de Conservación"></ngx-select>
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field [control]="form.get('transferId')">
              <ngx-select
                [form]="form"
                control="transferId"
                [showTooltip]="true"
                [data]="transferences"
                value="id"
                bindLabel="nameAndId"
                label="Transferente"
                (fetchItems)="getTransferentSelect($event)"></ngx-select>
            </form-field>
          </div>
        </div>
      </form>

      <div class="row">
        <div class="d-flex justify-content-end">
          <div class="mr-auto p-2"></div>
          <div class="p-2">
            <button
              (click)="search()"
              class="btn btn-primary active btn-sm"
              style="height: 36px">
              Buscar <i class="bx bx-search-alt-2"></i>
            </button>
          </div>
          <div class="p-2">
            <button (click)="cleanForm()" class="btn btn-danger active btn-sm">
              Limpiar <i class="fas fa-eraser"> </i>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="row pt-4">
      <div class="justify-content-start btn-toolbar pt-4">
        <app-columns-select [(settings)]="settings"></app-columns-select>
      </div>
      <div [class]="loading ? 'table-loading' : ''">
        <ng2-smart-table
          [attr.class]="'table-responsive pt-3'"
          [settings]="settings"
          [source]="paragraphs">
        </ng2-smart-table>
      </div>

      <app-pagination
        [params]="params"
        [totalItems]="totalItems"></app-pagination>
    </div>
  </div>
</app-card>
