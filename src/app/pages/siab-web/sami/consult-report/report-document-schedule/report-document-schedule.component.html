<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Documentos Programaci贸n</h5>
  </div>
  <div body>
    <div class="row">
      <!-- <h5 class="title">
          <strong>Busqueda de Documentos de {{ title }}</strong>
        </h5> -->
      <p>
        <a
          class="text-color"
          (click)="showSearchForm = true"
          *ngIf="!showSearchForm">
          <i class="fa fa-angle-right" aria-hidden="true"></i>
          <strong> B&uacute;squeda de Documentos de Programaci贸n</strong></a
        >
      </p>

      <p>
        <a
          class="text-color"
          (click)="showSearchForm = false"
          *ngIf="showSearchForm">
          <i class="fa fa-angle-down" aria-hidden="true"></i>
          <strong> B&uacute;squeda de Documentos de Programaci贸n</strong></a
        >
      </p>
    </div>

    <div *ngIf="showSearchForm">
      <form [formGroup]="docRequestForm" class="form-material">
        <div class="row pt-2">
          <div class="col-md-6">
            <form-field [control]="docRequestForm.get('text')" label="Texto">
              <textarea
                class="form-control"
                type="text"
                row
                pt-5s="2"
                maxlength="30"
                formControlName="text"></textarea>
            </form-field>
          </div>
          <div class="col-md-6">
            <div
              [formGroup]="docRequestForm"
              class="form-group form-secondary form-static-label">
              <ng-select
                class="form-control"
                formControlName="docType"
                [clearable]="false"
                [items]="typesDocuments"
                [virtualScroll]="true"
                [loading]="loading"
                bindLabel="ddescription"
                bindValue="ddescription">
                <ng-template ng-option-tmp let-item="item" let-index="index">
                  <div [title]="item.ddescription">
                    {{ item.ddescription }}
                  </div>
                </ng-template>
              </ng-select>
              <span class="form-bar"></span>
              <label class="float-label">Tipo de Documento</label>
            </div>
            <!-- <ngx-select
                [form]="docRequestForm"
                control="docType"
                (fetchItems)="getDocType($event)"
                [data]="selectDocType"
                label="Tipo de Documento"
                bindLabel="ddescription"
                value="ddescription">
              </ngx-select> -->
          </div>
        </div>
        <div class="row pt-4">
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('docTitle')"
              label="T&iacute;tulo del Documento">
              <input
                type="text"
                class="form-control"
                maxlength="150"
                formControlName="docTitle" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('dDocName')"
              label="Nombre del Documento">
              <input
                type="text"
                class="form-control"
                maxlength="100"
                formControlName="dDocName" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('typeTrasf')"
              label="Tipo de Transferencia">
              <input
                type="text"
                class="form-control"
                maxlength="70"
                formControlName="typeTrasf" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('contributor')"
              label="Contribuyente">
              <input
                type="text"
                class="form-control"
                maxlength="70"
                formControlName="contributor" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-3">
            <form-field [control]="docRequestForm.get('author')" label="Autor">
              <input
                type="text"
                class="form-control"
                maxlength="70"
                formControlName="author" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('sender')"
              label="Remitente">
              <input
                type="text"
                class="form-control"
                maxlength="70"
                formControlName="sender" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('noOfice')"
              label="No&#46; Oficio">
              <input
                type="text"
                class="form-control"
                maxlength="70"
                formControlName="noOfice" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('senderCharge')"
              label="Cargo Remitente">
              <input
                type="text"
                class="form-control"
                maxlength="70"
                formControlName="senderCharge" />
            </form-field>
          </div>
        </div>
        <div class="row pt-4">
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('noSchedule')"
              label="No&#46; Programaci贸n">
              <input
                type="text"
                class="form-control"
                formControlName="noSchedule" />
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('comment')"
              label="Comentarios">
              <textarea
                class="form-control"
                type="text"
                row
                pt-5s="2"
                maxlength="100"
                formControlName="comment"></textarea>
            </form-field>
          </div>
          <div class="col-md-3">
            <form-field
              [control]="docRequestForm.get('responsible')"
              label="Responsable">
              <input
                type="text"
                class="form-control"
                maxlength="40"
                formControlName="responsible" />
            </form-field>
          </div>
        </div>
        <div class="row">
          <div class="d-flex justify-content-end">
            <div class="p-2">
              <button
                (click)="search()"
                class="btn btn-primary active btn-sm"
                style="height: 36px">
                Buscar <i class="bx bx-search-alt-2"></i>
              </button>
            </div>
            <div class="p-2">
              <button
                (click)="cleanForm()"
                class="btn btn-danger active btn-sm">
                Limpiar <i class="fas fa-eraser"> </i>
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="row pt-4">
      <div class="d-flex">
        <div class="mr-auto p-2"></div>
        <div class="p-2">
          <!--<button
            tooltip="Agregar"
            containerClass="tooltip-style"
            class="btn btn-info btn-sm active"
            (click)="openNewDocument()">
            Nuevo <i class="bx bx-plus bx-sm float-icon"></i>
          </button> -->
        </div>
        <div class="p-2">
          <app-columns-select
            [leftList]="true"
            [(settings)]="settings"></app-columns-select>
        </div>
        <!-- <div class="ml-auto p-2">
            <button
              [disabled]="statusTask == 'FINALIZADA'"
              tooltip="Agregar"
              containerClass="tooltip-style"
              class="btn btn-info btn-sm active"
              (click)="openNewDocument()">
              Nuevo <i class="bx bx-plus bx-sm float-icon"></i>
            </button>
          </div> -->
      </div>
    </div>

    <div class="row pt-2">
      <div class="col-md-12">
        <div class="row" *ngIf="formLoading" style="margin-bottom: 5rem">
          <form-loader *ngIf="formLoading"></form-loader>
        </div>
        <div *ngIf="!formLoading">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered table-responsive'"
              [settings]="settings"
              [source]="docRequest"
              (edit)="openDetail($event.data)"
              (delete)="openDoc($event.data)">
            </ng2-smart-table>
          </div>

          <app-pagination
            [params]="params"
            [totalItems]="totalItems"></app-pagination>
        </div>
      </div>
    </div>
  </div>
</app-card>
