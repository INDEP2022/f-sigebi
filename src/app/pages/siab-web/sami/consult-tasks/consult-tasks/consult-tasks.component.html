<app-card [header]="true">
  <div header>
    <div class="ch-content">
      <h5 class="title">Consulta de Tareas</h5>
    </div>
  </div>
  <div body>
    <accordion [isAnimated]="true">
      <accordion-group [isOpen]="false">
        <div accordion-heading class="d-flex justify-content-between">
          <div>
            <h5>
              <i class="fa fa-filter" aria-hidden="true"></i>
              Mostrar Filtros
            </h5>
          </div>
          <div></div>
        </div>

        <form
          [formGroup]="consultTasksForm"
          class="form-material"
          (ngSubmit)="searchTasks()">
          <div class="row margin-input">
            <div class="col-md-6">
              <form-field
                [control]="consultTasksForm.get('txtTituloTarea')"
                label="T&iacute;tulo Tarea">
                <input
                  type="text"
                  class="form-control"
                  formControlName="txtTituloTarea"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
            <div class="col-md-6">
              <form-field
                [control]="consultTasksForm.get('State')"
                label="Estatus">
                <ng-select class="form-control" formControlName="State">
                  <ng-option value="null">Asignados</ng-option>
                  <ng-option value="FINALIZADA">Finalizados</ng-option>
                  <ng-option value="TODOS">Todos</ng-option>
                </ng-select>
              </form-field>
            </div>
          </div>
          <div class="row margin-input">
            <!-- <div class="col-md-5">
              <form-field [control]="consultTasksForm.get('txtNoProgramacionEntrega')"
                label="No. Programaci&oacute;n Entrega">
                <input type="number" min="0" max="999999999999999" class="form-control"
                  formControlName="txtNoProgramacionEntrega" maxlength="20" (keydown.enter)="onKeydown($event)" />
              </form-field>

            </div> -->
            <!-- <div class="col-md-5">
              <form-field [control]="consultTasksForm.get('txtNombreActividad')" label="Nombre de la Actividad">
                <input type="text" class="form-control" formControlName="txtNombreActividad" maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtNoOrdenServicio')"
                label="No. Orden de Servicio">
                <input
                  type="number"
                  min="0" max="999999999999999"
                  class="form-control"
                  formControlName="txtNoOrdenServicio"
                  placeholder="No Orden de Servicio"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- </div>
          <div class="row margin-input"> -->
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtAsignado')"
                label="Asignado">
                <input
                  type="text"
                  class="form-control"
                  formControlName="txtAsignado"
                  placeholder="Asignado"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtNoOrdenPago')"
                label="No. Orden de Pago">
                <input
                  type="number"
                  min="0" max="999999999999999"
                  class="form-control"
                  formControlName="txtNoOrdenPago"
                  placeholder="No Orden de Pago"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- </div>
          <div class="row margin-input"> -->
            <!-- <div class="col-md-5 pt-5">
              <form-field [control]="consultTasksForm.get('txtAprobador')" label="Aprobador">
                <input type="text" class="form-control" formControlName="txtAprobador" maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtNoOrdenIngreso')"
                label="No. Orden de Ingreso">
                <input
                  type="number"
                  min="0" max="999999999999999"
                  class="form-control"
                  formControlName="txtNoOrdenIngreso"
                  placeholder="No. Orden de Ingreso"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- </div>
          <div class="row margin-input"> -->
            <!-- <div class="col-md-5 pt-5">
              <form-field [control]="consultTasksForm.get('txtNombreAplicacion')"
                label="Nombre de la Aplicaci&oacute;n">
                <input type="text" class="form-control" formControlName="txtNombreAplicacion" maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtNoMuestreo')"
                label="No. Muestreo">
                <input
                  type="number"
                  min="0" max="999999999999999"
                  class="form-control"
                  formControlName="txtNoMuestreo"
                  placeholder="No. de Muestreo"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- </div>
          <div class="row margin-input"> -->
            <div class="col-md-3">
              <form-field
                [control]="consultTasksForm.get('txtFecAsigDesde')"
                label="Fecha de Asignación Desde: "
                style="padding-left: 10px">
                <input
                  class="form-control"
                  formControlName="txtFecAsigDesde"
                  bsDatepicker
                  [bsConfig]="{
                    dateInputFormat: 'YYYY-MM-DD',
                    displayOneMonthRange: true
                  }"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
            <div class="col-md-3">
              <form-field
                [control]="consultTasksForm.get('txtFecAsigHasta')"
                label="Hasta: "
                style="padding-left: 10px">
                <input
                  class="form-control"
                  formControlName="txtFecAsigHasta"
                  bsDatepicker
                  [bsConfig]="{
                    dateInputFormat: 'YYYY-MM-DD',
                    displayOneMonthRange: true
                  }"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtNoMuestreoOrden')"
                label="No. de Muestreo de Orden">
                <input
                  type="number"
                  min="0" max="999999999999999"
                  class="form-control"
                  formControlName="txtNoMuestreoOrden"
                  placeholder="No. de Muestreo de Orden"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <!-- </div>
          <div class="row margin-input"> -->
            <div class="col-md-3">
              <form-field
                [control]="consultTasksForm.get('txtFechaFinDesde')"
                label="Fecha de Finalización Desde:"
                style="padding-left: 10px">
                <input
                  class="form-control"
                  formControlName="txtFechaFinDesde"
                  bsDatepicker
                  [bsConfig]="{
                    dateInputFormat: 'YYYY-MM-DD',
                    displayOneMonthRange: true
                  }"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
            <div class="col-md-3">
              <form-field
                [control]="consultTasksForm.get('txtFechaFinHasta')"
                label="Hasta:"
                style="padding-left: 10px">
                <input
                  class="form-control"
                  formControlName="txtFechaFinHasta"
                  bsDatepicker
                  [bsConfig]="{
                    dateInputFormat: 'YYYY-MM-DD',
                    displayOneMonthRange: true
                  }"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
                <!-- [minDate]="fechaInicio.value" -->
              </form-field>
            </div>
            <div class="col-md-6 pt-5">
              <form-field
                [control]="consultTasksForm.get('typeOfTrasnfer')"
                label="Tipo de Transferencia">
                <ng-select
                  class="form-control"
                  formControlName="typeOfTrasnfer">
                  <ng-option value="MANUAL">VOLUNTARIA</ng-option>
                  <ng-option value="SAT_SAE">SAT</ng-option>
                  <ng-option value="FGR_SAE">FGR</ng-option>
                </ng-select>
              </form-field>
            </div>
            <div class="col-md-6 pt-5">
              <form-field
                [control]="consultTasksForm.get('txtNoDelegacionRegional')"
                label="No. de Delegación Regional">
                <input
                  type="number"
                  min="0"
                  max="999999999999999"
                  class="form-control"
                  formControlName="txtNoDelegacionRegional"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
            <!-- </div>
          <div class="row margin-input"> -->
            <!-- <div class="col-md-5">
              <form-field
                [control]="consultTasksForm.get('txtNoSolicitud')"
                label="No. Solicitud">
                <input
                  type="number"
                  min="0" max="999999999999999"
                  class="form-control"
                  formControlName="txtNoSolicitud"
                  placeholder="No. de Solicitud"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div> -->
            <div class="col-md-6 pt-5">
              <form-field
                [control]="consultTasksForm.get('txtNoTransferente')"
                label="No. Transferente">
                <input
                  type="number"
                  min="0"
                  max="999999999999999"
                  class="form-control"
                  formControlName="txtNoTransferente"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
            <!-- </div>
          <div class="row margin-input"> -->
            <div class="col-md-6 pt-5">
              <form-field
                [control]="consultTasksForm.get('txtNoProgramacion')"
                label="No. de Programaci&oacute;n">
                <input
                  type="number"
                  min="0"
                  max="999999999999999"
                  class="form-control"
                  formControlName="txtNoProgramacion"
                  maxlength="20"
                  (keydown.enter)="onKeydown($event)" />
              </form-field>
            </div>
          </div>
          <div class="row d-flex justify-content-center">
            <div class="col-md-auto pt-5">
              <button
                type="button"
                class="btn btn-sm btn-primary active"
                (click)="searchTasks()"
                (keydown.enter)="onKeydown($event)">
                Buscar
              </button>
            </div>
            <div class="col-md-auto pt-5">
              <button
                type="button"
                class="btn btn-sm btn-success active"
                (click)="exportToExcel()">
                Exportar a Excel
              </button>
            </div>
            <div class="col-md-auto pt-5">
              <button
                type="button"
                class="btn btn-sm btn-secondary active"
                (click)="cleanFilter()">
                Limpiar Filtro
              </button>
            </div>
          </div>
        </form>
      </accordion-group>
    </accordion>

    <div class="row pt-4">
      <div class="col-md-12">
        <div [class]="loading ? 'table-loading' : ''">
          <ng2-smart-table
            [attr.class]="'table-responsive table-bordered'"
            [settings]="settings"
            [source]="tasks"
            (rowSelect)="openTask($event.data)">
          </ng2-smart-table>
        </div>
      </div>
    </div>
    <app-pagination
      [params]="params"
      [totalItems]="totalItems"></app-pagination>

    <!-- <div class="row margin-input">
      <div class="col-md-2">
        <button type="button" class="btn btn-danger active">Cerrar</button>
      </div>
    </div> -->
  </div>
</app-card>
