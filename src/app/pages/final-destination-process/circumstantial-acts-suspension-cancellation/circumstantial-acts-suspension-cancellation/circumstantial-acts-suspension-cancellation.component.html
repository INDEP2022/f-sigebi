<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">{{ title }}</h5>
  </div>

  <div body>
    <div class="row" *ngIf="queryParams.origin">
      <div class="col-md-12">
        <button class="btn btn-primary active btn-sm" (click)="goBack()">
          Regresar
          <i class="fas fa-arrow-circle-left"></i>
        </button>
      </div>
    </div>
    <form class="form-material" [formGroup]="formBlkExpedient">
      <div class="row mb-5">
        <form-field
          [control]="formBlkExpedient.get('noExpedient')"
          class="col-md-3"
          label="Expediente">
          <input
            type="text"
            [readOnly]="canNew"
            class="form-control"
            formControlName="noExpedient" />
        </form-field>
        <div class="col">
          <button
            type="button"
            class="btn btn-primary active btn-sm mr-3"
            containerClass="tooltip-style"
            tooltip="Buscar"
            (click)="search()">
            <i class="bx bx-search-alt bx-sm float-icon"></i>
          </button>
          <button
            type="button"
            class="btn btn-primary btn-sm active mr-3"
            containerClass="tooltip-style"
            (click)="listAllExpedients()"
            tooltip="Lista general de expedientes">
            <i class="bx bx-list-plus bx-sm float-icon"></i>
          </button>
          <button
            type="button"
            class="btn btn-primary btn-sm active mr-3"
            containerClass="tooltip-style"
            (click)="listProceedingByExpedient()"
            tooltip="Lista general de actas">
            <i class="bx bx-list-plus bx-sm float-icon"></i>
          </button>
          <button
            *ngIf="canNew"
            (click)="clearAll()"
            class="btn btn-danger btn-sm active mr-3">
            Limpiar <i class="fas fa-eraser"> </i>
          </button>
          <button
            *ngIf="canNew && !canSave"
            type="button"
            tooltip="Nuevo"
            (click)="newProceeding()"
            containerClass="tooltip-style"
            class="btn btn-info btn-sm active">
            Nuevo <i class="bx bx-plus bx-sm float-icon"></i>
          </button>
          <button
            *ngIf="canSave"
            type="button"
            (click)="saveNewProceeding()"
            class="btn btn-primary btn-sm active mr-3">
            Guardar
            <i aria-hidden="true" class="fa fa-save"></i>
          </button>
          <button *ngIf="canSave" class="btn btn-danger btn-sm active">
            Cancelar
          </button>
        </div>
      </div>
      <div class="row">
        <form-field
          [control]="formBlkExpedient.get('averiguacionPrevia')"
          class="col"
          label="Averiguaci&oacute;n Previa">
          <input
            type="text"
            class="form-control"
            formControlName="averiguacionPrevia" />
        </form-field>
        <form-field
          [control]="formBlkExpedient.get('causePenal')"
          class="col"
          label="Causa Penal">
          <input
            type="text"
            class="form-control"
            formControlName="causePenal" />
        </form-field>
      </div>
    </form>
    <form class="form-material" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row mt-4">
        <div class="col-md-2">
          <form-field [control]="form.get('actSelect')" label="&Aacute;cta">
            <ng-select
              class="form-control"
              formControlName="actSelect"
              [class]="form.get('statusAct').value != null ? 'disabled' : ''">
              <ng-option [value]="'C/DON'">C/DON</ng-option>
              <ng-option [value]="'S/DON'">S/DON</ng-option>
              <ng-option [value]="'C/DEV'">C/DEV</ng-option>
              <ng-option [value]="'S/DEV'">S/DEV</ng-option>
              <ng-option [value]="'C/DES'">C/DES</ng-option>
              <ng-option [value]="'C/DES'">S/DES</ng-option>
              <ng-option [value]="'S/VEN'">S/VEN</ng-option>
              <ng-option [value]="'C/VNR'">C/VNR</ng-option>
            </ng-select>
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('authority')" label="">
            <ngx-select
              [data]="dataAuthority"
              [form]="form"
              [class]="form.get('statusAct').value != null ? 'disabled' : ''"
              [searchable]="false"
              bindLabel="transferKey"
              label="Autoridad"
              control="authority">
            </ngx-select>
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('ident')">
            <ngx-select
              [data]="dataIdent"
              [form]="form"
              [class]="form.get('statusAct').value != null ? 'disabled' : ''"
              [searchable]="false"
              label="Ident"
              control="ident">
            </ngx-select>
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('receive')">
            <ngx-select
              [data]="dataDelegation"
              [form]="form"
              [class]="form.get('statusAct').value != null ? 'disabled' : ''"
              [searchable]="false"
              bindLabel="delegation"
              label="Recibe"
              control="receive">
            </ngx-select>
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('admin')">
            <ngx-select
              [data]="dataDelegation"
              [form]="form"
              [class]="form.get('statusAct').value != null ? 'disabled' : ''"
              [searchable]="false"
              bindLabel="delegation"
              label="Admin"
              control="admin">
            </ngx-select>
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('folio')" label="Folio">
            <input
              type="text"
              class="form-control"
              formControlName="folio"
              [readOnly]="form.get('statusAct').value != null" />
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('year')" label="AÃ±o">
            <input
              type="text"
              class="form-control"
              readonly
              formControlName="year" />
          </form-field>
        </div>
        <div class="col">
          <form-field [control]="form.get('month')" label="Mes">
            <input
              type="text"
              class="form-control"
              readonly
              formControlName="month" />
          </form-field>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-3">
          <form-field [control]="form.get('elabDate')" label="Fecha Elab.">
            <input
              (ngModelChange)="validElaborationDate()"
              type="text"
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              bsDatepicker
              [maxDate]="maxDate"
              [bsConfig]="{
                dateInputFormat: 'DD/MM/YYYY hh:mm',
                displayOneMonthRange: true,
                withTimepicker: true
              }"
              formControlName="elabDate" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('closingDate')" label="Fecha Cierre">
            <input
              type="text"
              [class]="'disabled'"
              class="form-control"
              bsDatepicker
              formControlName="closingDate" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('captureDate')" label="Fecha Captura">
            <input
              type="text"
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              bsDatepicker
              formControlName="captureDate" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('statusAct')" label="Estatus Acta">
            <input
              type="text"
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              formControlName="statusAct"
              readonly />
          </form-field>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-6">
          <form-field [control]="form.get('act')" label="&Aacute;cta">
            <input
              type="text"
              class="form-control"
              formControlName="act"
              readonly />
          </form-field>
        </div>
        <div class="col-md-6">
          <form-field [control]="form.get('address')" label="Direcci&oacute;n">
            <input
              type="text"
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              formControlName="address" />
          </form-field>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12 col-md-6">
          <form-field
            [control]="form.get('observations')"
            label="Observaciones">
            <textarea
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              formControlName="observations"></textarea>
          </form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <form-field
            [control]="form.get('autorithyCS')"
            label="Autoridad Cancela/Suspende">
            <input
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              type="text"
              class="form-control"
              formControlName="autorithyCS" />
          </form-field>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12 col-md-6">
          <form-field [control]="form.get('elaboration')" label="Elabora C/S">
            <input
              type="text"
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              formControlName="elaboration" />
          </form-field>
        </div>
        <div class="col-md-6">
          <form-field
            [control]="form.get('witnessContr')"
            label="Testigo de la Contr.">
            <input
              type="text"
              [class]="
                ['CERRADO', 'CERRADA'].includes(form.get('statusAct').value)
                  ? 'disabled'
                  : ''
              "
              class="form-control"
              formControlName="witnessContr" />
          </form-field>
        </div>
      </div>
      <div class="row mt-4">
        <app-scan-file-shared
          [form]="form"
          [formControlName]="'universalFolio'"
          [nameActa]="'act'"
          [cveDocument]="form.get('act').value"
          [noExpedient]="expediente"
          [actaSC]="true"
          [statusProceeding]="form.get('statusAct').value"
          [cveScreen]="'FACTCIRCUN_0001'"
          [reportPrint]="'RGERGENSOLICDIGIT'">
        </app-scan-file-shared>
      </div>
      <div class="row text-center">
        <div class="col">
          <button
            class="btn btn-primary btn-sm active mr-3"
            (click)="actButton()">
            {{ textButtonAct }}
          </button>
          <button
            (click)="addGood()"
            type="button"
            tooltip="Agregar"
            containerClass="tooltip-style"
            class="btn btn-info btn-sm active mr-3">
            Agregar Bienes <i class="bx bx-plus bx-sm float-icon"></i>
          </button>
          <button [disabled]="deleteAct" class="btn btn-red btn-sm active">
            Eliminar Acta <i class="fa fa-trash" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </form>
    <div class="d-flex justify-content-end mt-5">
      <app-columns-select
        [(settings)]="settings1"
        class="row justify-content-end">
      </app-columns-select>
    </div>
    <div class="row mt-5 scroll-table">
      <div class="row pt-4 table-container">
        <div class="col-md-12 table-responsive">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              (userRowSelect)="selectRow($event.data)"
              class="col-md-12"
              [attr.class]="'table-bordered'"
              [settings]="settings1"
              [source]="data1">
            </ng2-smart-table>
          </div>
        </div>
      </div>
    </div>
    <app-pagination [params]="params" [totalItems]="totalItems">
    </app-pagination>
    <div class="row">
      <div class="d-flex align-items-center">
        <div class="col-6 align-items-center">
          <div class="mt-5">
            <form
              class="form-material form-horizontal"
              [formGroup]="formTable1"
              (ngSubmit)="onSubmit()">
              <div
                class="row mt-5 justify-content-start justify-content-sm-end">
                <div class="mb-3 pl-4 pr-4">
                  <form-field [control]="formTable1.get('detail')">
                    <input
                      type="text"
                      class="form-control"
                      formControlName="detail"
                      readonly />
                  </form-field>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="col-6 align-items-center">
          <div class="row">
            <div class="col-6">
              <span class="text-success mr-5"
                ><i class="fa fa-square"></i> Disponibles</span
              >
            </div>
            <div class="col-6">
              <span class="text-back"
                ><i class="fa fa-square"></i> No disponibles</span
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12 text-center mt-3 mb-4">
      <button
        class="btn btn-secondary btn-sm active m-3 p-1 pointer"
        type="button"
        (click)="addSelect()"
        data-toggle="tooltip"
        [title]="'Agregar'">
        <i class="bx bx-chevron-down bx-md"></i>
      </button>
      <button
        class="btn btn-secondary btn-sm active m-3 p-1 pointer"
        type="button"
        data-toggle="tooltip"
        [title]="'Eliminar'"
        (click)="removeSelect()">
        <!-- Quitar uno -->
        <i class="bx bx-chevron-up bx-md"></i>
      </button>
    </div>

    <div class="row mt-5 justify-content-end mt-3">
      <div class="col-md-5 buttons pt-3 text-right">
        <app-columns-select [settings]="settings2"> </app-columns-select>
      </div>
    </div>

    <div class="row mt-5 scroll-table">
      <ng2-smart-table
        (userRowSelect)="selectRow2($event.data)"
        class="col-md-12"
        [attr.class]="'table-bordered'"
        [settings]="settings2"
        [source]="data2">
      </ng2-smart-table>
    </div>
    <app-pagination [params]="params2" [totalItems]="totalItems2">
    </app-pagination>
    <div class="row">
      <div class="d-flex align-items-center">
        <div class="col-6 align-items-center">
          <div class="mt-5">
            <form
              class="form-material form-horizontal"
              [formGroup]="formTable2"
              (ngSubmit)="onSubmit()">
              <div
                class="row mt-5 justify-content-start justify-content-sm-end">
                <div class="mb-3 pl-4 pr-4">
                  <form-field [control]="formTable2.get('detail')">
                    <input
                      type="text"
                      class="form-control"
                      formControlName="detail"
                      readonly />
                  </form-field>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="col-6">
          <h5
            class="text-right"
            [class]="
              status_time == 'EN TIEMPO' ? 'text-success' : 'text-danger'
            ">
            {{ status_time }}
          </h5>
        </div>
      </div>
    </div>

    <!--  <form
          class="form-material form-horizontal"
          [formGroup]="formTag"
          (ngSubmit)="onSubmit()">
          <div class="row mt-5">
            <div class="col-12 col-md-6">
              <div class="mb-3 pl-4 pr-4">
                <form-field
                  [control]="formTag.get('tag')"
                  label="Etiquetas de Raz&oacute;n">
                  <select class="form-control" formControlName="tag">
                    <option [value]="null">Seleccione un valor</option>
                    <option [value]="1">1</option>
                    <option [value]="2">2</option>
                  </select>
                </form-field>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="row">
                <div class="col-6">
                  <button
                    class="btn btn-secondary btn-sm active text-center text-md-right">
                    Valida Bienes
                  </button>
                </div>
                <div class="col-6">
                  <button
                    class="btn btn-success btn-sm active text-center text-md-right">
                    Exportar Datos
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form> -->
  </div>
</app-card>
