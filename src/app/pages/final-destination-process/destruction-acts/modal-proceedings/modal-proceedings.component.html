<app-modal>
  <div header>
    <h5 class="modal-title">LISTA DE ACTAS DE DESTRUCCIÓN</h5>
  </div>
  <div body>
    <form [formGroup]="filterForm" class="form-material">
      <div class="row">
        <form-field
          *ngIf="!selectExpedient"
          [control]="filterForm.get('expedient')"
          label="No.Expediente"
          class="col-md-4">
          <input
            [min]="0"
            type="number"
            [max-length]="10"
            class="form-control"
            formControlName="expedient" />
        </form-field>
        <form-field
          *ngIf="selectExpedient"
          [control]="filterForm.get('expedient')"
          class="col-md-4">
          <ngx-select
            (fetchItems)="getExpedients($event)"
            (change)="onExpedientChange($event)"
            control="expedient"
            label="No.Expediente"
            bindLabel="id"
            value="id"
            [data]="dataExpedients"
            [form]="filterForm"></ngx-select>
        </form-field>
        <form-field
          [control]="filterForm.get('prevAv')"
          label="Averiguación Previa"
          class="col-md-4">
          <input
            type="text"
            class="form-control"
            formControlName="prevAv"
            [readonly]="selectExpedient"
        /></form-field>
        <form-field
          [control]="filterForm.get('criminalCase')"
          label="Causa Penal"
          class="col-md-4">
          <input
            type="text"
            [readonly]="selectExpedient"
            class="form-control"
            formControlName="criminalCase"
        /></form-field>
      </div>
    </form>
    <div class="row text-center pt-5 pb-5">
      <div class="col">
        <button
          class="btn btn-primary btn-sm active mr-3"
          (click)="filterFn()"
          [disabled]="selectExpedient">
          Filtrar
          <i class="fa fa-filter" aria-hidden="true"></i>
        </button>
        <button class="btn btn-danger btn-sm active" (click)="clearFilter()">
          Limpiar Filtros <i class="fas fa-eraser"> </i>
        </button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div [class]="loading ? 'table-loading' : ''">
          <ng2-smart-table
            [attr.class]="'table-bordered table-responsive'"
            [settings]="settings"
            (userRowSelect)="selectProceeding($event)"
            [source]="data">
          </ng2-smart-table>
        </div>
        <div class="mt-3" *ngIf="proceedingSelect != null">
          <strong>Acta:</strong> {{ proceedingSelect.keysProceedings }}
        </div>
        <app-pagination [params]="params" [totalItems]="totalItems">
        </app-pagination>
      </div>
    </div>
    <div class="row text-center">
      <div class="col">
        <button class="btn btn-primary btn-sm active mr-3" (click)="accept()">
          Ingresar
        </button>
        <button class="btn btn-danger btn-sm active" (click)="close()">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</app-modal>
