<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Aprobaci&oacute;n para Donaci&oacute;n</h5>
  </div>

  <div body>
    <form class="form-material" [formGroup]="form">
      <div class="row mt-5">
        <div class="col-md-3">
          <form-field [control]="form.get('cveActa')">
            <ngx-select
              (fetchItems)="getEventComDonation($event)"
              [data]="donation"
              [form]="form"
              bindLabel="cveAct"
              value="cveAct"
              label="Clave Evento"
              control="cveActa"
              (change)="onEventChange($event)">
            </ngx-select>
            <!--<input
                type="text"
                formControlName="cveAct"
                class="form-control" />-->
          </form-field>
          <!--<div class="mb-3 pl-4 pr-4">
            
          </div>-->
        </div>

        <div class="col-md-3">
          <form-field [control]="form.get('estatusAct')" label="Estatus Evento">
            <ng-select
              formControlName="estatusAct"
              [searchable]="false"
              class="form-control"
              [clearable]="false"
              (change)="getRowSelec($event)">
              <ng-option value="TODOS">TODOS </ng-option>
              <ng-option value="ABIERTA">ABIERTA </ng-option>
              <ng-option value="CERRADA">CERRADA </ng-option>
            </ng-select>
            <!--<select class="form-control" formControlName="estatusAct">
              <option value="todos" selected>Todos</option>
              <option value="ABIERTA">Abierta</option>
              <option value="CERRADA">Cerrada</option>
            </select>-->
          </form-field>
          <!--<div class="mb-3 pl-4 pr-4">
          </div>-->
        </div>
        <div class="col-md-3">
          <form-field
            [control]="form.get('noDelegation1')"
            label="Coord. Regional">
            <input
              type="text"
              class="form-control"
              formControlName="noDelegation1" />
          </form-field>
          <!--<div class="mb-3 pl-4 pr-4">
          </div>-->
        </div>
        <div class="col-md-3">
          <div class="mb-3 pl-4 pr-4">
            <form-field label="Usuario" [control]="form.get('elaborated')">
              <input
                type="text"
                class="form-control"
                formControlName="elaborated" />
              <!--<ngx-select
                (fetchItems)="getEventComDonation($event)"
                [data]="users"
                [form]="form"
                bindLabel="name"
                value="user"
                label="Usuarios"
                control="elaborated"
                (change)="onUsersChange($event)">
              </ngx-select>-->
            </form-field>
          </div>
        </div>
      </div>

      <!--<div class="row pt-4">
        <div class="d-flex justify-content-center">
          <div class="col offset-md-3">
            <button
              class="btn btn-sm btn-primary active mr-3"
              [disabled]="!form.valid"
              (click)="filterButton()">
              Buscar
            </button>
            <button class="btn btn-danger btn-sm active" (click)="clean()">
              Limpiar <i class="fas fa-eraser"> </i>
            </button>
          </div>
        </div>
      </div>-->

      <div class="row pt-4">
        <div class="col-md-12 d-flex justify-content-center">
          <div>
            <!--<button
              class="btn btn-sm btn-primary active mr-3"
              [disabled]="!form.valid"
              (click)="filterButton()">
              Buscar
            </button>-->
            <button
              type="button"
              class="btn btn-primary active btn-sm mr-3"
              (click)="filterButton()"
              [disabled]="validate">
              Buscar
              <i class="bx bx-search-alt bx-sm float-icon"></i>
            </button>
            <button class="btn btn-danger btn-sm active" (click)="clean()">
              Limpiar <i class="fas fa-eraser"></i>
            </button>
          </div>
        </div>
      </div>

      <!--<div class="row mt-5 justify-content-center justify-content-sm-end">
        <div class="col-12 col-sm-3 text-center text-sm-right">
          <button
            class="btn btn-primary active btn-sm"
            (click)="filterButton()">
            Buscar
          </button>
        </div>
        <div class="col-12 col-sm-3 text-center mt-3 mt-sm-0 text-sm-right">
          <button
            class="btn btn-primary active btn-sm"
            routerLink="capture-approval-donation">
            Capturar Evento
          </button>
        </div>
      </div>-->
    </form>

    <div *ngIf="response">
      <hr />
      <div class="row pt-5">
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <div>
            <button
              class="btn btn-success active btn-sm ml-3"
              (click)="exportAll()">
              Exportar a Excel <i class="bx bx-download float-icon"></i>
            </button>
          </div>
          <app-columns-select
            [(settings)]="settings"
            [leftList]="true"></app-columns-select>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered table-responsive'"
              [settings]="settings"
              [source]="data">
            </ng2-smart-table>
          </div>
        </div>
      </div>
      <app-pagination [params]="params" [totalItems]="totalItems">
      </app-pagination>

      <div class="row pt-4">
        <div class="col-md-8 mb-3"></div>
        <div class="col-md-4 text-end d-flex flex-row-reverse mb-3">
          <div>
            <button
              class="btn btn-primary active btn-sm"
              routerLink="capture-approval-donation">
              Captura de Evento
            </button>
          </div>
        </div>
      </div>

      <!--<div
        class="row mt-3 pt-2 scroll-table"
        [class]="loading ? 'table-loading' : ''">
        <ng2-smart-table
          [attr.class]="'table-bordered'"
          class="col-md-12"
          [settings]="settings"
          [source]="data">
        </ng2-smart-table>
      </div>
      <app-pagination [params]="params" [totalItems]="totalItems">
      </app-pagination>-->

      <!-- <div class="row mt-5 justify-content-sm-end justify-content-center">
        <div class="col-12 col-sm-3 text-right">
          <button class="btn btn-success btn-sm" (click)="export()">
            Exportar
          </button>
        </div>
        <div class="col-12 col-sm-2 text-center mt-3 mt-sm-0 text-sm-left">
          <button class="btn btn-primary active btn-sm" routerLink="capture-approval-donation">
            Capturar Evento
          </button>
        </div>
      </div> -->
    </div>
  </div>
</app-card>
