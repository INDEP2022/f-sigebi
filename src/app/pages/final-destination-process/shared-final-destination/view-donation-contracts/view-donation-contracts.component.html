<app-card [header]="true">
  <div class="ch-content" header>
    <div *ngIf="op == 1; else elseBlock1">
      <h5 class="title">{{ title }}</h5>
    </div>
    <ng-template #elseBlock1>
      <h5 class="title">Contratos de Donaci&oacute;n Directa Administrador</h5>
    </ng-template>
  </div>

  <div body>
    <div class="mt-5">
      <form class="form-material" [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-12 col-md-3">
            <div class="mb-3 pl-4 pr-4">
              <form-field
                [control]="form.get('idContract')"
                label="Id Contrato o Convenio">
                <input
                  type="text"
                  class="form-control"
                  formControlName="idContract" />
              </form-field>
            </div>
          </div>
          <div class="col">
            <div
              class="justify-content-start"
              *ngIf="op == 1; else getcontract2">
              <button
                (click)="getDonacContract()"
                type="button"
                class="btn btn-primary active btn-sm mr-3">
                Buscar <i class="bx bx-search-alt bx-sm float-icon"></i>
              </button>
              <button
                (click)="clean()"
                class="btn btn-danger btn-sm active mr-3">
                Limpiar <i class="fas fa-eraser"> </i>
              </button>
            </div>

            <ng-template class="justify-content-start" #getcontract2>
              <button
                (click)="getIdContract()"
                type="button"
                class="btn btn-primary active btn-sm mr-3">
                Buscar
                <i class="bx bx-search-alt bx-sm float-icon"></i>
              </button>
              <button
                (click)="clean()"
                class="btn btn-danger btn-sm active mr-3">
                Limpiar <i class="fas fa-eraser"> </i>
              </button>
            </ng-template>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <form-field [control]="form.get('cto')" label="Cto">
              <input type="text" class="form-control" formControlName="cto" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('status')" label="Estado">
              <input
                type="text"
                class="form-control"
                formControlName="status" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('trans')" label="Trans">
              <input type="text" class="form-control" formControlName="trans" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('don')" label="Don">
              <input type="text" class="form-control" formControlName="don" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('ctrlAut')" label="CtrlAut">
              <input
                type="text"
                class="form-control"
                formControlName="ctrlAut" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('folio')" label="Folio">
              <input type="text" class="form-control" formControlName="folio" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('year')" label="AÃ±o">
              <input
                type="text"
                class="form-control"
                [bsConfig]="bsConfigFromYear"
                #dp="bsDatepicker"
                bsDatepicker
                [(bsValue)]="bsValueFromYear"
                formControlName="year" />
            </form-field>
          </div>
          <div class="col">
            <form-field [control]="form.get('month')" label="Mes">
              <input type="text" class="form-control" formControlName="month" />
            </form-field>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-12 col-md-6">
            <form-field [control]="form.get('contractKey')" label="Clave">
              <input
                type="text"
                class="form-control"
                formControlName="contractKey" />
            </form-field>
          </div>
          <div class="col-12 col-md-3">
            <form-field [control]="form.get('job')" label="Cve/Aut">
              <input type="text" class="form-control" formControlName="job" />
            </form-field>
          </div>
          <div class="col-12 col-md-3">
            <form-field [control]="form.get('donee')" label="Donatario">
              <input type="text" class="form-control" formControlName="donee" />
            </form-field>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('reasonSocial')"
              label="Raz&oacute;n Social">
              <input
                type="text"
                class="form-control"
                formControlName="reasonSocial" />
            </form-field>
          </div>
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('subscribeDate')"
              label="Fecha Suscribe">
              <input
                type="text"
                class="form-control"
                formControlName="subscribeDate" />
            </form-field>
          </div>
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('nomrepdona')"
              label="Nombre/Rep Don">
              <input
                type="text"
                class="form-control"
                formControlName="nomrepdona" />
            </form-field>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col">
            <form-field [control]="form.get('home')" label="Domicilio">
              <input type="text" class="form-control" formControlName="home" />
            </form-field>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('positionDona')"
              label="Puesto Rep/Don">
              <input
                type="text"
                class="form-control"
                formControlName="positionDona" />
            </form-field>
          </div>
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('usersae')"
              label="Nombre/ Rep INDEP">
              <input
                type="text"
                class="form-control"
                formControlName="usersae" />
            </form-field>
          </div>
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('representativeSae')"
              label="Nombre Fun/SAE">
              <input
                type="text"
                class="form-control"
                formControlName="representativeSae" />
            </form-field>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-12 col-md-4">
            <form-field
              [control]="form.get('puetsosae')"
              label="Puesto Fun/INDEP">
              <input
                type="text"
                class="form-control"
                formControlName="puetsosae" />
            </form-field>
          </div>
          <div class="col-12 col-md-4 mt-3 mt-md-0">
            <form-field [control]="form.get('witness1')" label="Testigo 1">
              <input
                type="text"
                class="form-control"
                formControlName="witness1" />
            </form-field>
          </div>
          <div class="col-12 col-md-4">
            <form-field [control]="form.get('witness2')" label="Testigo 2">
              <input
                type="text"
                class="form-control"
                formControlName="witness2" />
            </form-field>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col">
            <form-field
              [control]="form.get('observations')"
              label="Observaciones">
              <input
                type="text"
                class="form-control"
                formControlName="observations" />
            </form-field>
          </div>
          <div class="col-12 col-md-3">
            <form-field
              [control]="form.get('deliveryDate')"
              label="Fecha Entrega">
              <input
                type="text"
                class="form-control"
                formControlName="deliveryDate" />
            </form-field>
          </div>
          <div class="col-12 col-md-3">
            <form-field
              [control]="form.get('contractStatus')"
              label="Estatus del Contrato Convenio">
              <ng-select class="form-control" formControlName="contractStatus">
              </ng-select>
            </form-field>
          </div>
        </div>

        <div *ngIf="op == 1; else elseBlock2">
          <div class="justify-content-start">
            <button
              (click)="onImprimir()"
              [disabled]="buttonImprimir"
              type="button"
              class="btn btn-primary active btn-sm mr-3">
              Imprimir <i class="bx bx-printer bx-sm float-icon"></i>
            </button>
            <button
              [disabled]="buttonBloquear"
              class="btn btn-danger btn-sm active mr-3"
              (click)="onBloquearFirma()">
              Bloquear en Firma
            </button>
            <button
              [disabled]="buttonCerrarContrato"
              class="btn btn-danger btn-sm active mr-3"
              (click)="onCerrarContrato()">
              Cerrar Contrato o Convenio
            </button>
            <button
              (click)="openModal()"
              [disabled]="buttonIncorporar"
              type="button"
              tooltip="Agregar"
              containerClass="tooltip-style"
              class="btn btn-info btn-sm active ml-2 mr-2">
              <i class="bx bx-plus bx-sm float-icon"></i> Incorporar
            </button>
          </div>
        </div>
        <ng-template #elseBlock2>
          <div class="row mt-3 justify-content-center justify-content-md-end">
            <div class="col-12 col-md-4 text-center text-md-right">
              <button
                class="btn btn-red btn-sm active m-3"
                (click)="onQuitarBienesSeleccionados()">
                Quitar bienes eleccionados
                <i class="fa fa-trash" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </ng-template>
        <div class="row mt-5">
          <app-scan-file-shared
            *ngIf="op == 1"
            [replicateFolioView]="false"
            [disabled]="disabledFoli"
            [form]="form"
            [formControlName]="'folioScan'"
            [cveDocument]="form.get('folio').value"
            [noExpedient]="null"
            [statusProceeding]="
              form.get('contractStatus').value === 'C' ? 'CERRADA' : 'ABIERTA'
            "
            [cveScreen]="'FDONAC_DOCUM'"
            [reportPrint]="'RGERGENSOLICDIGIT'"></app-scan-file-shared>
        </div>

        <div class="d-flex justify-content-end">
          <app-columns-select
            [(settings)]="settings"
            class="row justify-content-end">
          </app-columns-select>
        </div>
        <ng-scrollbar
          style="min-height: 200px; border: none"
          class="mt-3"
          track="all">
          <div class="row scroll-table">
            <div class="col-md-12">
              <div [class]="loading ? 'table-loading' : ''">
                <ng2-smart-table
                  class="col-md-12"
                  [attr.class]="'table-bordered'"
                  [settings]="settings"
                  [source]="data"
                  (rowSelect)="selectFila1($event)">
                </ng2-smart-table>
              </div>
            </div>
          </div>
        </ng-scrollbar>
        <app-pagination [params]="params" [totalItems]="totalItems">
        </app-pagination>

        <div *ngIf="op == 1" class="row mb-3">
          <div class="d-flex justify-content-center">
            <div class="m-3">
              <button
                [disabled]="buttonInsertarParrafo"
                (click)="onInsertarParrafo()"
                type="button"
                tooltip="Agregar"
                containerClass="tooltip-style"
                class="btn btn-info btn-sm active ml-2 mr-2">
                Insertar P&aacute;rrafos
                <i class="bx bx-plus bx-sm float-icon"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-md-12">
            <form-field [control]="form.get('paragraph1')" label="Parrafo 1">
              <textarea
                rows="5"
                type="text"
                class="form-control"
                formControlName="paragraph1"></textarea>
            </form-field>
          </div>
          <div class="col-md-12">
            <form-field [control]="form.get('paragraph2')" label="Parrafo 2">
              <textarea
                rows="5"
                type="text"
                class="form-control"
                formControlName="paragraph1"></textarea>
            </form-field>
          </div>
          <div class="col-md-12">
            <form-field [control]="form.get('paragraph3')" label="Parrafo 3">
              <textarea
                rows="5"
                type="text"
                class="form-control"
                formControlName="paragraph3"></textarea>
            </form-field>
          </div>
          <div class="col-md-12">
            <form-field [control]="form.get('paragraph4')" label="Parrafo 4">
              <textarea
                rows="5"
                type="text"
                class="form-control"
                formControlName="paragraph4"></textarea>
            </form-field>
          </div>
          <div class="col-md-12">
            <form-field [control]="form.get('paragraph5')" label="Parrafo 5">
              <textarea
                rows="5"
                cols=""
                type="text"
                class="form-control"
                formControlName="paragraph5"></textarea>
            </form-field>
          </div>
        </div>
      </form>
    </div>
  </div>
</app-card>
