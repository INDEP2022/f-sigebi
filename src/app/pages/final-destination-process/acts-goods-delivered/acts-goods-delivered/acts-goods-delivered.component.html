<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Bienes Entregados para Estudio</h5>
  </div>

  <div body>
    <form class="form-material" [formGroup]="formAct">
      <div class="row justify-content-center">
        <div class="col-md-4">
          <!-- <form-field [control]="formAct.get('cveRecord')" label="Cve. Acta">
            <input formControlName="cveRecord" class="form-control" type="text" />
          </form-field> -->
          <form-field
            class="form-group"
            [control]="formAct.get('cveRecord')"
            label="Cve. Acta">
            <ng-custom-select
              formControlName="cveRecord"
              class="form-control"
              path="proceeding/api/v1/proceedings-delivery-reception/get-all-acta-reception-type-actas"
              [isLoadInOnInit]="true"
              paramSearch="filter.keysProceedings"
              prefixSearch="$ilike"
              value="keysProceedings">
              <ng-template let-item> {{ item.keysProceedings }}</ng-template>
            </ng-custom-select>
          </form-field>
        </div>
        <div class="col-md-2">
          <button
            type="button"
            class="btn btn-primary active btn-sm"
            (click)="ConsultAER()">
            Buscar
            <i class="bx bx-search-alt bx-sm float-icon"></i>
          </button>
        </div>
        <div class="col-md-1" *ngIf="yData">
          <button
            class="btn btn-danger btn-sm active mr-3"
            (click)="clearall()">
            Limpiar <i class="fas fa-eraser"> </i>
          </button>
        </div>
      </div>
      <br />
      <br />
      <div class="row justify-content-center">
        <div class="col-md-3">
          <form-field
            [control]="formAct.get('noTransfer')"
            label="No. Transferente">
            <input
              formControlName="noTransfer"
              class="form-control"
              type="text"
              readonly />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field
            [control]="formAct.get('noExpedient')"
            label="No. Expediente">
            <input
              formControlName="noExpedient"
              class="form-control"
              type="text"
              readonly />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field
            [control]="formAct.get('statusRecord')"
            label="Estado del Acta">
            <input
              formControlName="statusRecord"
              class="form-control"
              type="text"
              readonly />
          </form-field>
        </div>
        <div class="col-md-2" style="margin-top: 0.6%">
          <button
            class="btn btn-primary btn-sm active"
            [disabled]="!close"
            (click)="file.click()">
            Cargar Bienes <i class="fa fa-upload"></i>
          </button>
          <input
            type="file"
            name="file"
            #file
            class="d-none"
            accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
            (change)="onFileChange($event)" />
        </div>
        <!-- <div class="col-md-4 text-center text-md-right mt-3 mt-md-0">
        <button class="btn btn-secondary btn-sm active">
          Cerrar &Aacute;cta
        </button>
      </div> -->
      </div>
      <br />
      <div class="row">
        <div class="col-md-4">
          <form-field [control]="formAct.get('textarea')" label="Observaciones">
            <textarea
              rows="5"
              formControlName="textarea"
              class="form-control"
              [readonly]="!closeActa"></textarea>
          </form-field>
        </div>
        <div class="col-md-3" style="margin-top: 3.5%">
          <form-field
            [control]="formAct.get('dateCapture')"
            label="Fecha Captura">
            <input
              formControlName="dateCapture"
              class="form-control"
              type="text"
              readonly />
          </form-field>
        </div>
        <div class="col-md-3" style="margin-top: 3.5%">
          <form-field
            [control]="formAct.get('closingDate')"
            label="Fecha Cierre">
            <input
              type="text"
              class="form-control"
              formControlName="closingDate"
              readonly />
          </form-field>
        </div>
        <div
          class="col-md-2"
          style="margin-top: 4.2%; margin-right: -10px"
          (click)="getclose()">
          <button
            class="btn btn-primary btn-sm active mr-3"
            [disabled]="!goods || !fool || !closeActa || !statusScan">
            Cerrar &Aacute;cta
          </button>
        </div>
      </div>
    </form>
    <div class="pt-5">
      <form class="form-material" [formGroup]="form">
        <div class="row">
          <div class="col-sm-12 col-12 col-md-3 text-center">
            <button
              tooltip="Generar Folio de Escaneo y Solicitud"
              containerClass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1"
              (click)="initSolicitud()"
              [disabled]="!goods || !closeActa">
              <i class="bx bxs-file-find"></i>
            </button>
            <button
              tooltip="Escanear"
              containerClass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1"
              (click)="openScannerPage()"
              [disabled]="!goods || !fool || !closeActa">
              <i class="bx bxs-file"></i>
            </button>
          </div>
          <div class="col-sm-12 col-12 col-md-6 w-100 p-0">
            <div class="col-md-12 col-sm-12 col-12 p-0">
              <div class="col-md-12 col-sm-12 col-xs-12 p-1">
                <form-field
                  label="Folio De Escaneo"
                  [control]="form.get('scanningFoli')">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="scanningFoli"
                    readonly />
                </form-field>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-12 col-md-3 text-center">
            <button
              tooltip="Imprimir Solicitud de Escaneo"
              containerClass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1"
              (click)="getReport()"
              [disabled]="!goods || !fool">
              <i class="bx bxs-printer"></i>
            </button>
            <button
              tooltip="Consulta de ImÃ¡genes Escaneadas"
              containerClass="tooltip-style"
              class="btn btn-secondary btn-sm active m-1"
              [disabled]="!goods || !fool || !scan"
              (click)="openScannerPageView()">
              <i class="bx bxs-file-find"></i>
            </button>
          </div>
          <!-- (click)="getReportViewActa()" -->
        </div>
      </form>
      <hr />
      <div class="row mt-5 justify-content-end mt-3">
        <div class="col-md-5 buttons pt-3 text-right">
          <app-columns-select
            (settingsChange)="settingsChange($event)"
            [settings]="settings">
          </app-columns-select>
        </div>
      </div>
      <div class="row mt-5 scroll-table">
        <ng2-smart-table
          class="col-md-12"
          [attr.class]="'table-bordered'"
          [settings]="settings"
          [source]="localStorage">
        </ng2-smart-table>
      </div>
      <div class="mt-5 col-6 align-items-center">
        <div class="row">
          <div class="col-6">
            <span class="text-success mr-5"
              ><i class="fa fa-square"></i> Disponibles</span
            >
          </div>
          <div class="col-6">
            <span class="text-black"
              ><i class="fa fa-square"></i> No disponibles</span
            >
          </div>
        </div>
      </div>
      <app-pagination [params]="params" [totalItems]="totalItems">
      </app-pagination>
    </div>
  </div>
</app-card>
