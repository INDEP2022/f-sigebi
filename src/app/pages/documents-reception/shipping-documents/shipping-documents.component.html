<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Envio de oficios</h5>
  </div>

  <div body>
    <form [formGroup]="documentsForm" class="form-material" (submit)="save()">
      <div class="row">
        <div class="col-md-6">
          <div class="row">
            <form-field
              class="col-md-4"
              [control]="documentsForm.get('officeNum')"
              label="No&#46; Oficio">
              <input
                class="form-control"
                type="text"
                formControlName="officeNum" />
            </form-field>
            <form-field
              class="col-md-8"
              [control]="documentsForm.get('officeCve')"
              label="Cve Oficio">
              <input
                class="form-control"
                type="text"
                formControlName="officeCve" />
            </form-field>
          </div>

          <div class="row pt-4">
            <form-field
              class="col-md-6"
              [control]="documentsForm.get('date')"
              label="Fec&#46; Turno">
              <input class="form-control" formControlName="date" bsDatepicker />
            </form-field>

            <form-field
              class="col-md-4 offset-md-2"
              [control]="documentsForm.get('priority')"
              label="Prioridad">
              <select class="form-control" formControlName="priority">
                <option value="alta">Alta</option>
                <option value="normal">Normal</option>
              </select>
            </form-field>
          </div>

          <div class="row pt-4">
            <form-field
              class="col-md-12"
              [control]="documentsForm.get('sender')">
              <ngx-select
                [searchOnInit]="true"
                (change)="getSenders($event)"
                (fetchItems)="getSenders($event)"
                [form]="documentsForm"
                control="sender"
                value="user"
                bindLabel="user"
                [data]="senders"
                label="Remitente"></ngx-select>
            </form-field>
          </div>

          <div class="row pt-4">
            <form-field
              class="col-md-12"
              [control]="documentsForm.get('receiver')">
              <ngx-select
                (fetchItems)="getReceivers($event)"
                (change)="getDepartmentTarget($event)"
                [form]="documentsForm"
                value="user"
                bindLabel="user"
                control="receiver"
                [data]="receivers"
                label="Destinatario"></ngx-select>
            </form-field>
          </div>

          <div class="row pt-4">
            <form-field class="col-md-12" [control]="documentsForm.get('cpp')">
              <ngx-select
                (fetchItems)="getReceivers($event)"
                (change)="getDepartmentTarget($event)"
                [data]="receivers"
                value="user"
                bindLabel="user"
                [form]="documentsForm"
                control="cpp"
                label="C&#46;P&#46;P&#46;"></ngx-select>
            </form-field>
          </div>
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="row">
              <form-field [control]="documentsForm.get('delegation')">
                <ngx-select
                  [form]="documentsForm"
                  control="delegation"
                  [data]="select"
                  label="Delegación Destino"></ngx-select>
              </form-field>
            </div>

            <div class="row pt-4">
              <form-field [control]="documentsForm.get('subdelegation')">
                <ngx-select
                  [form]="documentsForm"
                  control="subdelegation"
                  [data]="select"
                  label="Subdelegación Destino"></ngx-select>
              </form-field>
            </div>

            <div class="row pt-4">
              <form-field [control]="documentsForm.get('department')">
                <ngx-select
                  [form]="documentsForm"
                  control="department"
                  value="id"
                  bindLabel="dsarea"
                  [data]="departments"
                  label="Area Destino"></ngx-select>
              </form-field>
            </div>

            <div class="row">
              <div class="col-md-8 d-flex">
                <form-radio label="Texto areas">
                  <input
                    type="radio"
                    formControlName="messageType"
                    value="area" />
                </form-radio>

                <form-radio label="Texto Direcci&oacute;n General">
                  <input
                    type="radio"
                    formControlName="messageType"
                    value="direction" />
                </form-radio>
              </div>
              <div class="col-md-4">
                <button
                  type="button"
                  class="btn btn-info btn-sm"
                  (click)="getNotifications()">
                  Selcci&oacute;n de volantes
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row pt-3">
        <form-field
          class="col-md-12"
          [control]="documentsForm.get('messageBody')"
          label="Texto del mensaje">
          <textarea formControlName="messageBody" class="form-control" rows="6">
          </textarea>
        </form-field>
      </div>

      <div class="row">
        <ng2-smart-table
          [attr.class]="'table-bordered'"
          [settings]="settings"
          [source]="notifications">
        </ng2-smart-table>
      </div>
      <div class="row">
        <app-pagination
          [params]="notificationParams"
          [totalItems]="totalNotifications"></app-pagination>
      </div>

      <div class="row pt-4">
        <div class="col-md-12 text-right">
          <button type="submit" class="btn btn-primary btn-sm active">
            Guardar
          </button>
        </div>
      </div>
    </form>
  </div>
</app-card>
