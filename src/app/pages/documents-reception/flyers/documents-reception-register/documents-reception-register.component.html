<app-card [header]="true">
  <div class="ch-content" header>
    <div class="d-flex justify-content-between">
      <div><h5 class="title">Registro de Recepci&oacute;n Documental</h5></div>
      <div>
        <button class="btn btn-info btn-sm active" (click)="chooseOther()">
          Seleccionar volante
        </button>
      </div>
    </div>
  </div>

  <form
    body
    [formGroup]="documentsReceptionForm"
    (submit)="save()"
    class="form-material">
    <div class="row">
      <div class="col-md-7">
        <div class="d-flex">
          <div>
            <a
              [routerLink]="[
                '/pages/documents-reception/flyers-registration/record-update',
                12345
              ]"
              outline
              class="btn btn-primary btn-sm mr-3 active"
              size="small">
              Antecedentes
            </a>
          </div>

          <div
            class="d-flex"
            *ngIf="initialCondition == 'AT' || initialCondition == 'T'">
            <form-radio class="ml-3" label="Admin_Transferente">
              <input type="radio" formControlName="type" value="AT" />
            </form-radio>
            <form-radio label="Transferente">
              <input type="radio" formControlName="type" value="T" />
            </form-radio>
          </div>

          <div
            class="d-flex"
            *ngIf="initialCondition == 'A' || initialCondition == 'P'">
            <form-radio class="ml-3" label="Administrativo">
              <input type="radio" formControlName="type" value="A" />
            </form-radio>
            <form-radio label="Procesal">
              <input type="radio" formControlName="type" value="P" />
            </form-radio>
          </div>
        </div>
        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('identifier')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="identifiers"
              (fetchItems)="getIdentifiers($event)"
              value="id"
              bindLabel="description"
              control="identifier"
              label="Identificador">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('sender')"
            label="Remitente">
            <input type="text" formControlName="sender" class="form-control" />
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('subject')">
            <ngx-select
              [form]="documentsReceptionForm"
              (fetchItems)="getSubjects($event)"
              [data]="subjects"
              value="id"
              bindLabel="description"
              control="subject"
              label="Asunto">
            </ngx-select>
          </form-field>
        </div>
      </div>

      <div class="col-md-5">
        <div class="row mb-5 pb-5">
          <div class="col-md-4">
            <div class="mt-2">
              <span
                class="label label-{{
                  procedureStatus == 'PENDIENTE' ? 'warning' : 'success'
                }}"
                >{{ procedureStatus }}</span
              >
            </div>
          </div>
          <div class="col-md-4">
            <button
              [disabled]="procedureStatus == 'ENVIADO'"
              type="button"
              class="ml-5 btn btn-warning btn-sm"
              (click)="sendFlyer()">
              <i class="bx bxs-lock-alt"></i>
            </button>
          </div>
          <div class="col-md-4">
            <button
              type="button"
              class="ml-5 btn btn-secondary active btn-sm"
              (click)="viewDocuments()">
              <i class="bx bx-file"></i>
            </button>
          </div>
        </div>

        <div class="row mt-4">
          <form-field
            class="col-md-4"
            [control]="documentsReceptionForm.get('reception')"
            label="Recepción">
            <input
              formControlName="reception"
              class="form-control"
              [maxDate]="initialDate"
              bsDatepicker />
          </form-field>

          <form-field
            class="col-md-4"
            [control]="documentsReceptionForm.get('flyer')"
            label="Volante">
            <input
              type="number"
              formControlName="flyer"
              class="form-control"
              readonly />
          </form-field>

          <form-field
            class="col-md-4"
            [control]="documentsReceptionForm.get('consecutive')"
            label="Consecutivo">
            <input
              type="number"
              formControlName="consecutive"
              class="form-control"
              readonly />
          </form-field>
        </div>

        <div class="row pt-5">
          <div class="col-md-4">
            <form-field
              [control]="documentsReceptionForm.get('priority')"
              label="Prioridad">
              <ng-select
                formControlName="priority"
                [searchable]="false"
                class="form-control"
                [clearable]="false">
                <ng-option value="A">Alta</ng-option>
                <ng-option value="N">Normal</ng-option>
              </ng-select>
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="documentsReceptionForm.get('record')"
              label="Expediente">
              <input
                type="number"
                formControlName="record"
                class="form-control"
                readonly />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="documentsReceptionForm.get('recordId')"
              label="Ident. Exp">
              <input
                type="number"
                formControlName="recordId"
                class="form-control"
                readonly />
            </form-field>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6" *ngIf="subject.value == 50">
        <div class="d-flex">
          <form-radio class="ml-3" label="Primera Etapa">
            <input type="radio" formControlName="type" value="PR" />
          </form-radio>
          <form-radio label="Segunda Etapa">
            <input type="radio" formControlName="type" value="SA" />
          </form-radio>
          <form-radio label="Tercera Etapa">
            <input type="radio" formControlName="type" value="TR" />
          </form-radio>
        </div>
      </div>
      <div class="col-md-6">
        <form-check class="col-md-6" label="Desalojov" for="desalojov-check">
          <input
            id="desalojov-check"
            type="checkbox"
            formControlName="desalojov"
            (input)="checkDesalojo($event)" />
        </form-check>

        <form-check
          class="col-md-6"
          label="Dirección General"
          for="general-check">
          <input
            id="general-check"
            type="checkbox"
            formControlName="generalDirection" />
        </form-check>
      </div>
    </div>
    <hr />
    <div class="row pt-5">
      <div class="col-md-5">
        <div class="row">
          <!-- <form-field
            class="col-md-8"
            [control]="documentsReceptionForm.get('judgmentType')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="identifiers"
              control="judgmentType"
              label="Tipo Juicio">
            </ngx-select>
          </form-field> -->
          <form-field
            [control]="documentsReceptionForm.get('judgmentType')"
            label="Tipo Juicio">
            <ng-select
              formControlName="judgmentType"
              [searchable]="false"
              class="form-control"
              [clearable]="false">
              <ng-option value="Amparo">Amparo</ng-option>
              <ng-option value="Procedimientos en Materia Adminsitrativa"
                >Procedimientos en Materia Adminsitrativa</ng-option
              >
            </ng-select>
          </form-field>

          <form-field
            class="col-md-4"
            [control]="documentsReceptionForm.get('jobNumber')"
            label="No. Oficio">
            <input
              type="number"
              formControlName="jobNumber"
              class="form-control" />
          </form-field>
        </div>
        <div class="row"></div>

        <div class="row pt-5">
          <form-field
            class="col-md-8"
            [control]="documentsReceptionForm.get('jobDate')"
            label="Fecha Oficio">
            <input
              formControlName="jobDate"
              class="form-control"
              bsDatepicker />
          </form-field>

          <form-field
            class="col-md-4"
            [control]="documentsReceptionForm.get('expTransfer')"
            label="Exp Transfer">
            <input
              type="number"
              formControlName="expTransfer"
              class="form-control" />
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            [control]="documentsReceptionForm.get('description')"
            label="Descripción">
            <textarea
              rows="5"
              formControlName="description"
              class="form-control"></textarea>
          </form-field>
        </div>
      </div>
      <div class="col-md-7">
        <div class="row">
          <form-field
            class="col-md-4"
            [control]="documentsReceptionForm.get('uniqueKey')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="identifiers"
              control="uniqueKey"
              label="Clave única 3 niveles">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-8"
            [control]="documentsReceptionForm.get('city')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="cities"
              (fetchItems)="getCities($event)"
              value="idCity"
              bindLabel="nameCity"
              control="city"
              label="Ciudad"
              (change)="cityChange($event)">
            </ngx-select>
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('state')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="federalEntities"
              (fetchItems)="getFederalEntities($event)"
              value="value"
              bindLabel="value"
              control="state"
              label="Ent. Fed">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('transfer')">
            <ngx-select
              [form]="documentsReceptionForm"
              (fetchItems)="getTransferors($event)"
              [data]="transferors"
              value="id"
              bindLabel="nameTransferent"
              control="transfer"
              label="Transferente"
              (change)="changeTransferor($event)">
            </ngx-select>
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('transmitter')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="stations"
              (fetchItems)="getStations($event)"
              value="id"
              bindLabel="stationName"
              control="transmitter"
              label="Emisora">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('autority')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="authorities"
              (fetchItems)="getAuthorities($event)"
              id="idAuthority"
              bindLabel="authorityName"
              control="autority"
              label="Autoridad">
            </ngx-select>
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('transferDup')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="transferors"
              bindLabel="nameTransferent"
              control="transferDup"
              label="Transferente"
              [readonly]="true">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('court')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="courts"
              (fetchItems)="getCourts($event)"
              value="id"
              bindLabel="description"
              control="court"
              label="Juzgado">
            </ngx-select>
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('taxpayer')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="defendants"
              (fetchItems)="getDefendants($event)"
              value="id"
              bindLabel="name"
              control="taxpayer"
              [label]="taxpayerLabel">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('receptionWay')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="receptionWays"
              (fetchItems)="getReceptionWays($event)"
              value="value"
              bindLabel="value"
              control="receptionWay"
              label="Vía Recepción">
            </ngx-select>
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('destinationArea')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="identifiers"
              control="destinationArea"
              label="Área Destino">
            </ngx-select>
          </form-field>

          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('destinationArea')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="identifiers"
              control="destinationArea">
            </ngx-select>
          </form-field>
        </div>

        <div class="row pt-5">
          <form-field
            class="col-md-6"
            [control]="documentsReceptionForm.get('destinationManagement')">
            <ngx-select
              [form]="documentsReceptionForm"
              [data]="managementAreas"
              (fetchItems)="getManagementAreas($event)"
              value="id"
              bindLabel="description"
              control="destinationManagement"
              label="Gestión Destino">
            </ngx-select>
          </form-field>
        </div>
      </div>
    </div>
    <hr />
    <div class="row pt-5">
      <form-field
        class="col-md-6"
        [control]="documentsReceptionForm.get('inAtention')">
        <ngx-select
          [form]="documentsReceptionForm"
          [data]="users"
          (fetchItems)="getUsers($event)"
          value="id"
          bindLabel="name"
          control="inAtention"
          label="En atención">
        </ngx-select>
      </form-field>
      <form-field
        class="col-md-6"
        [control]="documentsReceptionForm.get('cpp')">
        <ngx-select
          [form]="documentsReceptionForm"
          [data]="users"
          (fetchItems)="getUsers($event)"
          value="id"
          bindLabel="name"
          control="cpp"
          label="C.P.P.">
        </ngx-select>
      </form-field>
    </div>
    <div class="row">
      <div class="col-md-6"></div>
      <!-- <form-field
        class="col-md-6"
        [control]="documentsReceptionForm.get('cpp')">
        <ngx-select
          [form]="documentsReceptionForm"
          [data]="identifiers"
          control="cpp">
        </ngx-select>
      </form-field> -->
      <div class="col-md-6 text-right">
        <button class="btn btn-primary active btn-sm mt-3" type="submit">
          Siguiente
        </button>
      </div>
    </div>
  </form>
</app-card>
