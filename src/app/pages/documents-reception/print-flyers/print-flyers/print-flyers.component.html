<app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <h5 class="title">Impresi&oacute;n de Volantes</h5>
  </div>
  <div body class="container-fluid">
    <form [formGroup]="flyersForm" class="form-material">
      <div class="row">
        <div class="col-md-6">
          <form-field [control]="flyersForm.get('PN_NODELEGACION')">
            <ngx-select
              [form]="flyersForm"
              (fetchItems)="getDelegations($event)"
              [data]="delegations"
              [searchOnInit]="true"
              value="id"
              bindLabel="description"
              label="Delegaci&oacute;n"
              [control]="'PN_NODELEGACION'"
              (change)="onDelegationsChange($event)">
            </ngx-select>
          </form-field>
        </div>
        <div class="col-md-6">
          <form-field [control]="flyersForm.get('PN_NOSUBDELEGACION')">
            <ngx-select
              [form]="flyersForm"
              (fetchItems)="getSubDelegations($event)"
              [data]="subdelegations"
              value="id"
              bindLabel="description"
              label="Sub Delegaci&oacute;n"
              [control]="'PN_NOSUBDELEGACION'"
              (change)="onSubDelegationsChange($event)">
            </ngx-select>
          </form-field>
        </div>
      </div>
      <div class="row pt-5">
        <div class="col-md-6">
          <form-field [control]="flyersForm.get('PN_AREADESTINO')">
            <ngx-select
              (fetchItems)="getDepartments($event)"
              [data]="departments"
              [form]="flyersForm"
              value="id"
              bindLabel="description"
              label="&Aacute;rea de Destino"
              [control]="'PN_AREADESTINO'">
            </ngx-select>
          </form-field>
        </div>
        <div class="col-md-6">
          <form-field
            [control]="flyersForm.get('PN_TIPOASUNTO')"
            label="Tipo de Asunto">
            <ng-select
              formControlName="PN_TIPOASUNTO"
              [searchable]="false"
              class="form-control"
              [clearable]="false">
              <ng-option value="A">ADMINISTRATIVO</ng-option>
              <ng-option value="P">PROCESAL</ng-option>
            </ng-select>
          </form-field>
        </div>
      </div>

      <div class="row pt-4">
        <div class="col-md-6">
          <span> N&uacute;mero de Volante </span>
        </div>
        <div class="col-md-6">Fecha</div>
        <!-- <app-delegation-shared [form]="flyersForm"></app-delegation-shared> -->
      </div>
      <div class="row pt-4">
        <div class="col-md-6">
          <div class="row">
            <div class="col-6">
              <form-field
                [control]="flyersForm.get('PN_VOLANTEINI')"
                label="Desde: ">
                <input
                  class="form-control"
                  type="number"
                  formControlName="PN_VOLANTEINI"
                  (keyup)="onVolanteIniChange($event)" />
              </form-field>
            </div>
            <div class="col-md-6">
              <form-field
                [control]="flyersForm.get('PN_VOLANTEFIN')"
                label="Hasta: ">
                <input
                  class="form-control"
                  type="number"
                  formControlName="PN_VOLANTEFIN" />
              </form-field>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-6">
              <form-field
                [control]="flyersForm.get('PF_FECINI')"
                label="Desde: ">
                <input
                  class="form-control"
                  formControlName="PF_FECINI"
                  (bsValueChange)="setMinDateEnd($event)"
                  [maxDate]="maxDateStart"
                  bsDatepicker />
              </form-field>
            </div>
            <div class="col-md-6">
              <form-field
                [control]="flyersForm.get('PF_FECFIN')"
                label="Hasta:">
                <input
                  class="form-control"
                  formControlName="PF_FECFIN"
                  [maxDate]="maxDateEnd"
                  [minDate]="minDateEnd"
                  bsDatepicker />
              </form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="row pt-4">
        <div class="col-md-6 pt-3">
          <form-field
            [control]="flyersForm.get('P_IDENTIFICADOR')"
            label="Identificador">
            <input
              class="form-control"
              type="text"
              formControlName="P_IDENTIFICADOR"
              (keypress)="onlyNumbers($event)" />
          </form-field>
        </div>
      </div>
    </form>
  </div>
  <div footer>
    <div class="d-flex justify-content-center">
      <div class="m-3">
        <button
          type="button"
          [disabled]="flyersForm.invalid"
          class="btn btn-primary active btn-sm"
          (click)="confirm()">
          Imprimir <i class="bx bx-printer bx-sm float-icon"></i>
        </button>
      </div>
      <div class="m-3">
        <button
          type="button"
          class="btn btn-danger active btn-sm"
          (click)="cleanForm()">
          Limpiar <i class="fas fa-eraser bx-sm float-icon"></i>
        </button>
      </div>
    </div>
  </div>
</app-card>
