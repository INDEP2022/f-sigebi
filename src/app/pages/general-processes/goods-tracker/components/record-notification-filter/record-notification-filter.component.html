<form [formGroup]="form" class="form-material" (submit)="search()">
  <div class="row">
    <form-field
      [control]="form.get('expedientNum')"
      label="Expediente"
      class="col-md-3">
      <ng-select
        class="form-control scroll-line"
        formControlName="expedientNum"
        [items]="[]"
        addTagText="Agregar Elemento"
        [addTag]="true"
        [multiple]="true">
      </ng-select>
    </form-field>

    <div class="col-md-1">
      <button
        (click)="goodNumbersInput.click()"
        type="button"
        class="btn btn-primary btn-sm active">
        <i class="bx bx-list-plus bx-sm float-icon"></i>
      </button>
    </div>

    <form-field
      [control]="form.get('flyerNum')"
      label="Volante"
      class="col-md-3">
      <ng-select
        class="form-control scroll-line"
        formControlName="flyerNum"
        [items]="[]"
        addTagText="Agregar Elemento"
        [addTag]="true"
        (change)="flyerChange($event)"
        [multiple]="true">
      </ng-select>
      <!-- <input type="text" formControlName="flyerNum" class="form-control" /> -->
    </form-field>

    <form-field [control]="form.get('judgeNum')" class="col-md-5">
      <!-- <input type="text" formControlName="judgeNum" class="form-control" /> -->
      <ngx-select
        [form]="form"
        [searchOnInit]="true"
        control="judgeNum"
        [data]="courts"
        value="id"
        bindLabel="description"
        (fetchItems)="getCourts($event)"
        (change)="courtChange($event)"
        label="No&#46; Juzgado"
        [labelTemplate]="judgeLabel"
        [optionTemplate]="judgeOption"></ngx-select>
      <ng-template #judgeLabel let-item="item"
        ><span [title]="item.id + ' - ' + item.description"
          >{{ item.id }}-{{ item.description }}</span
        ></ng-template
      >
      <ng-template #judgeOption let-item="item"
        ><span [title]="item.id + ' - ' + item.description"
          >{{ item.id }} - {{ item.description }}</span
        ></ng-template
      >
    </form-field>

    <!-- No hay filtro para este  campo -->
    <!-- <form-field
      [control]="form.get('trasnferExp')"
      label="Exp&#46; Trans&#46;"
      class="col-md-3">
      <input type="text" formControlName="trasnferExp" class="form-control" />
    </form-field> -->
  </div>
  <div class="row pt-4">
    <form-field
      [control]="form.get('flyerType')"
      label="Tipo de Volante"
      class="col-md-2">
      <input type="text" formControlName="flyerType" class="form-control" />
    </form-field>
    <form-field
      [control]="form.get('officeDate')"
      label="Fecha Oficio Ext&#46;"
      class="col-md-2">
      <input
        type="text"
        oninput="if(this.value.length > 3) this.value = this.value.slice(0, 3)"
        formControlName="officeDate"
        class="form-control"
        bsDatepicker />
    </form-field>

    <form-field
      [control]="form.get('protection')"
      label="Amparo"
      class="col-md-4">
      <input
        type="text"
        formControlName="protection"
        oninput="if(this.value.length > 30) this.value = this.value.slice(0, 30)"
        class="form-control"
        (change)="protectionChange()" />
    </form-field>

    <form-field
      [control]="form.get('criminalCase')"
      label="Toca Penal"
      class="col-md-4">
      <input
        type="text"
        formControlName="criminalCase"
        oninput="if(this.value.length > 30) this.value = this.value.slice(0, 30)"
        (change)="criminalCaseChange()"
        class="form-control" />
    </form-field>
  </div>

  <div class="row pt-4">
    <form-field
      [control]="form.get('indicatedName')"
      label="Nombre Indiciado"
      class="col-md-4">
      <input
        type="text"
        formControlName="indicatedName"
        class="form-control"
        oninput="if(this.value.length > 100) this.value = this.value.slice(0, 100)" />
    </form-field>

    <form-field [control]="form.get('publicMin')" class="col-md-4">
      <!-- <input type="text" formControlName="publicMin" class="form-control" /> -->
      <ngx-select
        [form]="form"
        [searchOnInit]="true"
        control="publicMin"
        [data]="publicMins"
        value="id"
        bindLabel="description"
        (fetchItems)="getMinPubs($event)"
        (change)="minpubChange()"
        label="Ministerio P&uacute;blico"
        [labelTemplate]="minPubLabel"
        [optionTemplate]="minPubOption"></ngx-select>
      <ng-template #minPubLabel let-item="item"
        ><span [title]="item.id + ' - ' + item.description"
          >{{ item.id }} - {{ item.description }}</span
        ></ng-template
      >
      <ng-template #minPubOption let-item="item"
        ><span [title]="item.id + ' - ' + item.description">
          {{ item.id }} - {{ item.description }}
        </span></ng-template
      >
    </form-field>

    <form-field
      [control]="form.get('extOfficeNum')"
      label="Oficio Ext&#46; No&#46;"
      class="col-md-4">
      <input
        type="text"
        formControlName="extOfficeNum"
        class="form-control"
        oninput="if(this.value.length > 30) this.value = this.value.slice(0, 30)" />
    </form-field>
  </div>

  <div class="row pt-4">
    <form-field
      [control]="form.get('previusInvestigation')"
      label="Averiguaci&oacute;n Previa"
      class="col-md-4">
      <input
        type="text"
        oninput="if(this.value.length > 200) this.value = this.value.slice(0, 200)"
        formControlName="previusInvestigation"
        class="form-control" />
    </form-field>

    <form-field
      [control]="form.get('dictum')"
      label="Dictamen"
      class="col-md-4">
      <input
        type="text"
        formControlName="dictum"
        oninput="if(this.value.length > 200) this.value = this.value.slice(0, 200)"
        class="form-control" />
    </form-field>

    <form-field
      [control]="form.get('criminalCause')"
      label="Causa Penal"
      class="col-md-4">
      <input
        type="text"
        oninput="if(this.value.length > 40) this.value = this.value.slice(0, 40)"
        formControlName="criminalCause"
        class="form-control" />
    </form-field>
  </div>

  <div class="row pt-3">
    <div class="col-md-12 d-inline">
      <button class="btn btn-primary active btn-sm mr-3">
        Buscar
        <i class="bx bx-search-alt bx-sm float-icon"></i>
      </button>

      <button
        type="button"
        (click)="cleanFilters.emit()"
        class="btn btn-danger btn-sm active mr-3">
        Limpiar <i class="fas fa-eraser"> </i>
      </button>
    </div>
  </div>
</form>

<div [style.display]="'none'">
  <input
    #goodNumbersInput
    (change)="goodNumbersFileChange($event)"
    [formControl]="goodNumbersControl"
    type="file" />
</div>
