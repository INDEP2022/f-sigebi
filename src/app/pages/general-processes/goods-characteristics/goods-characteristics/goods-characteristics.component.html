<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Caracter&Iacute;sticas del bien</h5>
  </div>

  <div body>
    <div class="row">
      <div class="col-md-12 md-tabs" *ngIf="form">
        <form [formGroup]="form" class="form-material">
          <div class="paginator">
            <app-pagination
              [params]="params"
              [totalItems]="totalItems"
              [limit]="newLimit"
              [maxSize]="1"></app-pagination>
          </div>

          <tabset #staticTabs>
            <tab heading="Datos de B&uacute;squeda">
              <div class="row">
                <div class="col-md-6">
                  <ng-template #typeLabel let-item="item">
                    {{ item.id }} - {{ item.nameGoodType }}
                  </ng-template>
                  <ng-template #typeOption let-item="item">
                    <div [title]="item.id + '-' + item.nameGoodType">
                      {{ item.id }} - {{ item.nameGoodType }}
                    </div>
                  </ng-template>
                  <div class="row pt-3">
                    <ng-custom-select-loading
                      [form]="form"
                      formControlName="type"
                      label="Tipo"
                      path="catalog/api/v1/good-type"
                      value="id"
                      bindLabel="nameGoodType"
                      paramSearch="search"
                      [labelTemplate]="typeLabel"
                      [optionTemplate]="typeOption">
                    </ng-custom-select-loading>
                  </div>
                  <div class="row pt-3">
                    <ng-custom-select-loading
                      [form]="form"
                      formControlName="subtype"
                      label="Subtipo"
                      path="catalog/api/v1/good-subtype"
                      value="id"
                      bindLabel="nameSubtypeGood"
                      paramSearch="search"
                      [labelTemplate]="subtypeLabel"
                      [optionTemplate]="subtypeOption">
                    </ng-custom-select-loading>
                    <ng-template #subtypeLabel let-item="item">
                      {{ item.id }} - {{ item.nameSubtypeGood }}
                    </ng-template>
                    <ng-template #subtypeOption let-item="item">
                      <div [title]="item.id + '-' + item.nameSubtypeGood">
                        {{ item.id }} - {{ item.nameSubtypeGood }}
                      </div>
                    </ng-template>
                  </div>
                  <div class="row pt-3">
                    <ng-custom-select-loading
                      [form]="form"
                      formControlName="ssubtype"
                      label="Ssubtipo"
                      path="catalog/api/v1/good-ssubtype"
                      value="id"
                      bindLabel="description"
                      paramSearch="search"
                      [labelTemplate]="ssubtypeLabel"
                      [optionTemplate]="ssubtypeOption">
                    </ng-custom-select-loading>
                  </div>
                  <div class="row pt-3">
                    <ng-custom-select-loading
                      [form]="form"
                      formControlName="sssubtype"
                      label="Sssubtipo"
                      path="catalog/api/v1/good-sssubtype"
                      value="id"
                      bindLabel="description"
                      paramSearch="search"
                      [labelTemplate]="ssubtypeLabel"
                      [optionTemplate]="ssubtypeOption">
                    </ng-custom-select-loading>
                  </div>
                  <ng-template #ssubtypeLabel let-item="item">
                    {{ item.id }} - {{ item.description }}
                  </ng-template>
                  <ng-template #ssubtypeOption let-item="item">
                    <div [title]="item.id + '-' + item.description">
                      {{ item.id }} - {{ item.description }}
                    </div>
                  </ng-template>
                  <!-- <app-goods-types-shared
                    [form]="form"
                    typeField="type"
                    subtypeField="subtype"
                    ssubtypeField="ssubtype"
                    sssubtypeField="sssubtype"
                    (goodSssubtypeChange)="
                      getGoods($event)
                    "></app-goods-types-shared> -->
                </div>
                <div class="col-md-6">
                  <div class="row pt-3">
                    <form-field
                      [control]="form.get('noBien')"
                      label="No. de bien">
                      <input
                        class="form-control"
                        formControlName="noBien"
                        maxlength="10" />
                    </form-field>
                    <!-- <div class="form-group row">
                      <goods-filter-shared
                        [form]="form"
                        goodField="noBien"
                        [classifGood]="good"></goods-filter-shared>
                    </div> -->
                  </div>
                  <div class="row pt-4">
                    <form-field
                      [control]="form.get('noClasif')"
                      label="No. Clasificación Bien">
                      <input
                        type="text"
                        class="form-control"
                        formControlName="noClasif"
                        [disabled]="disabledNoClasifBien"
                        (change)="updateClasif($event)"
                        (customEvent)="handleEvent($event)" />
                    </form-field>
                  </div>
                  <div class="row pt-3">
                    <form-field [control]="form.get('status')" label="Estatus">
                      <input
                        type="text"
                        class="form-control"
                        formControlName="status" />
                    </form-field>
                  </div>
                  <div class="row pt-3" style="margin: auto">
                    <button
                      [disabled]="formLoading"
                      class="btn btn-primary btn-sm active"
                      type="button"
                      (click)="clearFilter()">
                      Limpiar Filtros
                    </button>
                    <button
                      [disabled]="formLoading"
                      class="btn btn-primary btn-sm active"
                      type="button"
                      (click)="searchGood()">
                      Buscar
                    </button>
                  </div>
                </div>
              </div>
            </tab>
            <tab heading="Datos Generales del Bien">
              <div
                class="mb-5"
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                ">
                <button
                  type="button"
                  class="btn btn-sm btn-success active"
                  (click)="save()">
                  Guardar
                </button>
                <h5 class="text-danger" style="text-align: right">
                  {{ di_numerario_conciliado }}
                </h5>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <form-field
                      [control]="form.get('descripcion')"
                      label="Descripci&oacute;n">
                      <textarea
                        formControlName="descripcion"
                        class="form-control"
                        [disabled]="disabledDescripcion"></textarea>
                    </form-field>
                  </div>
                  <div class="row pt-3">
                    <form-field
                      [control]="form.get('unidad')"
                      label="Unidad"
                      class="col-md-4">
                      <input
                        type="text"
                        formControlName="unidad"
                        class="form-control"
                        [disabled]="disabledBienes" />
                    </form-field>
                    <form-field
                      class="col-md-4"
                      [control]="form.get('cantidad')"
                      label="Cantidad">
                      <input
                        type="text"
                        formControlName="cantidad"
                        class="form-control"
                        [disabled]="disabledBienes" />
                    </form-field>
                    <form-field
                      class="col-md-4"
                      [control]="form.get('valRef')"
                      label="Valor de Referencia">
                      <input
                        type="text"
                        formControlName="valRef"
                        class="form-control"
                        [disabled]="disabledBienes" />
                    </form-field>
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <!-- <app-delegation-shared [form]="form"></app-delegation-shared> -->
                <div class="col-md-6">
                  <div class="form-group row">
                    <ng-custom-select-loading
                      [form]="form"
                      [disabled]="disabledBienes"
                      formControlName="delegation"
                      label="Delegación"
                      path="catalog/api/v1/delegation/get-all"
                      value="description"
                      bindLabel="description"
                      paramSearch="search">
                    </ng-custom-select-loading>
                    <!-- <form-field
                      [control]="form.get('delegation')"
                      label="Delegación"
                      class="col-md-12">
                      <input
                        type="text"
                        formControlName="delegation"
                        class="form-control" />
                    </form-field> -->
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group row">
                    <form-field
                      [control]="form.get('subdelegation')"
                      label="Subdelegación"
                      class="col-md-12">
                      <input
                        type="text"
                        formControlName="subdelegation"
                        class="form-control"
                        [disabled]="disabledBienes" />
                    </form-field>
                  </div>
                </div>
              </div>
              <div class="row">
                <form-field
                  [control]="form.get('fechaAval')"
                  label="Fecha Aval&uacute;o Vigencia"
                  class="col-md-3">
                  <input
                    type="text"
                    formControlName="fechaAval"
                    class="form-control"
                    style="background-color: white"
                    [disabled]="disabledBienes"
                    readonly
                    bsDatepicker />
                </form-field>

                <form-field
                  [control]="form.get('valorAval')"
                  label="Valor Aval&uacute;o"
                  class="col-md-3">
                  <input
                    type="text"
                    formControlName="valorAval"
                    class="form-control"
                    [disabled]="disabledBienes" />
                </form-field>

                <form-field
                  [control]="form.get('latitud')"
                  label="Latitud"
                  class="col-md-3">
                  <input
                    type="text"
                    formControlName="latitud"
                    class="form-control" />
                </form-field>

                <form-field
                  [control]="form.get('longitud')"
                  label="Longitud"
                  class="col-md-3">
                  <input
                    type="text"
                    formControlName="longitud"
                    class="form-control" />
                </form-field>
              </div>

              <div class="row pt-3">
                <form-field
                  [control]="form.get('observaciones')"
                  label="Observaciones"
                  class="col-md-8">
                  <textarea
                    formControlName="observaciones"
                    class="form-control"
                    [disabled]="disabledBienes"></textarea>
                </form-field>

                <div class="col-md-4">
                  <small>¿Con Aval&uacute;o?</small>
                  <div class="d-flex">
                    <form-radio label="Si">
                      <input
                        type="radio"
                        formControlName="avaluo"
                        [value]="true" />
                    </form-radio>
                    <form-radio label="No">
                      <input
                        type="radio"
                        formControlName="avaluo"
                        [value]="false" />
                    </form-radio>
                  </div>
                </div>
              </div>
              <div class="row">
                <app-good-table-vals></app-good-table-vals>
              </div>
            </tab>
          </tabset>
        </form>
      </div>
    </div>
  </div>
</app-card>
