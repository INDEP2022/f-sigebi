<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Solicitud de Digitalizaci&oacute;n</h5>
    <div class="buttons">
      <button
        class="btn btn-secondary btn-sm active mr-2"
        (click)="back()"
        *ngIf="isParams">
        Regresar
      </button>
    </div>
  </div>

  <div body>
    <form [formGroup]="formNotification" class="form-material">
      <div class="row">
        <form-field
          class="col-md-2"
          [control]="formNotification.get('expedientNumber')"
          label="No&#46; Expediente">
          <input
            type="number"
            min="0"
            [max-length]="10"
            formControlName="expedientNumber"
            class="form-control" />
        </form-field>

        <form-field
          class="col-md-2"
          [control]="formNotification.get('wheelNumber')"
          label="No&#46; Volante">
          <input
            type="number"
            min="0"
            [max-length]="10"
            formControlName="wheelNumber"
            class="form-control" />
        </form-field>

        <form-field
          class="col-md-2"
          [control]="formNotification.get('receiptDate')"
          label="Fecha Recepci&oacute;n Volante">
          <input
            formControlName="receiptDate"
            class="form-control"
            bsDatepicker
            [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }" />
        </form-field>

        <form-field
          class="col-md-6"
          [control]="formNotification.get('preliminaryInquiry')"
          label="Averiguaci&oacute;n Previa">
          <input
            [max-length]="200"
            formControlName="preliminaryInquiry"
            class="form-control" />
        </form-field>
      </div>

      <div class="row pt-3">
        <form-field
          class="col-md-3"
          [control]="formNotification.get('criminalCase')"
          label="Causa Penal">
          <input
            formControlName="criminalCase"
            class="form-control"
            [max-length]="40" />
        </form-field>

        <form-field
          class="col-md-3"
          [control]="formNotification.get('touchPenaltyKey')"
          label="Toca Penal">
          <input
            formControlName="touchPenaltyKey"
            class="form-control"
            [max-length]="30" />
        </form-field>

        <form-field
          class="col-md-3"
          [control]="formNotification.get('circumstantialRecord')"
          label="Acta Circunstanciada">
          <input
            formControlName="circumstantialRecord"
            [max-length]="30"
            class="form-control" />
        </form-field>

        <form-field
          class="col-md-3"
          [control]="formNotification.get('protectionKey')"
          label="Amparo">
          <input
            formControlName="protectionKey"
            class="form-control"
            [max-length]="30" />
        </form-field>
      </div>

      <div class="row">
        <div class="col-12">
          <div class="buttons text-end">
            <span *ngIf="count > 0">
              <button
                class="btn btn-primary btn-sm active mr-2"
                (click)="notificationList()">
                Ver lista expedientes
              </button>
            </span>
            <confirm-button
              text="Buscar"
              [loadingText]="'Buscando'"
              [loading]="loading"
              [btnSmall]="true"
              (confirm)="searchNotification()">
            </confirm-button>
            <button
              class="btn btn-primary btn-sm active ml-2"
              (click)="clear()"
              [disabled]="loading">
              Limpiar
            </button>
          </div>
        </div>
      </div>
    </form>
    <hr />
    <form [formGroup]="form" class="form-material">
      <div class="row">
        <app-document-type-shared
          [form]="form"
          class="col-md-4"></app-document-type-shared>

        <form-field
          [control]="form.get('natureDocument')"
          class="col-md-4 mt-3"
          label="Naturaleza">
          <select formControlName="natureDocument" class="form-control">
            <option value="ORIGINAL">Original</option>
            <option value="COPIA SIMPLE">Copia Simple</option>
            <option value="MIXTO">Mixto</option>
            <option value="COPIA CERTIFICADA">Copia Certificada</option>
          </select>
        </form-field>

        <form-field
          [control]="form.get('significantDate')"
          class="col-md-4 mt-3"
          label="Fecha Significativa (mm-yyyy)">
          <input
            type="text"
            formControlName="significantDate"
            class="form-control" />
        </form-field>
      </div>
      <div class="row">
        <form-field
          [control]="form.get('descriptionDocument')"
          class="col-md-6"
          label="Descripci&oacute;n del Documento">
          <textarea
            formControlName="descriptionDocument"
            class="form-control"></textarea>
        </form-field>
        <div class="col">
          <button class="btn btn-info active btn-sm" (click)="callScan()">
            Escanear
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="buttons text-end">
            <span *ngIf="countDoc > 0">
              <button
                class="btn btn-primary btn-sm active mr-2"
                (click)="documentsList()">
                Ver lista documentos
              </button>
            </span>
          </div>
        </div>
      </div>
      <hr />
      <div class="row align-items-baseline">
        <div class="col-auto">
          <button
            class="btn btn-primary btn-sm active mr-2 mt-3"
            (click)="clearDocument()">
            Nueva Solicitud
          </button>
        </div>
        <div class="col-auto">
          <button
            class="btn btn-secondary btn-sm active mt-3"
            (click)="generateDoc()">
            Generar Solicitud
          </button>
        </div>
        <div class="col-md-auto">
          <p class="mt-3">Folio Universal:</p>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('id')">
            <input
              type="text"
              formControlName="id"
              class="form-control mt-3"
              placeholder="FOLIO_UNIERVERSAL" />
          </form-field>
        </div>
        <div class="col-md-3">
          <button
            class="btn btn-secondary btn-sm active mt-3"
            (click)="proccesReport()">
            <i class="fas fa-print"></i>
          </button>
        </div>
      </div>
    </form>
  </div>
</app-card>
