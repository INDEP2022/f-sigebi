<div>
  <form [formGroup]="form" class="form-material">
    <div class="row pt-3">
      <form-field
        [control]="form.get('de')"
        label="Rango de fechas"
        class="col-md-3">
        <input
          type="text"
          class="form-control"
          bsDatepicker
          formControlName="de"
          [maxDate]="maxDate" />
      </form-field>

      <form-field [control]="form.get('a')" label="A" class="col-md-3">
        <input
          type="text"
          class="form-control"
          bsDatepicker
          formControlName="a"
          [maxDate]="maxDate"
          [minDate]="form.get('de').value" />
      </form-field>

      <form-field
        *ngIf="
          !isReceptionAndDelivery && !isReceptionStrategies && !isConsolidated
        "
        [control]="form.get('fecha')"
        label="Fecha Ingreso"
        class="col-md-3">
        <input
          type="text"
          class="form-control"
          bsDatepicker
          formControlName="fecha"
          [maxDate]="maxDate" />
      </form-field>

      <form-field
        [control]="form.get('tipoVolante')"
        class="col-md-3"
        label="Tipo Volante"
        *ngIf="!isReceptionStrategies && !isConsolidated">
        <select class="form-control" formControlName="tipoVolante">
          <option *ngFor="let type of flyerTypes" [value]="type">
            {{ type }}
          </option>
        </select>
      </form-field>
    </div>

    <!-- <form-field *ngIf="
        (isReceptionAndDelivery || isReceptionStrategies) && !isConsolidated
      " [control]="form.get('tipoEvento')" class="col-md-3" label="Tipo Evento">
      <select class="form-control" formControlName="tipoEvento">
        <option *ngFor="let event of eventTypes" [value]="event">
          {{ event }}
        </option>
      </select>
    </form-field> -->

    <div class="row mt-4">
      <div class="col-md-12">
        <form-field [control]="form.get('cordinador')">
          <ngx-select
            [form]="form"
            [searchOnInit]="true"
            control="cordinador"
            label="Coor. Regional"
            [data]="delegations"
            (fetchItems)="getDelegations($event)"
            className="scroll-line"
            bindLabel="description"></ngx-select>
        </form-field>
      </div>
    </div>

    <div class="row pt-3" *ngIf="!isReceptionAndDelivery">
      <form-field [control]="form.get('usuario')" class="col-md-6">
        <ngx-select
          label="Usuario"
          [form]="form"
          [readonly]="dictNumber ? true : false"
          [data]="users$"
          (fetchItems)="getUsers($event)"
          bindLabel="userAndName"
          control="usuario"
          [searchOnInit]="true"
          [showTooltip]="true"
          termMaxLength="30"
          [labelTemplate]="userLabel"
          [optionTemplate]="userOption">
        </ngx-select>
        <ng-template #userLabel let-item="item">
          {{ item.id + ' - ' + item.name }}
        </ng-template>
        <ng-template #userOption let-item="item">
          <div [title]="item.id + '-' + item.name">
            {{ item.id + ' - ' + item.name }}
          </div>
        </ng-template>
      </form-field>

      <form-field
        [control]="form.get('clave')"
        class="col-md-6"
        *ngIf="!isReceptionStrategies && !isConsolidated">
        <ngx-select
          [form]="form"
          [searchOnInit]="true"
          control="clave"
          label="Clave Asunto"
          [data]="affairName"
          (fetchItems)="getSubjects($event)"
          className="scroll-line"
          bindLabel="description">
        </ngx-select>
      </form-field>
    </div>

    <div class="row pt-3" *ngIf="!isReceptionStrategies && !isConsolidated">
      <form-field [control]="form.get('transference')" class="col-md-4">
        <ngx-select
          [searchOnInit]="true"
          (fetchItems)="getTransference($event)"
          [data]="transference"
          [form]="form"
          bindLabel="nameTransferent"
          label="Transferente"
          control="transference">
        </ngx-select>
      </form-field>

      <form-field [control]="form.get('station')" class="col-md-4">
        <ngx-select
          [searchOnInit]="true"
          (fetchItems)="getStation($event)"
          [data]="station"
          [form]="form"
          bindLabel="stationName"
          label="Emisora"
          control="station">
        </ngx-select>
      </form-field>

      <form-field [control]="form.get('authority')" class="col-md-4">
        <ngx-select
          [searchOnInit]="true"
          (fetchItems)="getAuthority($event)"
          [data]="authority"
          [form]="form"
          bindLabel="authorityName"
          label="Autoridad"
          control="authority">
        </ngx-select>
      </form-field>
    </div>

    <div footer>
      <div class="d-flex justify-content-center">
        <div class="m-3">
          <button
            type="button"
            [disabled]="form.invalid"
            class="btn btn-primary active btn-sm">
            Consulta <i class="bx bx-search-alt bx-sm float-icon"></i>
          </button>
        </div>
        <div class="m-3">
          <button
            type="button"
            class="btn btn-danger active btn-sm"
            (click)="cleanForm()">
            Limpiar <i class="fas fa-eraser bx-sm float-icon"></i>
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
