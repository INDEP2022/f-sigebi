<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">BIENES EN PROCESO DE VALIDACI&Oacute;N EXT&#95;DOM</h5>
  </div>

  <div body>
    <div class="row">
      <div
        class="col-sm-12 col-12 col-md-12 col-lg-12 p-2 mb-5 p-5"
        *ngIf="loading">
        <div class="d-flex justify-content-center">
          <div class="d-flex justify-content-center">
            <div class="loader"></div>
            <h6 class="loader-msg pt-3">Cargando... por favor espere...</h6>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-12 col-md-12 col-lg-12 p-2">
        <!-- FORM Expediente -->
        <div class="card">
          <form [formGroup]="form" class="container-fluid form-material p-0">
            <div class="card-body">
              <div class="row">
                <form-field
                  class="col-12 col-sm-12 col-md-3 p-2"
                  [control]="form.get('wheelNumber')"
                  label="No&#46; Volante">
                  <input class="form-control" formControlName="wheelNumber" />
                </form-field>
                <form-field
                  class="col-12 col-sm-12 col-md-3 p-2"
                  [control]="form.get('expedientNumber')"
                  label="No&#46; Expediente">
                  <input
                    class="form-control"
                    formControlName="expedientNumber" />
                </form-field>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <button
                    type="button"
                    [disabled]="loading"
                    class="btn btn-primary btn-sm active"
                    (click)="getNotificationData()">
                    Buscar
                    <i class="bx bx-search-alt bx-sm float-icon"></i>
                  </button>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-12 col-12 col-md-2 p-2">
                  <form-field
                    [control]="form.get('receiptDate')"
                    label="Fecha Recepci&oacute;n">
                    <input
                      class="form-control"
                      formControlName="receiptDate"
                      bsDatepicker />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('expedientTransferenceNumber')"
                    label="No&#46; Expediente Transferente">
                    <input
                      class="form-control"
                      formControlName="expedientTransferenceNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('officeExternalKey')"
                    label="Cve&#46; Oficio Externo">
                    <input
                      class="form-control"
                      formControlName="officeExternalKey" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-2 p-2">
                  <form-field
                    [control]="form.get('externalOfficeDate')"
                    label="Fecha Oficio Externo">
                    <input
                      class="form-control"
                      formControlName="externalOfficeDate"
                      bsDatepicker />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('externalRemitter')"
                    label="Remitente Externo">
                    <input
                      class="form-control"
                      formControlName="externalRemitter" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('protectionKey')"
                    label="Cve&#46; Amparo">
                    <input
                      class="form-control"
                      formControlName="protectionKey" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('touchPenaltyKey')"
                    label="Cve&#46; Toca Penal">
                    <input
                      class="form-control"
                      formControlName="touchPenaltyKey" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('circumstantialRecord')"
                    label="Acta Circunstanciada">
                    <input
                      class="form-control"
                      formControlName="circumstantialRecord" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('preliminaryInquiry')"
                    label="Averiguaci&oacute;n Previa">
                    <input
                      class="form-control"
                      formControlName="preliminaryInquiry" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-4 p-2">
                  <form-field
                    [control]="form.get('criminalCase')"
                    label="Causa Penal">
                    <input
                      class="form-control"
                      formControlName="criminalCase" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <ngx-select
                    [data]="selectAsunto"
                    bindLabel="name"
                    label="Autoriza Dictaminaci&oacute;n"
                    value="id"
                    (fetchItems)="getAffair($event)"
                    [form]="form"
                    [showTooltip]="true"
                    [searchOnInit]="true"
                    termMaxLength="80"
                    control="affairKey"></ngx-select>
                  <!-- <form-field [control]="form.get('asunto')" label="Asunto">
                    <input class="form-control" formControlName="asunto" />
                  </form-field> -->
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('indiciadoNumber')"
                    label="Indiciado">
                    <input
                      class="form-control"
                      formControlName="indiciadoNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('minpubNumber')"
                    label="Ministerio P&uacute;blico">
                    <input
                      class="form-control"
                      formControlName="minpubNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('courtNumber')"
                    label="Juzgado">
                    <input class="form-control" formControlName="courtNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('delegationNumber')"
                    label="Delegaci&oacute;n">
                    <input
                      class="form-control"
                      formControlName="delegationNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('entFedKey')"
                    label="Entidad Federativa">
                    <input class="form-control" formControlName="entFedKey" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field [control]="form.get('cityNumber')" label="Ciudad">
                    <input class="form-control" formControlName="cityNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('transference')"
                    label="Transferente">
                    <input
                      class="form-control"
                      formControlName="transference" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('stationNumber')"
                    label="Emisora">
                    <input
                      class="form-control"
                      formControlName="stationNumber" />
                  </form-field>
                </div>
                <div class="col-sm-12 col-12 col-md-3 p-2">
                  <form-field
                    [control]="form.get('authority')"
                    label="Autoridad">
                    <input class="form-control" formControlName="authority" />
                  </form-field>
                </div>
              </div>
            </div>
          </form>
        </div>
        <!-- FORM Expediente -->
      </div>
    </div>
    <br />
    <!-- tabla Bienes -->
    <div class="row w-100">
      <div class="col-sm-12 col-12 col-md-12 col-lg-12 p-2">
        <ng2-smart-table
          [attr.class]="'table-bordered'"
          [settings]="tableSettings"
          [source]="dataTable"></ng2-smart-table>
      </div>
      <div class="col-sm-12 col-12 col-md-12 col-lg-12 p-2 text-center">
        <div class="form-group">
          <button
            type="button"
            class="btn btn-primary btn-sm active m-3"
            (click)="btnAgregar()">
            <i class="bx bxs-down-arrow-circle bx-md"></i>
          </button>
          <button
            type="button"
            class="btn btn-danger btn-sm active m-3"
            (click)="btnEliminar()">
            <i class="bx bxs-up-arrow-circle bx-md"></i>
          </button>
        </div>
      </div>
      <div class="col-sm-12 col-12 col-md-12 col-lg-12 p-2">
        <ng2-smart-table
          [attr.class]="'table-bordered'"
          [settings]="tableSettings2"
          [source]="dataTable2"></ng2-smart-table>
      </div>
    </div>
    <!-- tabla Bienes -->

    <div class="row pt-2">
      <div class="col-sm-12 col-12 col-md-4">
        <form [formGroup]="formEscaneo" class="form-material">
          <div class="row w-100">
            <div class="col-sm-12 col-12 col-md-12 p-2">
              <form-field
                [control]="formEscaneo.get('folioEscaneo')"
                label="Folio Escaneo">
                <input class="form-control" formControlName="folioEscaneo" />
              </form-field>
            </div>
          </div>
        </form>
      </div>
      <div class="col-sm-12 col-12 col-md-8 text-center">
        <div class="form-group">
          <button
            class="btn btn-primary btn-sm active m-3"
            (click)="btnEjecutarCambios()">
            Ejecutar Cambios
          </button>
          <button
            class="btn btn-info btn-sm active m-3"
            (click)="btnConsultarHistorico()">
            Consultar Hist&oacute;rico
          </button>
        </div>
      </div>
    </div>
  </div>
</app-card>

<app-card [header]="true" *ngIf="listadoHistorico == true">
  <div class="ch-content" header>
    <h5 class="title">Hist&oacute;rico Bienes Aseg&#95;Ext&#95;Dom</h5>
  </div>

  <div body>
    <div class="row w-100">
      <div class="col-sm-12 col-12 col-md-12 p-2">
        <ng2-smart-table
          [attr.class]="'table-bordered'"
          [settings]="tableSettingsHistorico"
          [source]="dataTableHistorico"></ng2-smart-table>
      </div>
      <div class="col-sm-12 col-12 col-md-6 p-2">
        <span class="m-2">Estatus</span>
        <span class="badge bagde-3 bg-info m-2">Sin Liberar</span>
        <span class="badge primary-3 bg-warning m-2">Liberados</span>
      </div>
      <div class="col-sm-12 col-12 col-md-6 text-right p-2">
        <div class="form-group">
          <button class="btn btn-danger btn-sm active m-3" (click)="btnSalir()">
            Cerrar Consulta Hist&oacute;rico
          </button>
        </div>
      </div>
    </div>
  </div>
</app-card>
