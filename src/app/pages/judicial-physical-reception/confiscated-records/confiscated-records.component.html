<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Actas de Entrega Recepci&oacute;n</h5>
  </div>

  <div body>
    <form class="form-material" [formGroup]="form">
      <div class="row">
        <div class="col-md-4">
          <div class="row">
            <div class="col-md-9 d-inline-flex">
              <form-field [control]="form.get('expediente')" label="Expediente">
                <input
                  (ngModelChange)="
                    toggleByLength('expedient-number', 'expediente')
                  "
                  [min]="0"
                  type="number"
                  [class]="blockExpedient ? 'disabled' : ''"
                  class="form-control"
                  formControlName="expediente" />
              </form-field>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="row">
            <div class="col-md-9">
              <button
                id="expedient-number"
                class="btn btn-primary btn-sm disabled active"
                (click)="goodsByExpediente()">
                Buscar
              </button>
              <span class="ml-3">{{ statusProceeding }}</span>
            </div>
          </div>
        </div>
        <div *ngIf="navigateProceedings" class="col-md-4">
          <div class="row">
            <div class="col-md-9">
              <button
                id="expedient-number"
                [disabled]="!prevProce"
                class="btn btn-secondary btn-sm active mr-2"
                (click)="prevProceeding()">
                Anterior
              </button>
              <button
                id="expedient-number"
                class="btn btn-secondary btn-sm active"
                [disabled]="!nextProce"
                (click)="nextProceeding()">
                Siguiente
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="row mb-3 mt-3">
        <div class="col-md-4"></div>
        <div class="col-md-4">
          <div class="row">
            <form-field
              [control]="form.get('averPrev')"
              label="Averiguaci&oacute;n Previa">
              <input
                type="string"
                class="form-control"
                formControlName="averPrev" />
            </form-field>
          </div>
        </div>
        <div class="col-md-4">
          <div class="row">
            <form-field [control]="form.get('causaPenal')" label="Causa Penal">
              <input
                type="string"
                class="form-control"
                formControlName="causaPenal" />
            </form-field>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="col">
              <form-field [control]="form.get('acta')">
                <ngx-select
                  id="acta"
                  control="acta"
                  [class]="initialdisabled ? 'disabled' : ''"
                  label="Acta 1"
                  bindLabel="records"
                  [data]="records"
                  [searchable]="false"
                  [form]="form"></ngx-select>
              </form-field>
            </div>

            <div class="col-md-2">
              <form-field [control]="form.get('transfer')">
                <ngx-select
                  id="transfer"
                  control="transfer"
                  [class]="initialdisabled ? 'disabled' : ''"
                  label="Transfer"
                  bindLabel="transferentkey"
                  [searchable]="false"
                  [data]="transferSelect"
                  [form]="form"></ngx-select>
              </form-field>
            </div>

            <div class="col">
              <form-field [control]="form.get('ident')" label="Ident">
                <input
                  type="text"
                  class="form-control disabled"
                  formControlName="ident" />
              </form-field>
            </div>

            <div class="col">
              <form-field [control]="form.get('recibe')">
                <ngx-select
                  (fetchItems)="getRecibe($event)"
                  control="recibe"
                  [class]="initialdisabled ? 'disabled' : ''"
                  label="Recibe"
                  bindLabel="delegation"
                  ngbTooltip="Prueba"
                  [data]="recibeSelect"
                  [form]="form"></ngx-select>
              </form-field>
            </div>

            <div class="col">
              <form-field [control]="form.get('admin')">
                <ngx-select
                  (fetchItems)="getAdmin($event)"
                  [class]="initialdisabled ? 'disabled' : ''"
                  control="admin"
                  label="Admin"
                  bindLabel="delegation"
                  [data]="adminSelect"
                  [form]="form"></ngx-select>
                <!--       <input
                  type="text"
                  class="form-control"
                  formControlName="admin"
                  (ngModelChange)="fillActTwo()" /> -->
              </form-field>
            </div>

            <div class="col">
              <form-field [control]="form.get('folio')" label="Folio">
                <input
                  type="number"
                  class="form-control"
                  [class]="initialdisabled ? 'disabled' : ''"
                  min="0"
                  [max-length]="5"
                  formControlName="folio" />
              </form-field>
            </div>
            <div class="col">
              <form-field [control]="form.get('year')" label="A&ntilde;o">
                <input
                  type="number"
                  class="form-control disabled"
                  formControlName="year" />
              </form-field>
            </div>
            <div class="col">
              <form-field [control]="form.get('mes')" label="Mes">
                <input
                  type="number"
                  class="form-control disabled"
                  formControlName="mes" />
              </form-field>
            </div>
          </div>
        </div>
      </div>
      <hr class="row" />
      <div class="row">
        <div class="col-md-6">
          <div class="row">
            <form-field [control]="form.get('acta2')" label="Acta 2">
              <input
                type="text"
                class="form-control disabled"
                formControlName="acta2"
                (ngModelChange)="searchKeyProceeding()" />
            </form-field>
          </div>

          <div class="row pt-4">
            <div class="col-md-9">
              <form-field
                [control]="form.get('direccion')"
                label="Direcci&oacute;n">
                <textarea
                  rows="2"
                  class="form-control"
                  [maxlength]="1000"
                  [class]="!isEnableDireccion ? 'disabled' : ''"
                  formControlName="direccion"></textarea>
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <form-field [control]="form.get('entrega')" label="Entrega">
                <input
                  type="text"
                  class="form-control"
                  [maxlength]="100"
                  [class]="!isEnableEntrega ? 'disabled' : ''"
                  formControlName="entrega" />
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <form-field
                [control]="form.get('fecElabRec')"
                label="Fecha Elaboraci&oacute;n Recibo">
                <input
                  bsDatepicker
                  class="form-control"
                  [maxlength]="10"
                  [class]="!isEnablefecElabRec ? 'disabled' : ''"
                  formControlName="fecElabRec" />
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <form-field
                [control]="form.get('fecEntBien')"
                label="Fecha Entrega de Bienes">
                <input
                  bsDatepicker
                  class="form-control"
                  [maxlength]="10"
                  [class]="!isEnablefecElabRec ? 'disabled' : ''"
                  formControlName="fecEntBien" />
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-5">
              <form-field
                [control]="form.get('folioEscaneo')"
                label="Folio de Escaneo">
                <input
                  type="number"
                  class="form-control"
                  formControlName="folioEscaneo"
                  maxlength="15" />
              </form-field>
            </div>

            <div class="col-md-4 pt-3">
              <button
                class="btn btn-primary btn-sm active"
                type="button"
                size="small"
                (click)="replicateFolio()">
                Replicar Folio
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group row">
            <div class="col-md-4">
              <form-field
                [control]="form.get('fecElab')"
                label="Fecha Elaboraci&oacute;n">
                <input
                  (ngModelChange)="verifyDateAndFill()"
                  bsDatepicker
                  class="form-control"
                  [maxlength]="10"
                  [class]="!isEnablefecElab ? 'disabled' : ''"
                  [minDate]="minDateFecElab"
                  formControlName="fecElab" />
              </form-field>
            </div>

            <div *ngIf="showFecReception" class="col-md-4">
              <form-field
                [control]="form.get('fecReception')"
                label="Fecha Recepci&oacute;n F&iacute;sica">
                <input
                  bsDatepicker
                  class="form-control disabled"
                  formControlName="fecReception" />
              </form-field>
            </div>

            <div class="col-md-4">
              <form-field
                [control]="form.get('fecCaptura')"
                label="Fecha Captura">
                <input
                  bsDatepicker
                  class="form-control disabled"
                  formControlName="fecCaptura" />
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <form-field
                [control]="form.get('observaciones')"
                label="Observaciones">
                <textarea
                  rows="2"
                  class="form-control"
                  [maxlength]="1000"
                  [class]="!isEnableObservaciones ? 'disabled' : ''"
                  formControlName="observaciones"></textarea>
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <form-field [control]="form.get('recibe2')" label="Recibe">
                <input
                  type="text"
                  class="form-control"
                  [maxlength]="100"
                  [class]="!isEnableRecibe2 ? 'disabled' : ''"
                  formControlName="recibe2" />
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <form-field
                [control]="form.get('testigo')"
                label="Testigo de la Contr&#46;">
                <input
                  type="text"
                  [maxlength]="100"
                  [class]="!isEnableTestigo ? 'disabled' : ''"
                  class="form-control"
                  formControlName="testigo" />
              </form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <button
                type="button"
                [class]="btnCSSAct"
                class="btn btn-sm active mr-2 ml-2"
                (click)="toggleActaBtn()"
                size="small">
                {{ labelActa }}
              </button>
              <a
                [routerLink]="['partialization']"
                class="my-1 mx-2 btn btn-warning active btn-sm"
                size="small"
                (click)="goParcializacion()"
                >Parcializaci&oacute;n
              </a>

              <button
                type="button"
                class="my-1 mx-2 btn btn-danger active btn-sm"
                (click)="deleteProceeding()">
                Eliminar Acta
              </button>
              <button
                type="button"
                class="my-1 mx-2 btn btn-secondary active btn-sm"
                (click)="goCargaMasiva()">
                Carga Masiva
              </button>
            </div>
          </div>
        </div>
      </div>

      <hr class="row" />
      <div class="row pt-2 scroll-table">
        <ng2-smart-table
          class="col-md-12"
          [settings]="settings1"
          [source]="dataGoods"
          (userRowSelect)="selectRow($event)"
          (rowDeselect)="deselectRow()"></ng2-smart-table>
      </div>
      <hr class="row" />
      <div class="row">
        <div class="d-flex justify-content-center">
          <form-field class="col-md-3" [control]="form.get('estatusPrueba')">
            <input
              type="text"
              class="form-control"
              [readOnly]="true"
              formControlName="estatusPrueba" />
          </form-field>

          <p class="pt-4">
            <span class="text-success mr-5"
              ><i class="fa fa-square"></i>Disponibles</span
            >
            <span class="text-danger"
              ><i class="fa fa-square"></i>No disponibles</span
            >
          </p>
        </div>
      </div>

      <div class="row pt-2">
        <div class="col-md-12 text-center">
          <button
            type="button"
            class="mx-2 btn btn-secondary btn-sm active"
            [disabled]="!dataGoodAct"
            (click)="deleteGood()">
            <i class="fa fa-angle-up"></i>
          </button>
          <button
            type="button"
            class="mx-2 btn btn-secondary btn-sm active"
            [disabled]="!act2Valid"
            (click)="addGood()">
            <i class="fa fa-angle-down"></i>
          </button>
        </div>
      </div>
      <hr class="row" />
      <div class="row pt-2 scroll-table">
        <ng2-smart-table
          class="col-md-12"
          [settings]="settings2"
          [source]="dataGoodAct"
          (userRowSelect)="selectRowGoodActa($event)"
          (rowDeselect)="deselectRowGoodActa()"></ng2-smart-table>
      </div>
      <hr class="row" />
      <div class="row">
        <div class="d-flex justify-content-center">
          <form-field class="col-md-3" [control]="form.get('edoFisico')">
            <ngx-select
              label="Edo.FÃ­sico"
              bindLabel="description"
              [class]="!isSelectGood ? 'disabled' : ''"
              control="edoFisico"
              [searchable]="false"
              [form]="form"
              [data]="dataEdoFisico"></ngx-select>
          </form-field>
          <form-field [control]="form.get('indEdoFisico')">
            <div class="form-check d-flex align-items-center">
              <label class="form-check-label pr-5 pl-5" for="flexCheckChecked">
                Requerido
              </label>
              <input
                class="form-check-input mr-3 ml-3 disabled"
                type="checkbox"
                formControlName="indEdoFisico"
                id="flexCheckDefault" />
            </div>
            <!-- <form-check label="Requerido" for="label">
              <input
                id="label"
                type="checkbox"
                formControlName="indEdoFisico" />
            </form-check> -->
          </form-field>
          <form-field
            class="col-md-3"
            [control]="form.get('estatusBienActa')"
            label="Estatus bien">
            <input
              type="text"
              class="form-control"
              (dblclick)="goToHistorico()"
              [readOnly]="true"
              formControlName="estatusBienActa" />
          </form-field>
        </div>
      </div>

      <hr class="row" />
      <div class="row">
        <div class="col-md-6">
          <div class="row" *ngIf="isAlmacen">
            <div class="col-md-9">
              <form-field [control]="form.get('almacen')">
                <ngx-select
                  (fetchItems)="getWarehouses($event)"
                  label="Almac&eacute;n"
                  bindLabel="description"
                  control="almacen"
                  [form]="form"
                  [data]="warehouseSelect"></ngx-select>
              </form-field>
            </div>
          </div>

          <div class="row" *ngIf="isBoveda">
            <div class="col-md-9">
              <form-field [control]="form.get('boveda')">
                <ngx-select
                  (fetchItems)="getSafeVault($event)"
                  control="boveda"
                  bindLabel="description"
                  label="B&oacute;veda"
                  [form]="form"
                  [data]="vaultSelect"></ngx-select>
              </form-field>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <button
            type="button"
            size="small"
            class="mx-2 my-1"
            (click)="openEdoFisico()">
            Espec&iacute;fica Edo&#46; F&iacute;sico
          </button>
          <button
            type="button"
            size="small"
            class="mx-2 my-1"
            (click)="applyWarehouseSafe()">
            Aplica Alm&#46;&#47;Bov&#46;
          </button>
          <!--  <a
            [routerLink]="['flat-file']"
            type="button"
            nbButton
            size="small"
            class="mx-2 my-1"
            >Exportar Datos</a
          > -->
        </div>
      </div>
    </form>
  </div>
</app-card>
