<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Datos complementarios Art&#46; 6&#44; 7 y 4</h5>
  </div>

  <div body>
    <form class="form-material" [formGroup]="form">
      <div class="row">
        <div class="col-md-4">
          <form-field [control]="form.get('expediente')" label="Expediente">
            <input
              (ngModelChange)="
                toggleButton('expediente', 'search-goods-expedient')
              "
              type="number"
              class="form-control"
              formControlName="expediente" />
          </form-field>
        </div>

        <div class="col-md-4">
          <button
            id="search-goods-expedient"
            class="btn btn-primary btn-sm active disabled w-50"
            (click)="getGoodsByExpedient()">
            Buscar
          </button>
          <!--  <form-field
            [control]="form.get('fechaFe')"
            label="Fecha de f&eacute; ministerial">
            <input
              bsDatepicker
              class="form-control"
              formControlName="fechaFe" />
          </form-field> -->
        </div>
      </div>

      <div class="row">
        <div class="col-md-4">
          <table class="table table-responsive" style="max-height: 300px">
            <thead>
              <tr>
                <th>No Bien</th>
                <th>Descrici&oacute;n</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of dataGoods"
                (dblclick)="getGoodData(item.id)">
                <td>{{ item.id }}</td>
                <td>{{ item.description }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="col-md-8 md-tabs">
          <tabset>
            <tab heading="General">
              <div class="row">
                <div class="col-md-6">
                  <form-field
                    [control]="form.get('clasificacion')"
                    label="Clasificaci&oacute;n del bien">
                    <textarea
                      rows="5"
                      class="form-control"
                      formControlName="clasificacion">
                    </textarea>
                  </form-field>
                </div>
                <div class="col-md-6">
                  <form-field
                    [control]="form.get('remarks')"
                    label="Se&ntilde;alamientos del origen">
                    <textarea
                      rows="5"
                      class="form-control"
                      formControlName="remarks">
                    </textarea>
                  </form-field>
                </div>
              </div>
            </tab>

            <tab heading="Aval&uacute;o de Origen">
              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <form-field
                      [control]="form.get('importe')"
                      label="Importe por Valor">
                      <input
                        type="text"
                        class="form-control"
                        formControlName="importe" />
                    </form-field>
                  </div>

                  <div class="row">
                    <!-- <form-field [control]="form.get('moneda')" label="Moneda">
                      <input
                        type="text"
                        class="form-control"
                        formControlName="moneda" />
                    </form-field> -->
                    <form-field [control]="form.get('moneda')">
                      <ngx-select
                        (fetchItems)="getCurrency($event)"
                        label="Moneda"
                        bindLabel="otValue01"
                        control="moneda"
                        [form]="form"
                        [data]="currencySelect"></ngx-select>
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field
                      [control]="form.get('fechaVigencia')"
                      label="Fecha Vigencia">
                      <input
                        bsDatepicker
                        class="form-control"
                        formControlName="fechaVigencia" />
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field
                      [control]="form.get('fechaAvaluo')"
                      label="Fecha Aval&uacute;o">
                      <input
                        bsDatepicker
                        class="form-control"
                        formControlName="fechaAvaluo" />
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field [control]="form.get('perito')">
                      <ngx-select
                        (fetchItems)="getProeficients($event)"
                        label="Perito"
                        bindLabel="name"
                        control="perito"
                        [form]="form"
                        [data]="proeficientSelect"></ngx-select>
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field [control]="form.get('institucion')">
                      <ngx-select
                        (fetchItems)="getInstitutions($event)"
                        bindLabel="description"
                        label="Instituci&oacute;n"
                        control="institucion"
                        [form]="form"
                        [data]="institutionSelect"></ngx-select>
                    </form-field>
                  </div>
                </div>
              </div>
            </tab>

            <tab heading="Dictamen">
              <div class="row">
                <div class="col-md-6">
                  <div class="row">
                    <form-field
                      [control]="form.get('fechaDictamen')"
                      label="Fecha Dictamen">
                      <input
                        bsDatepicker
                        class="form-control"
                        formControlName="fechaDictamen" />
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field
                      [control]="form.get('dictamenPerito')"
                      label="Dictamen Perito">
                      <ngx-select
                        control="dictamenPerito"
                        [form]="form"
                        [data]="itemsSelect"></ngx-select>
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field
                      [control]="form.get('dictamenInstitucion')"
                      label="Dictamen Instituci&oacute;n">
                      <textarea
                        rows="5"
                        class="form-control mr-3"
                        formControlName="dictamenInstitucion"></textarea>
                    </form-field>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="row">
                    <form-field
                      [control]="form.get('dictamenPerenidad')"
                      label="Dictamen Perenidad">
                      <textarea
                        rows="5"
                        class="form-control mr-3"
                        formControlName="dictamenPerenidad"></textarea>
                    </form-field>
                  </div>
                </div>
              </div>
            </tab>

            <tab heading="Primera Notificaci&oacute;n de Abandono">
              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <div class="col-md-9">
                      <form-field
                        [control]="form.get('fechaAseg')"
                        label="Fecha Aseg">
                        <input
                          bsDatepicker
                          class="form-control"
                          formControlName="fechaAseg" />
                      </form-field>
                    </div>
                  </div>

                  <div class="row">
                    <form-field
                      [control]="form.get('notificado')"
                      label="Notificado">
                      <textarea
                        rows="5"
                        class="form-control mr-3"
                        formControlName="notificado"></textarea>
                    </form-field>
                  </div>

                  <div class="row">
                    <form-field [control]="form.get('lugar')" label="Lugar">
                      <textarea
                        rows="5"
                        class="form-control mr-3"
                        formControlName="lugar"></textarea>
                    </form-field>
                  </div>
                </div>
              </div>
            </tab>
          </tabset>
          <div class="col-md-12 mt-4 text-center">
            <button class="my-1 mx-2 btn btn-primary active disabled btn-sm">
              Actualizar
            </button>
            <button class="my-1 mx-2 btn btn-danger active btn-sm">
              Cancelar
            </button>
          </div>
        </div>
      </div>
      <span>{{ goodSelected }}</span>
    </form>
  </div>
</app-card>
