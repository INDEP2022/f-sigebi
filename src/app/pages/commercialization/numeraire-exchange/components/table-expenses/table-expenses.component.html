<table class="table form-material">
  <thead>
    <tr>
      <th>Registro</th>
      <th class="w-50">Descripción</th>
      <th>Importe</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="isOpenAddExpense" [formGroup]="formExpenseAdd">
      <td>
        <form-field [control]="formExpenseAdd.get('register')">
          <input
            type="text"
            formControlName="register"
            class="form-custom"
            placeholder="Registro" />
        </form-field>
      </td>
      <td class="w-50">
        <form-field [control]="formExpenseAdd.get('description')">
          <ng-select
            class="form-custom"
            placeholder="Descripción"
            formControlName="description">
            <ng-option [value]="type.id" *ngFor="let type of expenseTypeTest">{{
              type.description
            }}</ng-option>
          </ng-select>
        </form-field>
      </td>
      <td>
        <form-field [control]="formExpenseAdd.get('import')">
          <input
            placeholder="Importe"
            type="text"
            formControlName="import"
            class="form-custom" />
        </form-field>
      </td>
      <td>
        <div class="d-flex">
          <button
            (click)="addExpense()"
            class="bg-info border-0 btn-sm text-white">
            Guardar <i class="fas fa-plus"></i>
          </button>
          <button
            (click)="isOpenAddExpense = false"
            class="bg-danger border-0 btn-sm text-white ml-2">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </td>
    </tr>
    <tr
      *ngFor="let formExpense of formExpenses.controls; let i = index"
      [formGroup]="formExpense">
      <ng-container *ngIf="formExpense.disabled; else editTemplate">
        <td>
          <span>{{ formExpense.get('register').value }}</span>
        </td>
        <td class="w-50">
          <span>{{ formExpense.get('descriptionName').value }}</span>
        </td>
        <td>
          <span>{{ formExpense.get('import').value }}</span>
        </td>
        <td>
          <button
            (click)="openEditExpense(i)"
            class="btn-sm bg-info text-white border-0">
            <i class="fas fa-pen"></i>
          </button>
          <button
            (click)="removeExpense(i)"
            class="btn-sm bg-danger text-white ml-2 border-0">
            <i class="far fa-trash-alt"></i>
          </button>
        </td>
      </ng-container>
      <ng-template #editTemplate>
        <td>
          <form-field [control]="formExpense.get('register')">
            <input
              class="form-custom"
              label="Registro"
              type="text"
              formControlName="register" />
          </form-field>
        </td>
        <td class="w-50">
          <form-field [control]="formExpense.get('description')">
            <ng-select formControlName="description" class="form-custom">
              <ng-option
                placeholder="Descripción"
                [value]="type.id"
                *ngFor="let type of expenseTypeTest"
                >{{ type.description }}</ng-option
              >
            </ng-select>
          </form-field>
        </td>
        <td>
          <form-field [control]="formExpense.get('import')">
            <input
              class="form-custom"
              placeholder="Importe"
              type="text"
              formControlName="import" />
          </form-field>
        </td>
        <td>
          <button
            (click)="updateExpense(i)"
            class="bg-info border-0 btn-sm text-white">
            Editar <i class="fas fa-plus"></i>
          </button>
          <button
            (click)="closeEditExpense(i)"
            class="bg-danger border-0 btn-sm text-white ml-2">
            <i class="fas fa-times"></i>
          </button>
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>
