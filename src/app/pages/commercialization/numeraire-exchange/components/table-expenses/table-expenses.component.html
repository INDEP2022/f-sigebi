<div class="d-flex flex-row-reverse mb-4 mt-0">
  <div class="">
    <button
      class="btn btn-sm btn-success active font-size-14"
      (click)="openCreateOrEditExpense()">
      Agregar Registro
    </button>
  </div>
</div>
<table class="table form-material">
  <thead>
    <tr>
      <th>Registro</th>
      <th class="w-50">Descripción</th>
      <th>Importe</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let expense of expenses">
      <td>
        {{ expense.register }}
      </td>
      <td class="w-50">
        {{ expense.descriptionName }}
      </td>
      <td>
        {{ expense.import }}
      </td>
      <td>
        <button
          (click)="openCreateOrEditExpense(expense.register)"
          class="btn-outline-info border-0 btn-sm">
          <i class="fas fa-pen"></i>
        </button>
        <button
          (click)="removeExpense(expense.register)"
          class="btn-outline-danger border-0 btn-sm ml-2">
          <i class="fas fa-times"></i>
        </button>
      </td>
    </tr>
    <!-- <tr *ngIf="isOpenAddExpense" [formGroup]="formExpenseAdd">
      <td>
        <form-field [control]="formExpenseAdd.get('register')">
          <input
            type="text"
            formControlName="register"
            class="form-custom"
            placeholder="Registro" />
        </form-field>
      </td>
      <td class="w-50">
        <form-field [control]="formExpenseAdd.get('description')">
          <ng-select
            class="form-custom"
            placeholder="Descripción"
            (change)="changeExpenseType($event, formExpenseAdd)">
            <ng-option [value]="type" *ngFor="let type of expenseType">{{
              type.description
            }}</ng-option>
          </ng-select>
        </form-field>
      </td>
      <td>
        <form-field [control]="formExpenseAdd.get('import')">
          <input
            placeholder="Importe"
            type="text"
            formControlName="import"
            class="form-custom" />
        </form-field>
      </td>
      <td>
        <div class="d-flex">
          <button
            (click)="addExpense()"
            class="bg-info border-0 btn-sm text-white">
            Guardar <i class="fas fa-plus"></i>
          </button>
          <button
            (click)="isOpenAddExpense = false"
            class="bg-danger border-0 btn-sm text-white ml-2">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </td>
    </tr> -->
    <!-- <tr
      *ngFor="let formExpense of formExpenses.controls; let i = index"
      [formGroup]="formExpense">
      <ng-container *ngIf="formExpense.disabled; else editTemplate">
        <td>
          <span>{{ formExpense.get('register').value }}</span>
        </td>
        <td class="w-50">
          <span>{{ formExpense.get('descriptionName').value }}</span>
        </td>
        <td>
          <span>{{ formExpense.get('import').value }}</span>
        </td>
        <td>
          <button
            (click)="openEditExpense(i)"
            class="btn-sm bg-info text-white border-0">
            <i class="fas fa-pen"></i>
          </button>
          <button
            (click)="removeExpense(i)"
            class="btn-sm bg-danger text-white ml-2 border-0">
            <i class="far fa-trash-alt"></i>
          </button>
        </td>
      </ng-container>
      <ng-template #editTemplate>
        <td>
          <form-field [control]="formExpense.get('register')">
            <input
              class="form-custom"
              label="Registro"
              type="text"
              formControlName="register" />
          </form-field>
        </td>
        <td class="w-50">
        </td>
        <td>
          <form-field [control]="formExpense.get('import')">
            <input
              class="form-custom"
              placeholder="Importe"
              type="text"
              formControlName="import" />
          </form-field>
        </td>
        <td>
          <button
            (click)="updateExpense(i)"
            class="bg-info border-0 btn-sm text-white">
            Editar <i class="fas fa-plus"></i>
          </button>
          <button
            (click)="closeEditExpense(i)"
            class="bg-danger border-0 btn-sm text-white ml-2">
            <i class="fas fa-times"></i>
          </button>
        </td>
      </ng-template>
    </tr> -->
  </tbody>
</table>

<ng-template #dialogExpense>
  <div class="modal-header">
    <h4 class="modal-title pull-left font-size-16">
      {{ registerEdit ? 'Editando Gasto' : 'Agregando Gasto' }}
    </h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="closeDialogExpense()">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body form-material" [formGroup]="form">
    <form-field [control]="form.get('register')" label="Registro">
      <input
        readonly
        type="text"
        formControlName="register"
        class="form-control" />
    </form-field>
    <form-field [control]="form.get('description')" label="Desripcion">
      <ng-select
        (change)="selectedExpenseType($event)"
        class="form-control"
        formControlName="description">
        <ng-option [value]="type.id" *ngFor="let type of expenseType">{{
          type.description
        }}</ng-option>
      </ng-select>
    </form-field>
    <form-field [control]="form.get('import')" label="Importe">
      <input type="number" formControlName="import" class="form-control" />
    </form-field>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-default btn-sm btn-success font-weight-bold shadow-none"
      (click)="saveExpense()">
      Guardar
      <i class="fas fa-paper-plane"></i>
    </button>
    <button
      type="button"
      class="bg-danger btn btn-sm font-weight-bold shadow-none text-white"
      (click)="closeDialogExpense()">
      Cerrar
      <i class="fas fa-times"></i>
    </button>
  </div>
</ng-template>
