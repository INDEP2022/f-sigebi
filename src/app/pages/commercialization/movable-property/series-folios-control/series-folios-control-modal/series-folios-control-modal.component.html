<app-modal>
  <div header>
    <h5 class="modal-title">{{ edit ? 'Editar' : 'Nuevo' }} {{ title }}</h5>
  </div>
  <div body>
    <form class="form-material" [formGroup]="form">
      <div class="row">
        <div class="col-md-2" *ngIf="edit">
          <form-field [control]="form.get('folioinvoiceId')" label="Id Folio">
            <input
              [readOnly]="true"
              type="text"
              class="form-control"
              formControlName="folioinvoiceId" />
          </form-field>
        </div>
        <div class="col-md-7">
          <form-field [control]="form.get('delegationNumber')">
            <ngx-select
              [data]="delegations"
              [searchOnInit]="false"
              (fetchItems)="getDelegation($event)"
              [form]="form"
              value="id"
              bindLabel="description"
              label="CoordinaciÃ³n"
              [control]="'delegationNumber'"
              [searchable]="false"
              [labelTemplate]="delg"
              [optionTemplate]="delgd">
            </ngx-select>
            <ng-template #delg let-item="item">
              {{ item.id }} - {{ item.description }}
            </ng-template>
            <ng-template #delgd let-item="item">
              <div [title]="item.id + '-' + item.description">
                {{ item.id }} - {{ item.description }}
              </div>
            </ng-template>
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('recordDate')" label="Fecha Registro">
            <input
              [ngClass]="{ 'not-press bg-gray': true }"
              formControlName="recordDate"
              class="form-control"
              bsDatepicker
              [readOnly]="true"
              [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" />
          </form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <form-field
            [control]="form.get('invoiceStart')"
            label="Folio Inicial">
            <input
              oninput="if(this.value.length > 11) this.value = this.value.slice(0, 11)"
              type="number"
              min="0"
              class="form-control"
              formControlName="invoiceStart" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('invoiceEnd')" label="Folio Final">
            <input
              oninput="if(this.value.length > 11) this.value = this.value.slice(0, 11)"
              type="number"
              min="0"
              class="form-control"
              formControlName="invoiceEnd" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('validity')" label="Validez">
            <input
              formControlName="validity"
              class="form-control"
              bsDatepicker
              [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('type')">
            <ngx-select
              [data]="types"
              [form]="form"
              value="value"
              bindLabel="label"
              label="Tipo"
              [control]="'type'"
              [searchable]="false">
            </ngx-select>
          </form-field>
        </div>
        <div class="col-md-3" *ngIf="edit">
          <form-field [control]="form.get('statusfactId')" label="Estatus">
            <input
              [readOnly]="true"
              type="text"
              class="form-control"
              formControlName="statusfactId" />
          </form-field>
        </div>
        <div class="col-md-3" *ngIf="edit">
          <form-field
            [control]="form.get('totalFolios')"
            label="Total de Folios">
            <input
              readonly
              type="number"
              min="0"
              class="form-control"
              formControlName="totalFolios" />
          </form-field>
        </div>
        <div class="col-md-3" *ngIf="edit">
          <form-field
            [control]="form.get('availableFolios')"
            label="Folios Disponibles">
            <input
              [readOnly]="true"
              type="text"
              class="form-control"
              formControlName="availableFolios" />
          </form-field>
        </div>
        <div class="col-md-3" *ngIf="edit">
          <form-field
            [control]="form.get('usedFolios')"
            label="Folio Utilizados">
            <input
              [readOnly]="true"
              type="text"
              class="form-control"
              formControlName="usedFolios" />
          </form-field>
        </div>
        <div class="col-md-4" *ngIf="edit">
          <form-field
            [control]="form.get('recordUser')"
            label="Usuario Registra">
            <input
              type="text"
              [readOnly]="true"
              class="form-control"
              formControlName="recordUser" />
          </form-field>
        </div>
        <div class="col-md-3">
          <form-field [control]="form.get('series')" label="Serie">
            <input
              oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10)"
              type="text"
              class="form-control"
              formControlName="series" />
          </form-field>
        </div>
      </div>
    </form>
  </div>
  <div footer>
    <div class="d-flex justify-content-center">
      <div class="m-3">
        <confirm-button
          [disabled]="!form.valid"
          [btnSmall]="true"
          [loading]="loading"
          (click)="saveData()"></confirm-button>
      </div>
      <div class="m-3">
        <button
          type="button"
          class="btn btn-sm btn-danger active"
          (click)="close()">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</app-modal>
