<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">eventos relacionados</h5>
  </div>
  <div body>
    <div class="row">
      <form class="form-material mb-0" [formGroup]="eventForm">
        <div class="row d-flex justify-content-center align-content-center">
          <div class="col-sm-12 col-md-4 mh-80">
            <!-- <div class="col-md-8">  -->
            <!-- <h5 class="font-size-14 mb-2 d-inline">Evento</h5> -->
            <!-- <ngx-select
              [form]="eventForm"
              [data]="eventItems"
              value="id"
              bindLabel="id"
              (fetchItems)="getEvents($event)"
              control="event">
            </ngx-select> -->
            <!-- <form-field [control]="eventForm.get('status')" label="Estado">
                <input type="text" formControlName="status" class="form-control" />
              </form-field>
              </div>
              <div class="col-md-4">
                <button type="button" class="btn btn-primary active btn-sm">
                  Buscar
                  <i class="bx bx-search-alt bx-sm float-icon"></i>
                </button>
              </div> -->
            <form-field [control]="eventForm.get('event')">
              <!-- <input
                formControlName="event"
                class="form-control"
                type="number" /> -->

              <ngx-select
                (fetchItems)="getEventsParent($event)"
                [searchOnInit]="true"
                [data]="events"
                [form]="eventForm"
                value="eventDadId"
                bindLabel="eventDadId"
                label="Evento Padre"
                control="event">
              </ngx-select>
            </form-field>
          </div>
          <div class="col-sm-12 col-md-2" style="margin-top: 0.5%">
            <button
              type="button"
              class="btn btn-primary active btn-sm"
              (click)="getEvents()"
              [disabled]="!eventForm.valid">
              Buscar<i class="bx bx-search-alt bx-sm float-icon"></i>
            </button>
          </div>
        </div>
        <br />
        <div
          class="row mt-3 d-flex justify-content-center align-content-center"
          *ngIf="selectedEvent != null"
          style="margin-top: 5%"
          @OnEventSelected>
          <div
            class="col-sm-6 col-md-3"
            *ngIf="selectedEvent != null"
            @OnEventSelected>
            <!-- <div class="ms-4">
                            <i class="bx bx-edit text-success me-2 d-inline float-icon"></i>
                            <h5 class="font-size-14 mb-2 d-inline">Proceso</h5>
                            <p class="text-muted">{{ selectedEvent.process }}</p>
                          </div> -->
            <form-field [control]="eventForm.get('process')" label="Proceso">
              <input
                type="text"
                formControlName="process"
                class="form-control"
                readOnly />
            </form-field>
          </div>
          <div
            class="col-sm-12 col-md-2"
            *ngIf="selectedEvent != null"
            @OnEventSelected>
            <!-- <i
                            class="bx bx-info-circle text-success me-2 d-inline float-icon"></i>
                          <h5 class="font-size-14 mb-2 d-inline">Estatus</h5>
                          <p class="text-muted">
                            {{ selectedEvent.status }}
                          </p> -->
            <form-field [control]="eventForm.get('status')" label="Estado">
              <input
                type="text"
                formControlName="status"
                class="form-control"
                readOnly />
            </form-field>
          </div>
          <div class="col-sm-12 col-md-3">
            <!-- <i
              class="bx bx-tag bx-rotate-180l text-success me-2 d-inline float-icon"></i>
            <h5 class="font-size-14 mb-2 d-inline">Tipo de Evento</h5>
            <p class="text-muted">
              {{ selectedEvent.type }}
            </p> -->
            <form-field
              [control]="eventForm.get('typeEvent')"
              label="Tipo de Evento">
              <input
                type="text"
                formControlName="typeEvent"
                class="form-control"
                readOnly />
            </form-field>
          </div>
          <div class="col-sm-12 col-md-3">
            <!-- <i
              class="bx bx-buildings text-success me-2 d-inline float-icon"></i>
            <h5 class="font-size-14 mb-2 d-inline">Direcci&oacute;n</h5>
            <p class="text-muted">
              {{ selectedEvent.direction }}
            </p> -->
            <form-field
              [control]="eventForm.get('direction')"
              label="Direcci&oacute;n">
              <input
                type="text"
                formControlName="direction"
                class="form-control"
                readOnly />
            </form-field>
          </div>
        </div>
        <br />
      </form>
      <div
        class="row d-flex justify-content-center align-content-center"
        *ngIf="selectedEvent != null"
        style="left: 1%"
        @OnEventSelected>
        <!-- <div class="row pe-0">
            <div class="col-sm-12 col-md-6">
              <div class="form-material">
                <search-bar [params]="params"></search-bar>
              </div>
            </div> 
            <div class="col-sm-12 col-md-12 pe-0">
              <div class="d-flex flex-row-reverse mb-4 mt-0">
                <div class="">
                  <button
                    class="btn btn-sm btn-success active font-size-14"
                    (click)="addRow()"
                    [disabled]="adding">
                    Agregar Registro
                  </button>
                  <button type="button" (click)="addRow()" tooltip="Nuevo" [disabled]="adding" containerClass="tooltip-style" class="btn btn-info btn-sm active ml-2 mr-2">
                    Nuevo <i class="bx bx-plus bx-sm float-icon"></i>
                  </button>
                </div>
              </div>
            </div>

          </div> -->

        <br />
        <div class="row">
          <div class="d-flex justify-content-end">
            <div class="ml-auto mb-3">
              <button
                class="btn btn-danger btn-sm active mr-3"
                (click)="clearall()">
                Limpiar <i class="fas fa-eraser"> </i>
              </button>
              <app-columns-select
                [(settings)]="relatedEventsSettings"></app-columns-select>
              <!--  -->
            </div>
            <!-- <div class="col-sm-12 col-md-1 mr-3">
              <button class="btn btn-danger btn-sm active" (click)="clearall()">
                Limpiar <i class="fas fa-eraser"> </i>
              </button>
            </div>
            <app-columns-select
              [(settings)]="relatedEventsSettings"></app-columns-select> -->
          </div>
        </div>
        <div class="row">
          <div [class]="loading ? 'table-loading' : ''">
            <ng2-smart-table
              [attr.class]="'table-bordered'"
              [settings]="relatedEventsSettings"
              [source]="relatedEventsDataLocal">
            </ng2-smart-table>
          </div>
          <app-pagination [params]="params" [totalItems]="totalItems">
          </app-pagination>
        </div>
      </div>
    </div></div
></app-card>
