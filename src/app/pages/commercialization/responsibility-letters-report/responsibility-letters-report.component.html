<app-card [header]="true" [footer]="true">
  <div class="ch-content" header>
    <div class="col-md-12">
      <h5 class="title">REPORTES DE CARTAS DE RESPONSABILIDAD</h5>
    </div>
  </div>

  <div body>
    <form [formGroup]="comerLibsForm" class="form-material">
      <app-card [header]="true" [footer]="true">
        <div class="ch-content" header>
          <div class="col-md-12">
            <h5 class="title">EVENTO, LOTE Y OFICIO DE LIBERACIÓN</h5>
          </div>
        </div>
        <div body>
          <div class="row">
            <div class="col-md-2 mt-3">
              <ngx-select
                [data]="selectDataEvent"
                bindLabel="id"
                label="Evento"
                value="id"
                (fetchItems)="getEventData($event)"
                (change)="changeEvent($event)"
                [form]="comerLibsForm"
                [showTooltip]="true"
                [searchOnInit]="true"
                termMaxLength="100"
                control="evento"></ngx-select>
            </div>
            <div class="col-md-4 mt-3">
              <form-field
                label="Descripción del Evento"
                [control]="comerLibsForm.get('evento_descripcion')">
                <textarea
                  cols="2"
                  rows="2"
                  type="text"
                  class="form-control"
                  formControlName="evento_descripcion"
                  readonly>
                </textarea>
              </form-field>
            </div>
            <div class="col-md-2 mt-3">
              <ngx-select
                [readonly]="!valLote"
                [data]="selectDataLote"
                bindLabel="idLot"
                label="Lote"
                value="idLot"
                (fetchItems)="getLoteData($event)"
                (change)="changeLote($event)"
                [form]="comerLibsForm"
                [showTooltip]="true"
                [searchOnInit]="true"
                termMaxLength="100"
                control="lote"></ngx-select>
            </div>
            <div class="col-md-4 mt-3">
              <form-field
                [control]="comerLibsForm.get('lote_descripcion')"
                label="Descripción del Lote">
                <textarea
                  cols="2"
                  rows="2"
                  type="text"
                  class="form-control"
                  formControlName="lote_descripcion"
                  readonly>
                </textarea>
              </form-field>
            </div>
            <div class="col-md-4 mt-3">
              <form-field [control]="comerLibsForm.get('oficio')">
                <ngx-select
                  [readonly]="!valOficio"
                  [data]="selectDataOficio"
                  bindLabel="id"
                  label="Oficio de Carta de Liberaci&oacute;n"
                  value="id"
                  (fetchItems)="getOficioData($event)"
                  (change)="changeOficio($event)"
                  [form]="comerLibsForm"
                  [showTooltip]="true"
                  [searchOnInit]="true"
                  termMaxLength="50"
                  control="oficio"></ngx-select>
              </form-field>
            </div>
            <div class="col-md-4 mt-3" #scrollContainer>
              <form-field
                [control]="comerLibsForm.get('factura')"
                label="No. Factura">
                <input
                  type="text"
                  maxlength="20"
                  class="form-control"
                  formControlName="factura"
                  readonly />
              </form-field>
            </div>
            <div class="col-md-4 mt-3">
              <form-field
                [control]="comerLibsForm.get('fechaFactura')"
                label="Fecha Factura">
                <input
                  [ngClass]="{ 'not-press bg-gray': true }"
                  bsDatepicker
                  class="form-control"
                  formControlName="fechaFactura"
                  readonly />
              </form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 text-center">
              <button
                type="button"
                class="btn btn-primary active btn-sm mr-3"
                (click)="searchComer()">
                Buscar
                <i class="bx bx-search-alt bx-sm float-icon"></i>
              </button>
              <button
                (click)="cleanForm()"
                type="button"
                class="btn btn-danger active btn-sm mr-3">
                Limpiar
                <i class="fa fa-eraser" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </app-card>
    </form>
    <app-card [header]="true" [footer]="true">
      <div class="ch-content" header>
        <div class="col-md-12">
          <h5 class="title">CARTA DE RESPONSABILIDAD</h5>
        </div>
      </div>
      <div body>
        <form [formGroup]="clientForm" class="form-material">
          <div class="row p-3">
            <div class="col-md-12 text-end justify-content-end mb-2">
              <confirm-button
                [className]="'btn-primary btn-sm mr-3'"
                [disabled]="!respForm.valid || loadingSave"
                [btnSmall]="true"
                [loading]="loadingSave"
                (confirm)="saveData()"></confirm-button>
            </div>
            <div class="col-md-6 mt-3">
              <form-field
                [control]="clientForm.get('adjudicatorio')"
                label="Adjudicatario">
                <input
                  type="text"
                  class="form-control"
                  formControlName="adjudicatorio"
                  readonly />
              </form-field>
            </div>
            <div class="col-md-6 mt-3">
              <form-field [control]="clientForm.get('rfc')" label="RFC">
                <input
                  #inputValue
                  type="text"
                  class="form-control"
                  formControlName="rfc"
                  maxlength="50"
                  readonly />
              </form-field>
            </div>
            <div class="col-md-8 mt-3">
              <div></div>
            </div>
            <div class="col-md-8 mt-3">
              <div>
                <form-field [control]="clientForm.get('calle')" label="Calle">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="calle"
                    maxlength="50"
                    readonly />
                </form-field>
              </div>
            </div>
            <div class="col-md-4 mt-3">
              <div>
                <form-field
                  [control]="clientForm.get('colonia')"
                  label="Colonia">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="colonia"
                    maxlength="50"
                    readonly />
                </form-field>
              </div>
            </div>
            <div class="col-md-5 mt-3">
              <div>
                <form-field
                  [control]="clientForm.get('delegacion')"
                  label="Delegaci&oacute;n">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="delegacion"
                    maxlength="50"
                    readonly />
                </form-field>
              </div>
            </div>
            <div class="col-md-5 mt-3">
              <div>
                <form-field [control]="clientForm.get('estado')" label="Estado">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="estado"
                    maxlength="50"
                    readonly />
                </form-field>
              </div>
            </div>
            <div class="col-md-2 mt-3">
              <div>
                <form-field [control]="clientForm.get('cp')" label="CP">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="cp"
                    maxlength="50"
                    readonly />
                </form-field>
              </div>
            </div>
          </div>
        </form>
        <form [formGroup]="respForm" class="form-material">
          <div class="row p-3">
            <div class="col-12">
              <form-field
                [control]="respForm.get('paragraph1')"
                label="P&aacute;rrafo 1">
                <textarea
                  maxlength="500"
                  class="form-control text-justify"
                  formControlName="paragraph1"
                  rows="5"></textarea>
              </form-field>
            </div>
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-12 justify-content-center">
                  <h6>Bienes</h6>
                  <div class="row">
                    <form-loader *ngIf="bienesLoading"></form-loader>
                    <div class="col-md-12">
                      <ng-scrollbar
                        [track]="'all'"
                        [ngStyle]="{
                          height: bienesLoading ? '0px' : '300px'
                        }">
                        <ng2-smart-table
                          [attr.class]="''"
                          [settings]="settings"
                          [source]="dataTableGood">
                        </ng2-smart-table>
                      </ng-scrollbar>
                    </div>
                    <app-pagination
                      [params]="paramsBienes"
                      [totalItems]="totalItems"></app-pagination>
                  </div>
                </div>
              </div>
              <form-field
                class="col-md-12 col-sm-12 col-12 p-2"
                [control]="respForm.get('paragraph2')"
                label="P&aacute;rrafo 2">
                <textarea
                  maxlength="500"
                  class="form-control text-justify"
                  formControlName="paragraph2"
                  rows="5"></textarea>
              </form-field>

              <form-field
                class="col-md-12 col-sm-12 col-12 p-2"
                [control]="respForm.get('paragraph3')"
                label="P&aacute;rrafo 3">
                <textarea
                  maxlength="500"
                  class="form-control text-justify"
                  formControlName="paragraph3"
                  rows="5"></textarea>
              </form-field>
            </div>
          </div>
        </form>
      </div>
    </app-card>

    <div footer>
      <div class="d-flex flex-row justify-content-center align-items-center">
        <div class="m-3">
          <button
            type="button"
            class="btn btn-primary active btn-sm"
            (click)="confirm()">
            Imprimir
            <i class="bx bx-printer bx-sm float-icon"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</app-card>
