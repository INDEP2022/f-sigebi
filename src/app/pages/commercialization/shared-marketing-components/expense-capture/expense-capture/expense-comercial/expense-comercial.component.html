<accordion [isAnimated]="true">
  <accordion-group [isOpen]="true" (isOpenChange)="toggleInformation = $event">
    <div accordion-heading class="row mt-3">
      <h5 class="title">
        Gastos del Área Comercial
        <i
          class="bx bx-chevron-down bx-md float-icon-md"
          style="float: right"
          [ngClass]="{
            'rotate-down': toggleInformation,
            'rotate-up': !toggleInformation
          }"></i>
      </h5>
    </div>
    <app-card [header]="false">
      <div body>
        <form class="form-material" [formGroup]="form">
          <div class="row mt-4 ml-0">
            <div class="col-md-2 col-6 p-0">
              <ng-custom-select-loading
                [form]="form"
                formControlName="expenseNumber"
                label="Id"
                [path]="pathComerExpenses"
                value="expenseNumber"
                bindLabel="expenseNumber"
                paramSearch="filter.expenseNumber"
                prefixSearch="$eq"
                (valueChange)="fillForm($event)">
              </ng-custom-select-loading>

              <!-- <form-field [control]="expenseNumber" label="Id">
                <input
                  type="text"
                  class="form-control"
                  formControlName="expenseNumber"
                  maxlength="11" />
              </form-field> -->
            </div>
          </div>
          <div class="row mt-4 ml-0">
            <ng-custom-select-loading
              [form]="form"
              formControlName="conceptNumber"
              label="Concepto"
              [path]="pathConcept"
              value="id"
              bindLabel="description"
              paramSearch="filter.id"
              prefixSearch="$eq"
              [updateValues]="true"
              [labelTemplate]="conceptLabel"
              [optionTemplate]="conceptOption"
              (valueChange)="getParams($event)">
            </ng-custom-select-loading>
            <ng-template #conceptLabel let-item="item">
              {{ item.id }} - {{ item.description }}
            </ng-template>
            <ng-template #conceptOption let-item="item">
              <div [title]="item.id + '-' + item.description">
                {{ item.id }} - {{ item.description }}
              </div>
            </ng-template>
          </div>
          <div class="row mt-4">
            <div class="col-6">
              <form-field
                [control]="paymentRequestNumber"
                label="Solicitud Pago">
                <input
                  type="text"
                  class="form-control"
                  formControlName="paymentRequestNumber"
                  maxlength="11" />
              </form-field>
            </div>
            <div class="col-6">
              <form-field [control]="idOrdinginter" label="OI Intercambio">
                <input
                  type="text"
                  class="form-control"
                  formControlName="idOrdinginter"
                  maxlength="11" />
              </form-field>
            </div>
          </div>
          <br />
          <div class="ch-content">
            <h5 style="font-size: 14px">
              Datos del evento al cual se asociará el gasto
            </h5>
          </div>
          <div class="row mt-4 ml-0">
            <ng-custom-select-loading
              [form]="form"
              formControlName="eventNumber"
              label="Evento"
              [path]="pathEvent"
              value="id_evento"
              bindLabel="cve_proceso"
              paramSearch="filter.cve_proceso"
              prefixSearch="$ilike"
              [labelTemplate]="eventLabel"
              [optionTemplate]="eventOption"
              (valueChange)="reloadLoteEvent($event)">
            </ng-custom-select-loading>
            <ng-template #eventLabel let-item="item">
              {{ item.id_evento }} - {{ item.cve_proceso }}
            </ng-template>
            <ng-template #eventOption let-item="item">
              <div [title]="item.id_evento + '-' + item.cve_proceso">
                {{ item.id_evento }} - {{ item.cve_proceso }}
              </div>
            </ng-template>
          </div>
          <div class="row mt-4 ml-0">
            <ng-custom-select-loading
              [form]="form"
              formControlName="lotNumber"
              label="Lote"
              [path]="pathLote"
              value="idLot"
              bindLabel="description"
              paramSearch="filter.idLot"
              prefixSearch="$eq"
              [load]="reloadLote"
              [labelTemplate]="lotLabel"
              [optionTemplate]="lotOption">
            </ng-custom-select-loading>
            <ng-template #lotLabel let-item="item">
              {{ item.idLot }} - {{ item.description }}
            </ng-template>
            <ng-template #lotOption let-item="item">
              <div [title]="item.idLot + '-' + item.description">
                {{ item.idLot }} - {{ item.description }}
              </div>
            </ng-template>
          </div>
          <div class="row mt-4 ml-0">
            <div class="col-6 pl-0">
              <form-field
                [control]="folioAtnCustomer"
                label="Folio Atn. Cliente">
                <input
                  type="text"
                  class="form-control"
                  formControlName="folioAtnCustomer"
                  maxlength="11" />
              </form-field>
            </div>
            <div class="col-6">
              <form-field
                [control]="dateOfResolution"
                label="Fecha de Resolución">
                <input
                  type="text"
                  class="form-control"
                  formControlName="dateOfResolution"
                  maxlength="12" />
              </form-field>
            </div>
          </div>
          <br />
          <div class="ch-content">
            <h5 style="font-size: 14px">Datos del beneficiario o proveedor</h5>
          </div>
          <div class="row mt-4 ml-0">
            <ng-custom-select-loading
              [form]="form"
              formControlName="lotNumber"
              label="Lote"
              [path]="pathLote"
              value="idLot"
              bindLabel="description"
              paramSearch="filter.idLot"
              prefixSearch="$eq"
              [labelTemplate]="lotLabel"
              [optionTemplate]="lotOption">
            </ng-custom-select-loading>
            <ng-template #lotLabel let-item="item">
              {{ item.idLot }} - {{ item.description }}
            </ng-template>
            <ng-template #lotOption let-item="item">
              <div [title]="item.idLot + '-' + item.description">
                {{ item.idLot }} - {{ item.description }}
              </div>
            </ng-template>
          </div>
          <div class="row mt-4">
            <div class="col-12">
              <form-field [control]="comment" label="Servicio">
                <textarea
                  class="form-control"
                  formControlName="comment"
                  rows="3"></textarea>
              </form-field>
            </div>
          </div>
          <br />
          <app-data-receipt [expense]="data"></app-data-receipt>
          <button
            type="button"
            class="btn btn-sm btn-primary active"
            (click)="sendToSIRSAE()">
            Envíar Solicitud de pago a SIRSAE
          </button>
        </form>
      </div>
    </app-card>
  </accordion-group>
</accordion>
