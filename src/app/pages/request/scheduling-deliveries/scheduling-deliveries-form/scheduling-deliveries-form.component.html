<app-card [header]="true">
  <div class="ch-content" header>
    <h5 class="title">Nueva programaci&oacute;n de entrega</h5>
  </div>
  <div body style="margin-top: -30px">
    <div class="justify-content-end btn-toolbar">
      <button
        type="button"
        [routerLink]="['execute-schelude-delivery']"
        class="btn btn-primary btn-sm active">
        Enviar programaci&oacute;n <i class="bx bx-send"></i>
      </button>

      <button
        (click)="saveProgDelivery()"
        type="button"
        class="btn btn btn-primary btn-sm active">
        Guardar <i aria-hidden="true" class="fa fa-save"></i>
      </button>
    </div>
    <h5 class="title">Detalle Programaci&oacute;n de Entrega</h5>
    <form [formGroup]="schedulingDeliverieForm" class="form-material">
      <div class="row pt-3">
        <div class="col-md-6">
          <div class="pt-3">
            <ngx-select
              [form]="schedulingDeliverieForm"
              control="typeEvent"
              [data]="TypeEventOptions"
              value="id"
              (change)="typeEventSelect($event)"
              bindLabel="nameEvent"
              label="Tipo de Evento"></ngx-select>
          </div>

          <div class="pt-3">
            <form-field
              [control]="schedulingDeliverieForm.get('startDate')"
              label="Fecha Inicio de Entrega">
              <input
                class="form-control"
                formControlName="startDate"
                [minDate]="date"
                (ngModelChange)="startDateSelect($event)"
                [daysDisabled]="[6, 0]"
                [bsConfig]="{
                  withTimepicker: true,
                  rangeInputFormat: 'DD/MM/YYYY HH:mm:ss',
                  dateInputFormat: 'DD/MM/YYYY HH:mm:ss',
                  keepDatepickerOpened: true
                }"
                bsDatepicker />
            </form-field>
          </div>

          <div class="pt-3">
            <form-field [control]="schedulingDeliverieForm.get('transferId')">
              <ngx-select
                [form]="schedulingDeliverieForm"
                control="transferId"
                [showTooltip]="true"
                [data]="transferences"
                value="id"
                bindLabel="nameAndId"
                label="Transferente"
                (fetchItems)="getTransferentSelect($event)"></ngx-select>
            </form-field>
          </div>
        </div>

        <div class="col-md-6">
          <div class="pt-3">
            <ngx-select
              [form]="schedulingDeliverieForm"
              control="store"
              [data]="warehouse"
              value="organizationCode"
              bindLabel="name"
              label="Almac&eacute;n"
              (fetchItems)="getWarehouseSelect($event)"></ngx-select>
          </div>

          <div class="pt-3">
            <form-field
              [control]="schedulingDeliverieForm.get('endDate')"
              label="Fecha Final de Entrega">
              <input
                class="form-control"
                [minDate]="startDate"
                [daysDisabled]="[6, 0]"
                [bsConfig]="{
                  withTimepicker: true,
                  rangeInputFormat: 'DD/MM/YYYY HH:mm:ss',
                  dateInputFormat: 'DD/MM/YYYY HH:mm:ss',
                  keepDatepickerOpened: true
                }"
                formControlName="endDate"
                bsDatepicker />
            </form-field>
          </div>
        </div>
        <div class="col-md-12">
          <div class="pt-3">
            <p>
              En la siguiente l&iacute;nea escriba los correos
              electr&oacute;nicos a los que desea enviar informaci&oacute;n de
              la programaci&oacute;n, debe separar los correos con ; como:
              ejemplo@correo.com; ejemplo@correo.com.
            </p>
          </div>
          <div class="pt-3">
            <form-field
              [control]="schedulingDeliverieForm.get('email')"
              label="Correos Electr&oacute;nicos">
              <textarea class="form-control" formControlName="email"></textarea>
            </form-field>
          </div>
        </div>
      </div>
      <div *ngIf="idTypeEvent == 5" class="pt-5">
        <h5 class="title pt-5">Detalles Programación por Destrucción</h5>
        <div class="justify-content-end btn-toolbar">
          <button class="btn btn-primary btn-sm active">
            Generar constancias de destrucción <i class="fa fa-file"></i>
          </button>
          <button class="btn btn-success btn-sm active">
            Notificación para destrucción <i class="fa fa-file"></i>
          </button>
          <button class="btn btn-primary btn-sm active">
            Notificación destrucción fondos <i class="fa fa-file"></i>
          </button>
        </div>
        <div class="row pt-5">
          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('officeDestructionNumber')"
              label="No. de Oficio">
              <input
                class="form-control"
                formControlName="officeDestructionNumber" />
            </form-field>
          </div>

          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('company')"
              label="Empresa">
              <input class="form-control" formControlName="company" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('addressee')"
              label="Nombre Destinatario">
              <input class="form-control" formControlName="addressee" />
            </form-field>
          </div>

          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('placeDestruction')"
              label="Lugar Destrucción">
              <input class="form-control" formControlName="placeDestruction" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('chargeAddressee')"
              label="Cargo Destinatario">
              <input class="form-control" formControlName="chargeAddressee" />
            </form-field>
          </div>

          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('locationDestruction')"
              label="Ubicación Destrucción">
              <input
                class="form-control"
                formControlName="locationDestruction" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('addressAddressee')"
              label="Dirección Destinatario">
              <input class="form-control" formControlName="addressAddressee" />
            </form-field>
          </div>

          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('taxpayerName')"
              label="Nombre Contribuyente">
              <input class="form-control" formControlName="taxpayerName" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('metodDestruction')"
              label="Método Destrucción">
              <input class="form-control" formControlName="metodDestruction" />
            </form-field>
          </div>

          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('legalRepresentativeName')"
              label="Nombre Representante Legal">
              <input
                class="form-control"
                formControlName="legalRepresentativeName" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-6">
            <form-field
              [control]="schedulingDeliverieForm.get('term')"
              label="Plazo (días)">
              <input class="form-control" formControlName="term" />
            </form-field>
          </div>
        </div>
      </div>
    </form>

    <div *ngIf="idTypeEvent == 5" class="pt-5">
      <h5 class="title">Filtrar Destrucción</h5>
      <form [formGroup]="searchDestructionForm" class="form-material">
        <div class="row pt-4">
          <div class="col-md-6">
            <form-field
              [control]="searchDestructionForm.get('quantity')"
              label="Cantidad Bienes">
              <input class="form-control" formControlName="quantity" />
            </form-field>
          </div>

          <div class="col-md-6">
            <form-field
              [control]="searchDestructionForm.get('managementNum')"
              label="No. Gestión">
              <input class="form-control" formControlName="managementNum" />
            </form-field>
          </div>
        </div>

        <div class="row pt-4">
          <div class="col-md-4">
            <form-field
              [control]="searchDestructionForm.get('descriptionGood')"
              label="Descripción Bien">
              <input class="form-control" formControlName="descriptionGood" />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="searchDestructionForm.get('inventoryNum')"
              label="No. Inventario">
              <input class="form-control" formControlName="inventoryNum" />
            </form-field>
          </div>

          <div class="col-md-4">
            <form-field
              [control]="searchDestructionForm.get('bienSiabNum')"
              label="No. INDEP">
              <input class="form-control" formControlName="bienSiabNum" />
            </form-field>
          </div>
        </div>
      </form>

      <div class="form-inline justify-content-end pt-3">
        <button
          (click)="showGoodsInventory()"
          class="btn btn-primary btn-sm active mr-2">
          Buscar <i class="bx bx-search-alt bx-sm float-icon"></i>
        </button>
        <button
          (click)="cleanSearchForm()"
          class="btn btn-danger btn-sm active">
          Limpiar <i class="fa fa-eraser"></i>
        </button>
      </div>

      <div class="row pt-4">
        <div class="btn-toolbar pt-3">
          <app-columns-select
            [(settings)]="settingsSearchDest"></app-columns-select>
        </div>

        <ng2-smart-table
          [attr.class]="'table-bordered table-responsive pt-3'"
          [settings]="settingsSearchDest"
          [source]="infoGoodDestruction">
        </ng2-smart-table>
        <app-pagination
          [params]="paramsSearchDest"
          [totalItems]="totalItemsSearchDest"></app-pagination>
      </div>
    </div>

    <div class="row pt-5">
      <h5 class="title">Vista Previa de Bienes a Programar</h5>

      <div class="btn-toolbar pt-3">
        <app-columns-select [(settings)]="settings"></app-columns-select>
        <button class="btn btn-primary btn-sm active">
          Agregar <i class="bx bx-plus bx-sm float-icon"></i>
        </button>
        <button class="btn btn-danger btn-sm active">
          Eliminar <i class="fa fa-trash" aria-hidden="true"></i>
        </button>
      </div>
      <div [class]="loading ? 'table-loading' : ''">
        <ng2-smart-table
          [attr.class]="'table-bordered table-responsive pt-3'"
          [settings]="settings"
          [source]="goodsToProgramData">
        </ng2-smart-table>
        <app-pagination
          [params]="params"
          [totalItems]="totalItems"></app-pagination>
      </div>
    </div>

    <!--<div *ngIf="filterSales" class="row pt-3">
        <h5 class="title">
          <p>
            <a
              class="text-color"
              (click)="showSearchForm = true"
              *ngIf="!showSearchForm">
              <i class="fa fa-angle-right" aria-hidden="true"></i> Filtrar
              ventas</a
            >
          </p>

          <p>
            <a
              class="text-color"
              (click)="showSearchForm = false"
              *ngIf="showSearchForm">
              <i class="fa fa-angle-down" aria-hidden="true"></i> Filtrar
              ventas</a
            >
          </p>
        </h5>

        <div *ngIf="showSearchForm" class="row pt-3">
          <form [formGroup]="searchForm" class="form-material">
            <div class="col-md-6">
              <div>
                <form-field
                  [control]="searchForm.get('goodDescription')"
                  label="Descripci&oacute;n bien">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="goodDescription" />
                </form-field>
              </div>

              <div class="pt-3">
                <form-field
                  [control]="searchForm.get('commercialEvent')"
                  label="Evento comercial">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="commercialEvent" />
                </form-field>
              </div>

              <div class="pt-3">
                <form-field
                  [control]="searchForm.get('invoice')"
                  label="Factura">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="invoice" />
                </form-field>
              </div>

              <div class="pt-3">
                <form-field
                  [control]="searchForm.get('commercialLot')"
                  label="Lote comercial">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="commercialLot" />
                </form-field>
              </div>
            </div>

            <div class="col-md-6">
              <div>
                <form-field
                  [control]="searchForm.get('numberSae')"
                  label="N&uacute;mero INDEP">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="numberSae" />
                </form-field>
              </div>

              <div class="pt-3">
                <form-field
                  [control]="searchForm.get('gestionNumber')"
                  label="N&uacute;mero gesti&oacute;n">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="gestionNumber" />
                </form-field>
              </div>

              <div class="pt-3">
                <form-field
                  [control]="searchForm.get('numberIventory')"
                  label="N&uacute;mero de inventario">
                  <input
                    type="text"
                    class="form-control"
                    formControlName="numberIventory" />
                </form-field>
              </div>
            </div>

            <div class="col-md-12">
              <div class="justify-content-end btn-toolbar">
                <button type="submit" class="btn btn-primary btn-sm active">
                  <i class="fa fa-search"></i>Buscar
                </button>
                <button
                  *ngIf="searchForm"
                  type="submit"
                  class="btn btn-danger btn-sm active">
                  Limpiar
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="row">
          <div class="btn-toolbar pt-3">
            <app-columns-select
              [(settings)]="settingsSearchSales"></app-columns-select>
          </div>

          <ng2-smart-table
            [attr.class]="'table-bordered'"
            [settings]="settingsSearchSales"
            [source]="SearchSalesData"
            (edit)="addEstate($event.data)">
          </ng2-smart-table>
          <app-pagination
            [params]="params"
            [totalItems]="totalItems"></app-pagination>
        </div>
      </div>

      
     -->
  </div>
</app-card>
