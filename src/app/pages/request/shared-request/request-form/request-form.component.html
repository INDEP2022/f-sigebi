<app-modal>
  <div header>
    <div *ngIf="op == 1; else optionTitle">
      <h5 class="modal-title">{{ edit ? 'Actualizar' : 'Nueva' }} SOLICITUD</h5>
    </div>
    <ng-template #optionTitle>
      <h5 class="modal-title">Documentaci&oacute;n Complementaria</h5>
    </ng-template>
  </div>
  <div body class="body">
    <form [formGroup]="requestForm" class="form-material">
      <app-card [header]="true">
        <div class="ch-content" header>
          <h6 class="title">Informaci&oacute;n de la Solicitud</h6>
        </div>
        <div body>
          <div class="row pt-5">
            <div class="col-md-2">
              <form-field
                [control]="requestForm.get('date')"
                label="Fecha de solicitud">
                <input
                  type="text"
                  class="form-control"
                  formControlName="date"
                  bsDatepicker />
              </form-field>
            </div>

            <div class="col-md-3">
              <ngx-select
                [form]="requestForm"
                control="regDelega"
                (fetchItems)="getRegionalDeleg($event)"
                [data]="selectRegionalDeleg"
                label="Delegaci&oacute;n Regional"
                value="regDelega"></ngx-select>
            </div>

            <div class="col-md-4">
              <ngx-select
                [form]="requestForm"
                control="transmitter"
                (fetchItems)="getTransmitter($event)"
                [data]="selectTransmitter"
                label="Emisora"
                value="transmitter"></ngx-select>
            </div>

            <div class="col-md-3">
              <form-field
                [control]="requestForm.get('noOfi')"
                label="No&#46; Oficina">
                <input
                  type="text"
                  class="form-control"
                  formControlName="noOfi" />
              </form-field>
            </div>
          </div>
          <div class="row pt-5">
            <div class="col-md-3">
              <ngx-select
                [form]="requestForm"
                control="entity"
                (fetchItems)="getEntity($event)"
                [data]="selectEntity"
                label="Entidad"
                value="regDelega"></ngx-select>
            </div>
            <div class="col-md-3">
              <ngx-select
                [form]="requestForm"
                control="authority"
                (fetchItems)="getAuthority($event)"
                [data]="selectAuthority"
                label="Autoridad"
                value="regDelega"></ngx-select>
            </div>
            <div class="col-md-3">
              <ngx-select
                [form]="requestForm"
                control="tranfe"
                (fetchItems)="getTransfe($event)"
                [data]="selectTransfe"
                label="Transferencia"
                value="regDelega"></ngx-select>
            </div>
            <div *ngIf="op == 2" class="col-md-3">
              <ngx-select
                [form]="requestForm"
                control="state"
                (fetchItems)="getState($event)"
                [data]="selectState"
                label="Estado"
                value="regDelega"></ngx-select>
            </div>
          </div>
        </div>
      </app-card>

      <div *ngIf="op == 2">
        <app-card [header]="true">
          <div class="ch-content" header>
            <h6 class="title">Seleccione el Asunto</h6>
          </div>
          <div body>
            <div class="row pt-5">
              <div class="col-md-6">
                <form-field [control]="requestForm.get('issue')">
                  <ngx-select
                    (fetchItems)="getIssue($event)"
                    [data]="issues"
                    [form]="requestForm"
                    value="id"
                    bindLabel="issue"
                    label="Asunto"
                    [control]="'issue'">
                  </ngx-select>
                </form-field>
              </div>
            </div>
          </div>
        </app-card>
      </div>

      <app-card [header]="true">
        <div class="ch-content" header>
          <h6 class="title">Seleccione Usuario a Turnar</h6>
        </div>
        <div body>
          <div class="row pt-5">
            <div class="col-md-3" style="line-height: 2.5">
              Tipo de Usuario&#58;
            </div>
            <div class="col-sm-1">
              <form-radio label="All">
                <input
                  type="radio"
                  formControlName="typeUser"
                  value="all"
                  id="all"
                  [checked]="checked" />
              </form-radio>
            </div>
            <div class="col-sm-1">
              <form-radio label="Any">
                <input
                  type="radio"
                  formControlName="typeUser"
                  value="any"
                  id="any" />
              </form-radio>
            </div>
            <div class="col-md-3">
              <button
                class="btn btn-info active btn-sm ml-3"
                (click)="openModalSelectUser()">
                Seleccionar
              </button>
            </div>
          </div>

          <div class="row pt-5">
            <div class="col-md-3">Usuario Recepci&oacute;n&#58;</div>
            <div class="col-md-3">
              <input
                type="text"
                class="form-control"
                formControlName="receiUser" />
            </div>
          </div>
        </div>
      </app-card>
    </form>
  </div>
  <div footer>
    <div class="d-flex justify-content-center">
      <div class="m-3">
        <confirm-button
          [disabled]="requestForm.invalid"
          [loading]="loading"
          (confirm)="confirm()">
        </confirm-button>
      </div>
      <div class="m-3">
        <button
          type="button"
          class="btn btn-secondary active"
          [disabled]="requestForm.invalid"
          (click)="confirm()">
          Turnar
        </button>
      </div>
      <div class="m-3">
        <button type="button" class="btn btn-danger active" (click)="close()">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</app-modal>
