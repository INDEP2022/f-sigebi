<div class="my-4">
  <app-card [header]="false" class="p-10">
    <div body>
      <form [formGroup]="searchForm" class="form-material pb-0 mb-0">
        <div
          class="ms-n2 mb-2 pointer"
          (click)="toggleSearch = !toggleSearch"
          [attr.aria-expanded]="!toggleSearch"
          aria-controls="collapseSearch">
          <i
            class="bx bx-chevron-down bx-md float-icon-md"
            [ngClass]="{
              'rotate-down': toggleSearch,
              'rotate-up': !toggleSearch
            }"></i>
          <h6 class="d-inline">Buscar Solicitudes</h6>
        </div>
        <div
          class="row mt-5"
          id="collapseSearch"
          [isAnimated]="true"
          [collapse]="!toggleSearch">
          <div class="row mt-3">
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('id')"
                label="No&#46; Solicitud">
                <input
                  type="number"
                  formControlName="id"
                  min="0"
                  class="form-control" />
              </form-field>
            </div>
            <div class="col-md-4">
              <ngx-select
                [form]="searchForm"
                control="authorityId"
                (fetchItems)="getAuthority($event)"
                [showTooltip]="true"
                [data]="authorities"
                bindLabel="authorityName"
                label="Autoridad"
                value="idAuthority"></ngx-select>
              <!-- <form-field
                [control]="searchForm.get('authority')"
                label="Autoridad">
                <ng-select
                  formControlName="authority"
                  [searchable]="false"
                  class="form-control"
                  [clearable]="false">
                  <ng-option *ngFor="let a of authorities" value="a.id">{{
                    a.description
                  }}</ng-option>
                </ng-select>
              </form-field> -->
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('typeRecord')"
                label="Tipo Transferencia">
                <input
                  type="text"
                  formControlName="typeRecord"
                  class="form-control" />
              </form-field>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('recordId')"
                label="No&#46; Expediente">
                <input
                  type="number"
                  formControlName="recordId"
                  min="0"
                  class="form-control" />
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('indicatedTaxpayer')"
                label="Contribuyente y&#47;o Indiciado">
                <input
                  type="text"
                  formControlName="indicatedTaxpayer"
                  maxlength="200"
                  class="form-control" />
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('domainExtinction')"
                label="Extinci&oacute;n de Dominio">
                <input
                  type="text"
                  formControlName="domainExtinction"
                  maxlength="100"
                  class="form-control" />
              </form-field>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-4">
              <form-field [control]="searchForm.get('regionalDelegationId')">
                <ngx-select
                  [form]="searchForm"
                  [data]="delegationItems"
                  value="id"
                  bindLabel="description"
                  label="Delegaci&oacute;n Regional"
                  (fetchItems)="getRegionalDeleg($event)"
                  control="regionalDelegationId"
                  (change)="updateDelegation($event)">
                </ngx-select>
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('transferenceFile')"
                label="Expediente Transferente &#47; PAMA">
                <input
                  type="text"
                  formControlName="transferenceFile"
                  maxlength="500"
                  class="form-control" />
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('trialType')"
                label="Tipo Juicio">
                <input
                  type="text"
                  formControlName="trialType"
                  maxlength="100"
                  class="form-control" />
              </form-field>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-4">
              <form-field [control]="searchForm.get('keyStateOfRepublic')">
                <ngx-select
                  [form]="searchForm"
                  [data]="stateItems"
                  value="id"
                  bindLabel="descCondition"
                  label="Estado"
                  (fetchItems)="getStates($event)"
                  control="keyStateOfRepublic"
                  (change)="stateChanged($event)">
                </ngx-select>
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('previousInquiry')"
                label="Averiguaci&oacute;n Previa">
                <input
                  type="text"
                  formControlName="previousInquiry"
                  maxlength="100"
                  class="form-control" />
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field [control]="searchForm.get('trial')" label="Juicio">
                <input
                  type="text"
                  formControlName="trial"
                  maxlength="100"
                  class="form-control" />
              </form-field>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-4">
              <form-field [control]="searchForm.get('transferenceId')">
                <ngx-select
                  [form]="searchForm"
                  [data]="transfereeItems"
                  value="id"
                  bindLabel="nameTransferent"
                  label="Transferente"
                  (fetchItems)="getTransferent($event)"
                  control="transferenceId"
                  (change)="transferenceChanges($event)">
                </ngx-select>
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('criminalCase')"
                label="Causa Penal">
                <input
                  type="text"
                  formControlName="criminalCase"
                  maxlength="100"
                  class="form-control" />
              </form-field>
            </div>
            <div class="col-md-4">
              <form-field
                [control]="searchForm.get('protectNumber')"
                label="No&#46; Amparo">
                <input
                  type="text"
                  formControlName="protectNumber"
                  maxlength="100"
                  class="form-control" />
              </form-field>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-4">
              <form-field [control]="searchForm.get('stationId')">
                <ngx-select
                  [form]="searchForm"
                  [data]="emitterItems"
                  value="id"
                  bindLabel="stationName"
                  label="Emisora"
                  (fetchItems)="getEmitters($event)"
                  control="stationId"
                  (change)="stationChanges($event)">
                </ngx-select>
              </form-field>
            </div>
          </div>
          <div class="mt-3 d-flex flex-row-reverse">
            <div class="mx-1">
              <button
                (click)="search()"
                class="btn btn-sm btn-primary active btn-sm"
                [disabled]="!searchForm.touched">
                <i class="bx bx-search-alt-2 me-1 float-icon"></i> Buscar
              </button>
            </div>
            <div class="mx-1">
              <button
                (click)="reset()"
                class="btn btn-danger active btn-sm"
                [disabled]="!searchForm.touched">
                <i class="bx bx-reset me-1 float-icon"></i> Limpiar
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </app-card>
</div>
