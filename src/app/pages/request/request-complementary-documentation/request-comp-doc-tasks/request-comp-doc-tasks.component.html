<app-card [header]="true">
  <div class="ch-content justify-content-between" header>
    <div class="">
      <h5 class="title">
        {{ title }}
      </h5>
    </div>
  </div>
  <div body>
    <div class="">
      <div class="d-flex flex-row-reverse" *ngIf="true">
        <ng-template #turnar>
          <div class="mx-1" *ngIf="turnReq && !complementaryDoc">
            <button
              type="button"
              class="btn btn-primary btn-sm active"
              (click)="turnRequest()"
              [disabled]="!nextTurn">
              Turnar <i aria-hidden="true" class="fa fa-share-square"></i>
            </button>
          </div>
        </ng-template>
        <div
          *ngIf="
            finish ||
              processDetonate === 'DECOMISO' ||
              processDetonate === 'EXT_DOMINIO' ||
              processDetonate === 'ABANDONO' ||
              processDetonate === 'complementaryDoc';
            else turnar
          ">
          <div class="mx-1">
            <button
              type="button"
              class="btn btn-primary btn-sm active"
              (click)="endRequest()"
              [disabled]="!nextTurn">
              Finalizar <i aria-hidden="true" class="fa fa-check"></i>
            </button>
          </div>
        </div>
        <div class="mx-1" *ngIf="btnAprove">
          <button
            type="button"
            class="btn btn-sm btn-success active"
            [disabled]="!nextTurn"
            (click)="btnAprobar()">
            Aprobar
            <i class="fa fa-check" aria-hidden="true"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="btnRequestAprove">
          <button
            type="button"
            class="btn btn-sm btn-success active"
            [disabled]="!nextTurn"
            (click)="btnRequestAprobar()">
            Solicitar Aprobación
            <i class="fa fa-envelope"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="requestReview">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]="!nextTurn"
            (click)="btnRequestReview()">
            Solicitar revisión
            <i class="bx bx-check mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1">
          <button
            type="button"
            class="btn btn-primary btn-sm active"
            [disabled]="!nextTurn"
            (click)="updateRequest()">
            Guardar <i class="fa fa-save mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="resultEyeVisitReport || makeResultPaperReport">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Reporte Resultado Visita Ocular
            <i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="compensationAct">
          <button
            type="button"
            class="btn btn-primary btn-sm active"
            [disabled]=""
            (click)="openReport()">
            Acta de Resarcimiento<i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="reportValidateDictum">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Documento Validar Dictamen
            <i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="notifyReport">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Notificación
            <i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="RequestEconomicResourcesReport">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Solicitud Recursos Económicos
            <i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="createReport">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Dictamen Resarcimiento
            <i class="bx bx-file bx-m float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="legalStatus">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openModalLegal()">
            Oficio de Cambio de Situación Jurídica
            <i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="destinyJob">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Oficio Destino
            <i class="bx bx-notepad mr-1 float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="dictumReturn">
          <button
            type="button"
            class="btn btn-info active btn-sm"
            [disabled]=""
            (click)="openReport()">
            Dictamen Devolución <i class="bx bx-file bx-m float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="btnDecline || rejectReq">
          <button
            type="button"
            class="btn btn-danger btn-sm active mr-3"
            [disabled]="!nextTurn"
            (click)="rejectRequest()">
            Rechazar
            <i class="bx bx-x bx-m float-icon"></i>
          </button>
        </div>
        <div class="mx-1" *ngIf="sendEmail">
          <button
            type="button"
            class="btn btn-sm btn-success active"
            [disabled]=""
            (click)="openSendEmail()">
            Enviar Correo de Solicitud
            <i class="bx bx-mail-send mr-1 float-icon"></i>
          </button>
        </div>

        <div class="mx-1">
          <button class="btn btn-primary active btn-sm" (click)="close()">
            Regresar
            <i class="fas fa-arrow-circle-left"></i>
          </button>
        </div>
      </div>

      <div class="" *ngIf="false">
        <div
          class="btn-group"
          placement="bottom right"
          dropdown
          [isDisabled]="">
          <button
            #actionsBtn
            dropdownToggle
            type="button"
            class="btn btn-sm btn-primary btn-block active me-2 font-size-14 dropdown-toggle"
            aria-controls="dropdown-actions">
            Acciones
          </button>
          <ul
            id="dropdown-csv"
            *dropdownMenu
            class="dropdown-menu dropdown-menu-right bg-primary"
            role="menu"
            aria-labelledby="processBtn">
            <li role="menuitem">
              <a class="dropdown-item bg-primary text-light" (click)="(true)"
                >Dictamen Resarcimiento
                <i class="bx bx-file bx-m float-icon"></i>
              </a>
            </li>
            <li role="menuitem">
              <a
                class="dropdown-item bg-primary text-light"
                (click)="updateRequest()">
                Guardar
                <i class="bx bxs-right-arrow-square mr-1 float-icon"></i>
              </a>
            </li>
            <li role="menuitem">
              <a
                *ngIf="
                  processDetonate === 'DECOMISO' ||
                    processDetonate === 'EXT_DOMINIO' ||
                    processDetonate === 'ABANDONO' ||
                    processDetonate === 'complementaryDoc';
                  else turnarresp
                "
                class="dropdown-item bg-primary text-light"
                (click)="endRequest()">
                Finalizar <i aria-hidden="true" class="fa fa-check"></i
              ></a>
            </li>
            <ng-template #turnarresp>
              <li role="menuitem">
                <a
                  class="dropdown-item bg-primary text-light"
                  (click)="turnRequest()">
                  Turnar</a
                >
                <i aria-hidden="true" class="fa fa-share-square"></i>
              </li>
            </ng-template>
            <li>
              <a class="dropdown-item bg-primary text-light" (click)="close()">
                Regresar <i class="fas fa-arrow-circle-left"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <app-request-information-similar-goods
      [request]="requestInfo"></app-request-information-similar-goods>

    <div
      *ngIf="processDetonate == 'RES_ESPECIE' && process == 'register-request'">
      <app-card [header]="false" class="p-10">
        <div body>
          <form [formGroup]="emailForm" class="form-material">
            <div class="row">
              <div class="col-md-3">
                <form-field
                  [control]="emailForm.get('emailUser')"
                  label="Correo Usuario">
                  <input
                    type="email"
                    id="email"
                    class="form-control"
                    formControlName="emailUser" />
                </form-field>
              </div>
            </div>
          </form>
        </div>
      </app-card>
    </div>

    <div>
      <tabset class="md-tabs" #staticTabs>
        <tab
          *ngIf="regDocForm"
          heading="Registro de Documentación"
          id="documentationTab">
          <app-register-documentation-form
            (onChange)="onChangeRegDoc($event)"
            [requestId]="requestId"
            [process]="process"></app-register-documentation-form>
        </tab>

        <tab
          *ngIf="regDocView"
          heading="Información de la solicitud"
          id="documentationTab">
          <app-register-documentation-view
            [requestId]="requestId"
            [process]="process"></app-register-documentation-view>
        </tab>
        <tab
          *ngIf="searchRequestSimGoods"
          heading="Buscar Solicitudes de Bienes Similares"
          id="requestSimilarGoodsTab">
          <app-search-request-similar-goods
            [selected]="true"></app-search-request-similar-goods>
        </tab>
        <tab
          *ngIf="registAppointment"
          heading="Registro de Cita"
          id="appointmentTab">
          <app-register-dictum-val
            [steap3]="steap3"
            [requestId]="requestId"
            (onSave)="onDictumData($event)"></app-register-dictum-val>
        </tab>
        <tab *ngIf="orderEntry" heading="Orden Ingreso" id="entryOrderTab">
          <app-entry-order
            (onSave)="onOrder($event)"
            [requestId]="requestId"></app-entry-order>
        </tab>
        <tab *ngIf="orderView" heading="Orden Ingreso" id="entryOrderTab">
          <app-entry-order-view></app-entry-order-view>
        </tab>

        <tab
          *ngIf="searchAssociateFile"
          heading="Buscar y Asociar al Expediente"
          id="associateTab">
          <app-search-request-similar-goods></app-search-request-similar-goods>
        </tab>

        <tab
          *ngIf="selectGoods"
          heading="Seleccionar Bienes"
          id="selectGoodsTab">
          <app-select-goods
            [btnGrouper]="btnGrouper"
            [updateInfo]="updateInfo"
            (onChange)="onSelectGoods($event)"
            [idRequest]="requestId"></app-select-goods>

          <div *ngIf="selectGoodsNot">
            <app-goods-not-transferred
              [requestId]="requestId"></app-goods-not-transferred>
          </div>
        </tab>
        <tab
          *ngIf="selectGoodForEyeVisit"
          heading="Bienes Seleccionados"
          id="selectGoodsEyeVisitTab">
          <app-select-good-eye-visit
            [viewGrouper]="btnGrouper"
            [idRequest]="requestId"
            (onChange)="onProgramVisit($event)"
            [typeVisit]="typeVisit"></app-select-good-eye-visit>
          <div *ngIf="selectGoodNotForEyeVisit">
            <app-goods-not-transferred></app-goods-not-transferred>
          </div>
        </tab>

        <tab
          heading="Verificar Cumplimiento de Bienes"
          *ngIf="verifyCompliance">
          <app-verify-compliance-goods
            (onChange)="onVerifyCom($event)"></app-verify-compliance-goods>
        </tab>
        <tab
          *ngIf="validateGoodForEyeVisit"
          heading="Validar Resultado Visitas"
          id="validateGoodsEyeVisitTab">
          <app-validate-eye-visit (onChange)="onProgramVisit($event)" [idRequest]="requestId"></app-validate-eye-visit>
        </tab>
        <tab
          *ngIf="resultVisits"
          heading="Resultado Visitas"
          id="resultVisitsTab">
          <app-select-good-eye-visit
            [idRequest]="requestId"
            [typeVisit]="typeVisit"></app-select-good-eye-visit>
        </tab>
        <tab
          *ngIf="viewSelectedGoods"
          heading="{{ listGoodSelectedTitle }}"
          id="goodsListTab">
          <app-goods-list
            [requestId]="requestId"
            [processDetonate]="processDetonate"></app-goods-list>
        </tab>
        <tab *ngIf="guidelines" heading="Lineamientos" id="guidelinesTab">
          <app-guidelines
            [requestId]="requestId"
            (onChange)="onGuidelines($event)"></app-guidelines>
        </tab>
        <tab *ngIf="viewGuidelines" heading="Lineamientos" id="guidelinesTab">
          <app-guidelines-view [requestId]="requestId"></app-guidelines-view>
        </tab>

        <tab *ngIf="dictumValidate" heading="Datos del Dictamen" id="dictumTab">
          <app-register-dictum-val
            [steap1]="steap1"
            [requestId]="requestId"
            [isEdit]="isEdit"
            (onSave)="onDictumData($event)"></app-register-dictum-val>
        </tab>
        <tab *ngIf="dictumRegister" heading="Datos del Dictamen" id="dictumTab">
          <app-register-dictum-val
            [steap1]="steap1"
            [steap2]="steap2"
            [requestId]="requestId"
            [isEdit]="isEdit"
            (onSave)="onDictumData($event)"></app-register-dictum-val>
        </tab>

        <tab
          *ngIf="expRequest"
          (selectTab)="expedientSelected(true)"
          heading="Expediente"
          id="fileTab">
          <tabset class="md-tabs" *ngIf="displayExpedient == true">
            <tab
              heading="Documentos Solicitud"
              id="tab1"
              (selectTab)="requestSelected(1)">
              <app-doc-request-tab
                [typeDoc]="typeDoc"
                [updateInfo]="updateInfo"
                [typeModule]="typeModule"
                (onChange)="onSelectFiles($event)"></app-doc-request-tab>
            </tab>
            <tab
              heading="Documentos Generales"
              (selectTab)="requestSelected(2)">
              <tabset class="md-tabs">
                <tab
                  heading="Documento Expedientes"
                  id="tab1"
                  (selectTab)="requestSelected(2)">
                  <app-doc-request-tab
                    [typeDoc]="typeDoc"
                    [typeModule]="typeModule"
                    (onChange)="onSelectFiles($event)"></app-doc-request-tab>
                </tab>
                <tab
                  heading="Solicitudes del Expediente"
                  (selectTab)="requestSelected(3)">
                  <app-expedients-request-tab
                    [typeDoc]="typeDoc"
                    [typeModule]="typeModule"></app-expedients-request-tab>
                </tab>
              </tabset>
            </tab>
          </tabset>
        </tab>
      </tabset>
    </div>
  </div>
</app-card>
